# 1730Timetable 통합 요구사항 문서

> 이 문서는 1730Timetable 솔루션의 전체 요구사항을 종합적으로 정리한 문서입니다.
>
> 참고 문서:
> - [1730Timetable-솔루션-요구사항-및-플랜-예시.md](./1730Timetable-솔루션-요구사항-및-플랜-예시.md)
> - [MVP-요구사항.md](./timetable_f/MVP-요구사항.md)
> - [요구사항-정리.md](./요구사항-정리.md)
> - [플랜-생성-로직-설계.md](./플랜-생성-로직-설계.md)
> - [학습일-복습일-주기-설정.md](./학습일-복습일-주기-설정.md)

---

## 목차

### Part 1: 시스템 개요 및 아키텍처
1. [시스템 개요](#시스템-개요)
2. [멀티테넌트 구조](#멀티테넌트-구조)
3. [사용자 역할 및 권한](#사용자-역할-및-권한)

### Part 2: 핵심 기능 - 플랜 생성 시스템
4. [성적 분석 기반 교재/강의 추천](#성적-분석-기반-교재강의-추천)
5. [수준 분석 기반 학습 분량 추천](#수준-분석-기반-학습-분량-추천)
6. [전략과목/취약과목 추천](#전략과목취약과목-추천)
7. [학습 범위 분할 및 소요시간 계산](#학습-범위-분할-및-소요시간-계산)
8. [플랜 생성 로직](#플랜-생성-로직)
9. [학습일/복습일 주기 설정](#학습일복습일-주기-설정)
10. [추가 기간 학습 범위 재배치](#추가-기간-학습-범위-재배치)

### Part 3: 시스템 기능 - MVP 요구사항
11. [인증 및 사용자 관리](#인증-및-사용자-관리)
12. [관리자 페이지](#관리자-페이지)
13. [학생 관리](#학생-관리)
14. [직원 관리](#직원-관리)
15. [입실/퇴실 기록](#입실퇴실-기록)
16. [프로필 및 마이페이지](#프로필-및-마이페이지)
17. [게시판](#게시판)
18. [문의 페이지](#문의-페이지)
19. [문자 전송](#문자-전송)
20. [수강료 관리](#수강료-관리)
21. [학부모 페이지 및 학생 연동](#학부모-페이지-및-학생-연동)
22. [교육과정 및 교과 관리](#교육과정-및-교과-관리)
23. [교재 및 강의 자료 관리](#교재-및-강의-자료-관리)

### Part 4: AI 분석 및 추천 시스템
24. [학생 성적 기반 학생 분석 AI](#학생-성적-기반-학생-분석-ai)
25. [교재 분석 AI](#교재-분석-ai)
26. [강의 분석 AI](#강의-분석-ai)
27. [플랜 생성 AI](#플랜-생성-ai)
28. [통합 AI 시스템](#통합-ai-시스템)
29. [학습 관리 AI](#학습-관리-ai)

### Part 5: 플랜 관리 및 실행
30. [통합 플랜 생성 및 관리](#통합-플랜-생성-및-관리)
31. [플랜 학습 실행 및 기록](#플랜-학습-실행-및-기록)
32. [플랜 재생성(조율) 기능](#플랜-재생성조율-기능)
33. [타임라인 캘린더 뷰](#타임라인-캘린더-뷰)

### Part 6: 데이터 구조 및 예시
34. [데이터 구조](#데이터-구조)
35. [플랜 작성 예시](#플랜-작성-예시)

---

## 시스템 개요

1730Timetable 솔루션은 학생의 성적 분석을 기반으로 맞춤형 학습 플랜을 자동 생성하는 통합 학습 관리 시스템입니다.

### 핵심 기능

- **성적 분석 기반 교재/강의 추천**: 내신성적과 모의고사 성적을 분석하여 적합한 교재와 강의 추천
- **수준 분석 기반 학습 분량 추천**: 학생 수준에 맞는 적절한 학습 분량 계산
- **전략과목/취약과목 추천**: 성적 분석을 바탕으로 전략과목과 취약과목 추천
- **자동 플랜 생성**: 학습 시간대, 제외 시간, 주기 등을 고려한 최적의 학습 스케줄 자동 생성
- **타임라인 구성**: 플랜별 소요시간을 바탕으로 실제 시간대에 플랜 배정
- **학습 진행 관리**: 플랜 실행, 학습 기록, 통계 및 리포트 제공

### 시스템 특징

- **멀티테넌트 구조**: 여러 프렌차이즈 지점이 독립적으로 사용 가능
- **AI 기반 분석**: 학생 성적, 교재, 강의를 AI로 분석하여 맞춤형 추천
- **통합 플랜 관리**: 개별 플랜 및 통합 플랜(캠프 프로그램) 지원
- **실시간 모니터링**: 학습 진행 상황 실시간 추적 및 피드백

---

## 멀티테넌트 구조

### 테넌트(프렌차이즈) 관리

여러 프렌차이즈 지점이나 조직이 각각 독립적으로 시스템을 사용할 수 있도록 하는 멀티테넌트 구조.

#### 기능 요구사항

**필수 기능**
- 테넌트 등록 (CRUD)
- 테넌트별 데이터 격리
- 테넌트별 설정 관리
- 테넌트별 사용자 관리
- 테넌트별 권한 관리
- 테넌트별 도메인/서브도메인 설정

**선택 기능**
- 테넌트별 브랜딩 (로고, 색상, 테마)
- 테넌트별 기능 활성화/비활성화
- 테넌트별 결제/구독 관리
- 테넌트별 통계 및 리포트

#### 테넌트 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 테넌트명: 문자열 (예: "강남점", "서초점", "부산점")
- 코드: 테넌트 코드 (예: "GANGNAM", "SEOCHO", "BUSAN")
- 도메인: 문자열 (예: "gangnam.1730timetable.com")
- 서브도메인: 문자열 (예: "gangnam")
- 상태: "활성" | "비활성" | "일시정지" | "삭제됨"
- 등록일: ISO 8601 타임스탬프
- 만료일: ISO 8601 타임스탬프 (선택)

**설정 정보**
- 브랜딩: 객체 (로고 URL, 메인 색상, 서브 색상, 테마)
- 기능 설정: 객체 (AI 분석 기능, 통합 플랜 생성, 학부모 페이지 등)
- 제한 설정: 객체 (최대 학생 수, 최대 사용자 수, 최대 플랜 수, 저장 공간)

#### 데이터 격리 방식

**방식 1: 테넌트 ID 기반 격리 (Shared Database)**
- 모든 테이블에 `tenant_id` 컬럼 추가
- 모든 쿼리에 `WHERE tenant_id = ?` 자동 추가
- 애플리케이션 레벨에서 격리 보장

**방식 2: 데이터베이스별 격리 (Separate Database)**
- 테넌트별로 별도 데이터베이스 생성
- 연결 시 테넌트별 데이터베이스에 연결
- 데이터베이스 레벨에서 격리 보장

**방식 3: 스키마별 격리 (Schema per Tenant)**
- 테넌트별로 별도 스키마 생성
- 연결 시 테넌트별 스키마에 연결
- 스키마 레벨에서 격리 보장

---

## 사용자 역할 및 권한

### 사용자 유형

**시스템 관리자**
- 시스템 전체 관리
- 모든 테넌트 관리
- 시스템 설정 관리

**테넌트 관리자**
- 테넌트 설정 관리
- 테넌트 사용자 관리
- 테넌트 데이터 전체 접근

**담당자**
- 학생 관리
- 플랜 생성 및 관리
- 성적 관리
- 학습 리포트 조회

**학생**
- 본인 학습 플랜 조회
- 본인 학습 기록 관리
- 본인 성적 조회

**학부모**
- 자녀 학습 현황 조회 (연동된 경우)
- 자녀 성적 조회 (연동된 경우)

---

## 성적 분석 기반 교재/강의 추천

### 개요

학생의 내신성적과 모의고사 성적을 분석하여 적합한 교재와 강의를 추천하는 기능

### 입력 데이터

- **내신성적**: 과목별 성적, 학기/학년 정보, 등급 또는 점수
- **모의고사 성적**: 과목별 성적, 시험 일자, 등급/점수, 표준점수, 백분위

### 분석 항목

- 성적 추이 분석 (향상/하락 패턴)
- 과목별 약점/강점 파악
- 내신 vs 모의고사 성적 비교
- 목표 대비 현재 수준 분석

### 추천 결과

- **교재 추천**: 교재명, 추천 이유, 난이도 레벨, 학습 목표
- **강의 추천**: 강의명, 추천 이유, 난이도 레벨, 학습 목표

---

## 수준 분석 기반 학습 분량 추천

### 개요

학생의 수준을 분석하여 교재와 강의의 적절한 학습 분량을 추천하는 기능

### 필수 고려사항

- **플랜 기간 정보**: 플랜 시작일, 종료일, 총 플랜 기간, 학습일 수, 복습일 수
- **플랜 배정 가능한 시간**: 일일 학습 가능 시간, 주간 학습 가능 시간, 학습 시간대, 제외 시간, 실제 학습 가능 시간

### 추천 결과

- **일일 학습 분량**: 플랜 배정 가능한 시간 기반 분량
- **주간/월간 학습 분량**: 플랜 기간 기반 분량
- **플랜 기간별 분량 분배**: 학습일별 분량 배정, 복습일 고려

---

## 전략과목/취약과목 추천

### 개요

학생의 성적과 분석을 바탕으로 전략과목(교과)과 취약과목(교과)을 추천하는 기능

### 플랜 배정 방식 ⚠️ 필수 요구사항

**취약과목 플랜 배정**
- **전체 학습일에 플랜 배정**
- 모든 학습일에 해당 과목의 플랜이 배정됨
- 복습일에는 제외 (복습일은 직전 학습일 복습)
- 제외일에는 제외

**전략과목 플랜 배정**
- **주 2~4일 배정을 선택할 수 있어야 함**
- 주당 배정 일수 선택 옵션: 2일, 3일, 4일
- 선택한 주당 일수에 따라 학습일에 균등하게 배정
- 복습일에는 제외
- 제외일에는 제외

### 배정 예시

- **취약과목**: 학습일 20일 → 20일 모두 해당 과목 플랜 배정
- **전략과목**: 학습일 20일, 주 3일 선택 → 주당 학습일 중 3일에만 해당 과목 플랜 배정 (총 약 12일)

---

## 학습 범위 분할 및 소요시간 계산

### 개요

교재와 강의의 학습 범위를 학습일과 전략/취약과목을 고려하여 나누고, 학생 수준을 바탕으로 소요시간을 도출하는 기능

### 학습 범위 분할 규칙

- **취약과목**: 전체 학습일에 배정되므로 학습일 수로 전체 범위를 균등 분할
- **전략과목**: 주당 배정 일수에 따라 범위 분할
- **범위 분할 우선순위**: 단원/챕터 경계 우선 → 학습일 수에 따른 균등 분할

### 소요시간 계산 규칙

- **기본 소요시간**: 표준 소요시간 × 학생 수준 보정 계수
  - 상위 수준: 0.8~0.9
  - 중위 수준: 1.0
  - 하위 수준: 1.1~1.3
- **과목별 소요시간 조정**
  - 취약과목: 기본 소요시간 × 1.2
  - 전략과목: 기본 소요시간 × 1.0~1.1
- **복습일 소요시간 계산** ⚠️ 필수 고려사항
  - 복습일에는 직전 학습일(6일) 동안 학습한 전체 범위를 복습
  - 복습 소요시간 = 직전 학습일(6일) 범위의 학습 소요시간 × 복습 보정 계수
  - 복습 보정 계수: 0.3~0.5 (학습 대비 30~50% 시간)

---

## 플랜 생성 로직

### 1. 기간 정보 (Period)

#### 필수 입력 항목

- **period_start** (시작일): `YYYY-MM-DD` 형식
- **period_end** (종료일): `YYYY-MM-DD` 형식

#### 제약조건

- `period_end > period_start`

---

### 2. 학습 시간 설정 (Study Hours)

#### 필수 입력 항목

- **하루 중 학습 가능한 시간 범위**
  - 시작 시간: `HH:mm` (24시간 형식)
  - 종료 시간: `HH:mm` (24시간 형식)
  - 예시: `10:00 ~ 19:00`

#### 제약조건

- 시작 시간 < 종료 시간
- 시간 형식이 올바르야 함 (`HH:mm`)

---

### 3. 자율학습 시간 설정 (Self-Study Hours)

#### 선택 입력 항목

- **자율학습 가능한 시간 범위**
  - 시작 시간: `HH:mm` (24시간 형식)
  - 종료 시간: `HH:mm` (24시간 형식)
  - 예시: `19:00 ~ 22:00`

#### ⚠️ 중요 제약사항

- **자율학습 시간에는 기본적으로 플랜 배정을 하지 않음**
- **배정 가능한 시간이 부족한 경우에만 자율 학습 시간 사용**
- **지정휴일의 경우 설정에 따라 자율학습 시간 배정 가능**

---

### 4. 학습 제외일 설정 (Exclusions)

#### 제외일 유형

1. **휴가**: 학습 시간과 자율학습 시간 모두 제외
2. **개인일정**: 학습 시간과 자율학습 시간 모두 제외
3. **기타**: 학습 시간과 자율학습 시간 모두 제외
4. **지정휴일**: 일반 학습 시간에는 플랜 배정하지 않음, **하지만 자율학습 시간은 배정 가능** (선택사항)

#### 입력 항목

- 날짜: `YYYY-MM-DD`
- 제외일 유형: `"휴가" | "개인일정" | "기타" | "지정휴일"`
- 사유 (선택): 텍스트

---

### 5. 학원 일정 설정 (Academy Schedules)

#### 입력 항목

- **요일**: `0` (일요일) ~ `6` (토요일)
- **학원 시간**: 시작 시간 ~ 종료 시간 (`HH:mm`)
- **이동시간**: 학원 가는 시간 + 학원 오는 시간 (분 단위)
- **학원명/과목** (선택): 텍스트

#### 시간 제외 계산

```
실제 제외 시작 시간 = 학원 시작 시간 - 이동시간
실제 제외 종료 시간 = 학원 종료 시간 + 이동시간
```

#### 예시

- 학원 시간: `14:00 ~ 17:00`
- 이동시간: `60분`
- 실제 제외 시간: `13:00 ~ 18:00`

---

### 6. 학습 시간 제외 항목 설정 (Non-Study Time Blocks)

#### 제외 항목 유형

1. **아침식사**: 아침 식사 시간
2. **점심식사**: 점심 식사 시간
3. **저녁식사**: 저녁 식사 시간
4. **수면**: 수면 시간
5. **기타**: 기타 개인 시간

#### 입력 항목

- 제외 항목 유형
- 시간 범위: 시작 시간 ~ 종료 시간 (`HH:mm`)
- 요일 적용 범위 (선택): 매일 적용 / 특정 요일만 적용 / 특정 요일 제외
- 설명 (선택): 텍스트

#### 제약조건

- 시간 범위가 **학습 시간(Study Hours) 내**에 있어야 함
- 같은 시간대에 여러 제외 항목이 겹치지 않아야 함

---

### 플랜 배정 우선순위 및 제외 규칙

#### 시간 제외 우선순위

1. **제외일 (Exclusions)**
   - 일반 제외일: 학습 시간 + 자율학습 시간 모두 제외
   - 지정휴일: 학습 시간만 제외 (자율학습 시간은 설정에 따라 배정 가능)
2. **학원 일정 (Academy Schedules)**
   - 학원 시간 + 이동시간 제외
   - 학습 시간 내에서만 적용
3. **학습 시간 제외 항목 (Non-Study Time Blocks)**
   - 식사 시간, 수면 시간 등
   - 학습 시간 내에서만 적용
4. **자율학습 시간 (Self-Study Hours)**
   - 기본적으로 플랜 배정하지 않음
   - 배정 가능한 시간 부족 시 사용
   - 지정휴일의 경우 설정에 따라 배정 가능

---

## 학습일/복습일 주기 설정

### 필수 입력 항목

- **학습일 수 (Study Days)**: 숫자 (일), 기본값: `6`
- **복습일 수 (Review Days)**: 숫자 (일), 기본값: `1`

### 주기 구성 규칙

- **1주기 = 학습일 + 복습일**
- 기본 구성: `6일 학습 + 1일 복습 = 7일 (1주기)`
- 주기는 기간 내에서 반복 적용됨

### 복습 범위

- **복습일에는 직전 학습일(6일) 동안 학습한 내용을 복습**
- 복습 대상은 직전 주기의 학습일에 배정된 플랜들

### ⚠️ 중요: 제외일 처리

**학습 제외일은 주기 계산에서 제외됨**

- 실제 날짜 기준이 아닌, **학습일과 복습일만 합쳐서 주기 길이 계산**
- 예: 6일 학습 + 1일 복습 = 7일인데, 그 사이에 제외일이 2일 있으면 실제로는 9일이 걸리지만 주기는 여전히 7일(학습일+복습일)로 계산
- 제외일은 주기 일자 카운트에 포함되지 않음

### 제약조건

- **학습일 수**: 1 이상의 정수
- **복습일 수**: 0 이상의 정수 (0이면 복습일 없음)
- **주기 길이**: 학습일 수 + 복습일 수 = 주기 길이

---

## 추가 기간 학습 범위 재배치

### 개요

특별 조건으로 추가 기간을 지정하여 앞서 진행한 학습 범위를 추가 기간으로 플랜 재배치하는 기능. 복습의 복습 개념으로 소요시간을 추가로 감소시킴

### 입력 데이터

- **추가 기간 정보** ⚠️ 필수
  - 추가 기간 시작일: `YYYY-MM-DD`
  - 추가 기간 종료일: `YYYY-MM-DD`
  - 추가 기간 유형: `"additional_review"` (추가 복습)
- **재배치 대상 학습 범위** ⚠️ 필수
  - 원본 플랜 기간: 시작일 ~ 종료일
  - 재배치할 과목 목록 (선택: 전체 또는 특정 과목만)
  - 재배치할 학습 범위 (선택: 전체 또는 특정 범위만)

### 재배치 규칙

- **학습 범위 재배치**
  - 앞서 진행한 학습 범위를 추가 기간에 재배치
  - 원본 플랜의 학습 범위를 그대로 사용 (새로운 학습 범위 생성 없음)
  - 추가 기간의 학습일 수에 따라 학습 범위를 균등 분할
- **소요시간 계산** ⚠️ 필수 고려사항
  - **복습의 복습 보정 계수**: 0.2~0.3 (복습 대비 20~30% 시간)
  - 복습일의 복습 보정 계수(0.3~0.5)보다 더 낮은 보정 계수 적용
  - 계산 공식:
    ```
    추가 복습 소요시간 = 원본 학습 소요시간 × 복습 보정 계수 × 복습의 복습 보정 계수
    또는
    추가 복습 소요시간 = 원본 복습 소요시간 × 복습의 복습 보정 계수
    ```
- **배정 방식**
  - 취약과목: 전체 추가 기간 학습일에 배정
  - 전략과목: 주당 배정 일수에 따라 배정 (원본과 동일하거나 다를 수 있음)

---

## 인증 및 사용자 관리

### 로그인 기능

#### 기능 요구사항

**필수 기능**
- 이메일/아이디와 비밀번호를 통한 로그인
- 로그인 상태 유지 (세션/토큰 관리)
- 로그아웃 기능
- 비밀번호 찾기/재설정 기능

**선택 기능**
- 소셜 로그인 (구글, 카카오 등)
- 2단계 인증 (2FA)
- 자동 로그인 (Remember Me)

#### 보안 요구사항

- 비밀번호는 해시화하여 저장
- HTTPS 통신 필수
- 로그인 시도 제한 (Brute Force 방지)
- 세션 타임아웃 설정

---

## 관리자 페이지

### 시스템 관리자 대시보드

#### 기능 요구사항

**필수 기능**
- 시스템 전체 통계 조회 (전체 테넌트 수, 사용자 수, 학생 수 등)
- 테넌트별 통계 조회
- 시스템 상태 모니터링 (서버 상태, 데이터베이스 상태 등)
- 최근 활동 로그 조회
- 알림 및 경고 표시

### 테넌트 관리

#### 기능 요구사항

**필수 기능**
- 테넌트 목록 조회 (검색, 필터링, 정렬)
- 테넌트 상세 정보 조회
- 테넌트 생성/수정/삭제
- 테넌트 상태 관리 (활성화/비활성화/일시정지)
- 테넌트별 통계 조회

### 사용자 관리

#### 기능 요구사항

**필수 기능**
- 사용자 목록 조회 (검색, 필터링, 정렬)
- 사용자 상세 정보 조회
- 사용자 생성/수정/삭제
- 사용자 상태 관리 (활성화/비활성화)
- 사용자 권한 관리
- 사용자 활동 로그 조회

---

## 학생 관리

### 학생 정보 관리

#### 기능 요구사항

**필수 기능**
- 학생 등록 (CRUD)
- 학생 목록 조회 (검색, 필터링, 정렬)
- 학생 상세 정보 조회
- 학생 학적 정보 관리 (학교 레벨, 학년, 학교명 등)
- 학생 담당자 연결 (담당자 할당)

#### 학생 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 이름: 학생명
- 생년월일: YYYY-MM-DD
- 성별: "남" | "여" | "기타"
- 연락처: 전화번호 (선택)
- 이메일: 이메일 주소 (선택)
- 주소: 주소 정보 (선택)
- 프로필 이미지 URL: 문자열 (선택)

**학적 정보**
- 학교 레벨 ID: 학교 레벨 식별자 (중학교, 고등학교, 대학교)
- 학교명: 문자열
- 학년: 숫자 (1, 2, 3, 4)
- 반: 숫자 (선택)
- 개정교육과정 ID: 개정교육과정 식별자
- 대학교 학과 ID: 학과 식별자 (대학교인 경우, 선택)

**학습 관련 정보**
- 학생 수준: "상위" | "중위" | "하위" (자동 분석 또는 수동 설정)
- 수준 보정 계수: 숫자 (0.8-1.3)
- 목표 대학/학과: 문자열 (선택)
- 목표 등급/점수: 객체 (과목별 목표, 선택)
- 학습 목표: 텍스트 (선택)

### 학생 성적 관리

#### 기능 요구사항

**필수 기능**
- 내신성적 등록 (CRUD)
- 모의고사 성적 등록 (CRUD)
- 성적 목록 조회 (과목별, 시험별, 기간별)
- 성적 추이 조회 (과목별, 시험별)
- 성적 통계 조회 (평균, 등급 분포 등)

#### 내신성적 데이터 구조

- ID: 고유 식별자
- 학생 ID: 학생 식별자 (필수)
- 과목명: 문자열 (필수)
- 학기: 숫자 (1, 2)
- 학년: 숫자 (1, 2, 3)
- 시험 일자: YYYY-MM-DD (필수)
- 등급: 숫자 (1-9, 선택)
- 점수: 숫자 (0-100, 선택)
- 원점수: 숫자 (선택)
- 평균: 숫자 (선택)
- 표준편차: 숫자 (선택)

#### 모의고사 성적 데이터 구조

- ID: 고유 식별자
- 학생 ID: 학생 식별자 (필수)
- 과목명: 문자열 (필수)
- 시험명: 문자열 (예: "2024년 3월 모의고사", 필수)
- 시험 일자: YYYY-MM-DD (필수)
- 등급: 숫자 (1-9, 선택)
- 점수: 숫자 (0-100, 선택)
- 표준점수: 숫자 (선택)
- 백분위: 숫자 (0-100, 선택)
- 원점수: 숫자 (선택)

---

## 직원 관리

### 직원 정보 관리

#### 기능 요구사항

**필수 기능**
- 직원 등록 (CRUD)
- 직원 목록 조회 (검색, 필터링, 정렬)
- 직원 상세 정보 조회
- 직원 역할/직책 관리
- 직원 권한 관리
- 직원 상태 관리 (재직, 휴직, 퇴직)

#### 직원 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 이름: 직원명
- 생년월일: YYYY-MM-DD
- 성별: "남" | "여" | "기타"
- 연락처: 전화번호 (필수)
- 이메일: 이메일 주소 (필수)
- 주소: 주소 정보 (선택)
- 프로필 이미지 URL: 문자열 (선택)

**직원 정보**
- 사원번호: 문자열 (고유)
- 입사일: YYYY-MM-DD
- 퇴사일: YYYY-MM-DD (퇴직 시)
- 역할: "담당자" | "강사" | "관리자" | "기타"
- 직책: 문자열 (예: "수학 담당", "영어 강사")
- 부서: 문자열 (선택)
- 상태: "재직" | "휴직" | "퇴직"

---

## 입실/퇴실 기록

### 입실/퇴실 기록 관리

#### 기능 요구사항

**필수 기능**
- 입실 기록 등록 (수동/자동)
- 퇴실 기록 등록 (수동/자동)
- 입실/퇴실 기록 조회 (일별, 주별, 월별)
- 입실/퇴실 기록 수정/삭제
- 출석 통계 조회 (출석률, 지각률, 결석률)

**선택 기능**
- QR 코드 기반 입실/퇴실
- NFC 기반 입실/퇴실
- 자동 입실/퇴실 (위치 기반)
- 입실/퇴실 알림 (학부모에게)
- 출석 리포트 생성

#### 입실/퇴실 기록 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 학생 ID: 학생 식별자 (필수)
- 날짜: YYYY-MM-DD (필수)
- 입실 시간: ISO 8601 타임스탬프 (필수)
- 퇴실 시간: ISO 8601 타임스탬프 (선택)
- 기록 방식: "수동" | "QR코드" | "NFC" | "자동"
- 상태: "정상" | "지각" | "조퇴" | "결석"

---

## 프로필 및 마이페이지

### 프로필 관리

#### 기능 요구사항

**필수 기능**
- 프로필 정보 조회
- 프로필 정보 수정
- 프로필 이미지 업로드/수정/삭제
- 비밀번호 변경
- 계정 설정 관리

### 마이페이지

#### 기능 요구사항

**필수 기능**
- 사용자 정보 요약 표시
- 최근 활동 조회
- 통계 정보 조회 (학습 시간, 진행률 등)
- 설정 바로가기

---

## 게시판

### 게시판 관리

#### 기능 요구사항

**필수 기능**
- 게시판 생성 (CRUD)
- 게시글 작성/수정/삭제
- 게시글 목록 조회 (검색, 필터링, 정렬)
- 게시글 상세 조회
- 댓글 작성/수정/삭제
- 파일 첨부

---

## 문의 페이지

### 문의 관리

#### 기능 요구사항

**필수 기능**
- 문의 등록 (CRUD)
- 문의 목록 조회 (검색, 필터링, 정렬)
- 문의 상세 조회
- 문의 답변 작성/수정/삭제
- 문의 상태 관리 (대기중, 답변완료, 처리완료)
- 파일 첨부

---

## 문자 전송

### 문자 전송 관리

#### 기능 요구사항

**필수 기능**
- 문자 전송 (단일/일괄)
- 수신자 선택 (학생, 학부모, 직원)
- 문자 템플릿 관리
- 전송 이력 조회
- 전송 결과 확인

---

## 수강료 관리

### 수강료 관리

#### 기능 요구사항

**필수 기능**
- 수강료 등록 (CRUD)
- 수강료 목록 조회 (검색, 필터링, 정렬)
- 결제 내역 관리
- 미납/연체 관리
- 수강료 통계 조회

---

## 학부모 페이지 및 학생 연동

### 학부모 계정 관리

#### 기능 요구사항

**필수 기능**
- 학부모 계정 등록 (CRUD)
- 학부모 로그인/로그아웃
- 학생 계정 연동 (자녀 계정 연결)
- 연동 승인/거부 (학생 측 승인)
- 연동 해제
- 자녀 학습 현황 조회
- 자녀 학습 리포트 조회

### 학생 연동 기능

#### 기능 요구사항

**필수 기능**
- 학생 연동 요청 (학부모 → 학생)
- 연동 승인/거부 (학생 측)
- 연동 해제 (학부모 또는 학생)
- 연동 상태 조회
- 권한 설정 (학부모가 볼 수 있는 정보 범위)

---

## 교육과정 및 교과 관리

### 개정교육과정 관리

#### 기능 요구사항

**필수 기능**
- 개정교육과정 등록 (CRUD)
- 개정교육과정 목록 조회
- 개정교육과정별 적용 기간 관리
- 개정교육과정별 교과 연결

### 교과 관리

#### 기능 요구사항

**필수 기능**
- 교과 등록 (CRUD)
- 교과 목록 조회 (검색, 필터링)
- 교과별 과목 연결
- 개정교육과정별 교과 연결

### 과목 관리

#### 기능 요구사항

**필수 기능**
- 과목 등록 (CRUD)
- 과목 목록 조회 (검색, 필터링)
- 교과별 과목 연결
- 개정교육과정별 과목 연결

---

## 교재 및 강의 자료 관리

### 교재 자료 관리

#### 기능 요구사항

**필수 기능**
- 교재 등록 (CRUD)
- 교재 목록 조회 (검색, 필터링, 정렬)
- 교재 상세 정보 조회
- 교재별 학습 범위 관리 (페이지, 단원/챕터)

#### 교재 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 이름: 교재명
- 출판사: 출판사명
- 유형: 참고서, 문제집, 개념서 등
- 난이도: 초급, 중급, 고급 등
- 개정교육과정 ID: 개정교육과정 식별자
- 교과 ID: 교과 식별자
- 과목 ID: 과목 식별자 (선택, 교과만 지정 가능)

**학습 범위 정보**
- 전체 페이지 수
- 전체 단원/챕터 수
- 단원/챕터별 페이지 범위
- 단원/챕터명

**학습 목표 및 추천 정보**
- 학습 목표: 텍스트
- 추천 이유: 텍스트
- 표준 소요시간: 페이지당 소요 시간 (분)

### 강의 자료 관리

#### 기능 요구사항

**필수 기능**
- 강의 등록 (CRUD)
- 강의 목록 조회 (검색, 필터링, 정렬)
- 강의 상세 정보 조회
- 강의별 학습 범위 관리 (강의 번호, 강의 제목)

#### 강의 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 이름: 강의명
- 강사: 강사명
- 유형: 동영상, 라이브, 오프라인 등
- 난이도: 초급, 중급, 고급 등
- 개정교육과정 ID: 개정교육과정 식별자
- 교과 ID: 교과 식별자
- 과목 ID: 과목 식별자 (선택, 교과만 지정 가능)

**학습 범위 정보**
- 전체 강의 수
- 강의별 정보:
  - 강의 번호
  - 강의 제목
  - 강의 소요 시간 (분)

**소요 시간 정보**
- 강의당 평균 소요 시간 (분)
- 총 강의 소요 시간 (분)
- 학습 소요 시간 (강의 시청 + 복습 시간)

---

## 학생 성적 기반 학생 분석 AI

### 개요

학생의 내신성적과 모의고사 성적을 AI로 분석하여 학생의 학습 수준, 강점/약점, 학습 패턴을 파악하는 기능

### 기능 요구사항

**필수 기능**
- 내신성적 분석 (과목별, 학기별, 학년별)
- 모의고사 성적 분석 (과목별, 시험별, 추이 분석)
- 성적 추이 분석 (향상/하락 패턴)
- 과목별 강점/약점 파악
- 내신 vs 모의고사 성적 비교 분석
- 목표 대비 현재 수준 분석
- 학생 수준 등급 산출 (상위/중위/하위)
- 전략과목/취약과목 추천

### 분석 결과 데이터 구조

**학생 수준 분석**
- 전체 수준: "상위" | "중위" | "하위"
- 수준 보정 계수: 숫자 (0.8-1.3)
- 과목별 수준: 객체 (과목별 수준 정보)

**성적 추이 분석**
- 과목별 추이: 객체 배열
  - 과목명: 문자열
  - 추이 방향: "향상" | "유지" | "하락"
  - 추이 정도: 숫자 (변화율)
  - 추이 그래프 데이터: 배열

**전략과목/취약과목 추천**
- 전략과목: 과목명 배열 (추천 이유 포함)
- 취약과목: 과목명 배열 (추천 이유 포함)
- 추천 신뢰도: 숫자 (0-100)

---

## 교재 분석 AI

### 개요

교재의 내용, 난이도, 학습 목표 등을 AI로 분석하여 학생에게 적합한 교재를 추천하는 기능

### 기능 요구사항

**필수 기능**
- 교재 내용 분석 (주제, 단원, 학습 범위)
- 교재 난이도 분석 (전체 난이도, 단원별 난이도)
- 교재 학습 목표 분석
- 학생 수준 대비 교재 적합도 분석
- 교재 추천 (학생 성적 기반)
- 추천 이유 생성

### 분석 결과 데이터 구조

**교재 난이도 분석**
- 전체 난이도: "초급" | "중급" | "고급"
- 난이도 점수: 숫자 (0-100)
- 단원별 난이도: 객체 배열 (단원별 난이도 정보)

**교재 적합도 분석**
- 학생 수준 대비 적합도: "매우 적합" | "적합" | "보통" | "부적합"
- 적합도 점수: 숫자 (0-100)
- 적합도 이유: 텍스트
- 예상 학습 효과: 숫자 (0-100)

---

## 강의 분석 AI

### 개요

강의의 내용, 난이도, 학습 효과 등을 AI로 분석하여 학생에게 적합한 강의를 추천하는 기능

### 기능 요구사항

**필수 기능**
- 강의 내용 분석 (주제, 커리큘럼, 학습 범위)
- 강의 난이도 분석 (전체 난이도, 강의별 난이도)
- 강의 학습 목표 분석
- 학생 수준 대비 강의 적합도 분석
- 강의 추천 (학생 성적 기반)
- 추천 이유 생성

---

## 플랜 생성 AI

### 개요

학생의 성적 분석 결과, 교재/강의 추천 결과, 학습 시간 설정 등을 종합하여 최적의 학습 플랜을 자동 생성하는 AI 기능

### 기능 요구사항

**필수 기능**
- 학습 플랜 자동 생성 (기간, 시간대, 제외 시간 고려)
- 학습 범위 자동 분할 (취약과목/전략과목별)
- 소요시간 자동 계산 (학생 수준, 과목 유형, 난이도 고려)
- 타임라인 자동 구성 (시간대 배정, 제외 시간 처리)
- 플랜 최적화 (학습 효율 최대화, 피로도 최소화)
- 제약 조건 처리 (필수 교과, 제외 교과 등)

### 플랜 생성 프로세스

**1단계: 학습 범위 분할**
- 취약과목: 전체 학습일에 균등 분할
- 전략과목: 주당 배정 일수에 따라 분할
- 단원/챕터 경계 우선 고려

**2단계: 소요시간 계산**
- 기본 소요시간 × 학생 수준 보정 계수
- 과목별 보정 (취약과목 ×1.2, 전략과목 ×1.0-1.1)
- 복습일 소요시간 계산 (직전 6일 범위 × 복습 보정 계수)

**3단계: 타임라인 구성**
- 취약과목 플랜 우선 배정
- 전략과목 플랜 배정
- 복습일 플랜 배정
- 제외 시간 처리 (플랜 분할)
- 자율 학습 시간 사용 (필요 시)

**4단계: 최적화**
- 학습 효율 최대화
- 피로도 최소화
- 과목별 균형 배정
- 제약 조건 검증

---

## 통합 AI 시스템

### 개요

1730Timetable 솔루션의 모든 AI 기능을 통합하여 학생에게 맞춤형 학습 솔루션을 제공하는 통합 AI 시스템

### 통합 AI 파이프라인

**1단계: 학생 분석**
- 내신/모의고사 성적 입력
- 학생 분석 AI 실행
- 학생 수준, 강점/약점, 전략과목/취약과목 도출

**2단계: 교재/강의 분석**
- 학생 분석 결과 기반 교재/강의 추천
- 교재 분석 AI 실행 (추천 교재 분석)
- 강의 분석 AI 실행 (추천 강의 분석)
- 적합도 점수 계산

**3단계: 플랜 생성**
- 학생 분석 + 교재/강의 분석 결과 통합
- 플랜 생성 AI 실행
- 최적화된 학습 플랜 생성

**4단계: 모니터링 및 피드백**
- 학습 진행 상황 추적
- 학습 효과 분석
- 플랜 조정 제안 (필요 시)

---

## 학습 관리 AI

### 개요

학생의 학습 진행 상황을 실시간으로 모니터링하고, 학습 패턴을 분석하며, 학습 효과를 평가하고 개선 제안을 제공하는 AI 기능

### 기능 요구사항

**필수 기능**
- 학습 진행 상황 실시간 모니터링
- 학습 패턴 분석 (시간대별, 요일별, 과목별 학습 효율)
- 학습 효과 평가 (목표 대비 달성도, 성적 향상도)
- 학습 문제점 진단 (미완료 플랜, 지연된 학습 등)
- 학습 개선 제안 (플랜 조정, 학습 방법 개선 등)
- 학습 동기 부여 (칭찬, 격려 메시지)

---

## 통합 플랜 생성 및 관리

### 통합 플랜 템플릿 관리

#### 개요

다수의 학생에게 동일한 기본 설정으로 플랜을 생성하기 위한 템플릿을 생성, 관리하는 기능. 캠프 프로그램(윈터캠프, 썸머캠프, 파이널캠프 등)에 활용

#### 기능 요구사항

**필수 기능**
- 통합 플랜 템플릿 생성 (CRUD)
- 템플릿 기본 설정 관리 (기간, 학습 시간, 제외일 등)
- 템플릿별 학생 그룹 관리
- 템플릿 기반 플랜 일괄 생성
- 템플릿 목록 조회 (검색, 필터링)

#### 통합 플랜 템플릿 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 템플릿명: 문자열 (예: "2025 윈터캠프", "2025 썸머캠프")
- 설명: 텍스트
- 프로그램 유형: "윈터캠프" | "썸머캠프" | "파이널캠프" | "기타"
- 생성자 ID: 담당자 식별자
- 생성일: ISO 8601 타임스탬프
- 수정일: ISO 8601 타임스탬프

**플랜 기본 설정**
- 기간 정보: 객체 (시작일, 종료일)
- 학습 시간 설정: 객체 (시작 시간, 종료 시간)
- 자율 학습 시간 설정: 객체 (선택)
- 학습 제외일: 배열 (날짜, 유형)
- 학원 일정: 배열 (요일, 시간, 이동시간)
- 학습 시간 제외 항목: 배열 (시간 범위, 유형)
- 학습일/복습일 주기: 객체 (학습일 수, 복습일 수)

**교재/강의 설정**
- 추천 교재 목록: 교재 ID 배열 (과목별)
- 추천 강의 목록: 강의 ID 배열 (과목별)
- 전략과목 설정: 객체 (과목 목록, 주당 배정 일수)
- 취약과목 설정: 객체 (과목 목록)

### 통합 플랜 일괄 생성

#### 개요

통합 플랜 템플릿을 기반으로 다수의 학생에게 플랜을 일괄 생성하는 기능. 담당자가 최종 확인 후 생성

#### 일괄 생성 프로세스

**1단계: 템플릿 및 학생 선택**
- 통합 플랜 템플릿 선택
- 학생 선택 (개별 선택 또는 그룹 선택)
- 학생별 개인화 옵션 확인

**2단계: 개인화 옵션 설정**
- 학생별 수준 설정 (상위/중위/하위 또는 자동 분석)
- 학생별 성적 데이터 확인/입력
- 학생별 목표 정보 확인/입력
- 개인화 수준 선택 (전체/부분/없음)

**3단계: 플랜 생성 미리보기**
- 템플릿 기반 플랜 예시 생성 (대표 학생 1명)
- 플랜 구조 및 시간 배정 확인
- 담당자 검토 및 수정

**4단계: 담당자 승인**
- 생성 대상 학생 목록 확인
- 생성 옵션 확인
- 최종 승인 또는 취소

**5단계: 일괄 플랜 생성**
- 학생별 플랜 생성 (비동기 처리)
- 생성 진행 상황 표시
- 생성 완료/실패 학생 구분

**6단계: 생성 결과 확인**
- 생성 결과 리포트
- 생성된 플랜 목록
- 생성 실패 학생 목록 (재시도 옵션)

---

## 플랜 학습 실행 및 기록

### 플랜 학습 기록 관리

#### 기능 요구사항

**필수 기능**
- 플랜 시작/일시정지/재개/완료
- 학습 시간 기록 (실제 학습 시간 추적)
- 학습 진행률 계산 및 업데이트
- 학습 기록 조회 (일별, 주별, 월별)
- 학습 통계 조회 (총 학습 시간, 완료율 등)

#### 학습 기록 데이터 구조

**기본 정보**
- ID: 고유 식별자
- 플랜 ID: 학습 플랜 식별자 (필수)
- 학생 ID: 학생 식별자 (필수)
- 날짜: 학습 날짜 (YYYY-MM-DD)
- 상태: "scheduled" | "in_progress" | "paused" | "completed" | "skipped"

**시간 정보**
- 계획된 시작 시간: HH:mm
- 계획된 종료 시간: HH:mm
- 계획된 소요 시간: 숫자 (분)
- 실제 시작 시간: ISO 8601 타임스탬프
- 실제 종료 시간: ISO 8601 타임스탬프
- 실제 소요 시간: 숫자 (분)
- 일시정지 시간: ISO 8601 타임스탬프 (배열)
- 재개 시간: ISO 8601 타임스탬프 (배열)

**진행 정보**
- 진행률: 숫자 (0-100, 퍼센트)
- 완료 여부: boolean
- 완료 시간: ISO 8601 타임스탬프

### 타이머 기능

#### 기능 요구사항

**필수 기능**
- 타이머 시작/일시정지/재개/종료
- 실시간 타이머 표시 (시:분:초)
- 계획된 시간과 실제 시간 비교
- 타이머 종료 시 자동 기록 저장
- 백그라운드 실행 지원 (앱 최소화 시에도 동작)

---

## 플랜 재생성(조율) 기능

### 개요

기존에 생성된 학습 플랜을 학습 진행 상황, 변경된 조건, 학습 관리 AI 분석 결과 등을 반영하여 재생성하거나 조율하는 기능

### 기능 요구사항

**필수 기능**
- 플랜 전체 재생성 (기존 플랜 삭제 후 새로 생성)
- 플랜 부분 조율 (특정 기간 또는 과목만 재생성)
- 학습 진행 상황 반영 (완료된 플랜 제외, 미완료 플랜 재배정)
- 변경된 조건 반영 (학습 시간 변경, 제외일 추가/삭제 등)
- 학습 관리 AI 분석 결과 반영 (개선 제안 반영)
- 재생성 전 비교 미리보기 (기존 플랜 vs 재생성 플랜)

### 재생성 프로세스

**1단계: 현재 상태 분석**
- 기존 플랜 상태 확인
- 학습 진행 상황 확인 (완료/미완료/진행중)
- 변경된 조건 확인 (학습 시간, 제외일 등)
- 학습 관리 AI 분석 결과 확인

**2단계: 재생성 범위 결정**
- 재생성할 기간 결정
- 재생성할 과목 결정
- 보존할 플랜 결정 (완료된 플랜, 진행중인 플랜 등)

**3단계: 플랜 재생성**
- 플랜 생성 AI 실행
- 학습 진행 상황 반영
- 변경된 조건 반영
- 최적화 수행

**4단계: 비교 및 확인**
- 기존 플랜 vs 재생성 플랜 비교
- 변경 사항 요약 표시
- 사용자 확인 및 승인

**5단계: 적용**
- 재생성 플랜 적용
- 기존 플랜 백업 (히스토리 저장)
- 학습 기록 업데이트

---

## 타임라인 캘린더 뷰

### 타임라인 캘린더 뷰

#### 개요

학습 플랜을 시간대별로 시각화하여 월별, 주별, 일별로 조회할 수 있는 캘린더 뷰 기능

#### 기능 요구사항

**필수 기능**
- 월별 뷰: 한 달 단위로 플랜 조회
- 주별 뷰: 한 주 단위로 플랜 조회
- 일별 뷰: 하루 단위로 상세 플랜 조회
- 뷰 전환: 월/주/일 뷰 간 전환
- 날짜 네비게이션: 이전/다음 기간 이동
- 플랜 상세 정보 표시: 클릭/탭 시 상세 정보 모달/드로어
- 시간대별 플랜 배치: 실제 시간대에 맞춰 플랜 표시

#### 뷰별 상세 기능

**월별 뷰 (Month View)**
- 월 단위 캘린더 그리드 표시
- 날짜별 플랜 개수 표시
- 날짜별 총 학습 시간 표시
- 날짜별 완료율 표시 (프로그레스 인디케이터)
- 날짜 클릭 시 일별 뷰로 이동
- 주말/공휴일 구분 표시

**주별 뷰 (Week View)**
- 주 단위 타임라인 표시
- 요일별 컬럼 구성
- 시간대별 행 구성 (예: 30분 단위)
- 플랜을 시간대에 맞춰 블록으로 표시
- 플랜 블록에 과목명, 시간 표시
- 스크롤 가능한 타임라인
- 오늘 날짜 하이라이트

**일별 뷰 (Day View)**
- 하루 단위 상세 타임라인 표시
- 시간대별 세부 구성 (예: 15분 단위)
- 플랜 상세 정보 표시 (과목, 교재, 강의, 시간 등)
- 플랜 상태 표시 (예정, 진행중, 완료, 미완료)
- 플랜 시작/일시정지/완료 버튼
- 학습 시간 통계 표시 (일일 총 학습 시간, 완료율)

---

## 데이터 구조

### 플랜 생성 요청 데이터 구조

```typescript
type PlanCreationRequest = {
  // 1. 기간 정보
  period: {
    period_start: string; // YYYY-MM-DD
    period_end: string; // YYYY-MM-DD
  };

  // 2. 학습 시간 설정
  study_hours: {
    start_time: string; // HH:mm
    end_time: string; // HH:mm
  };

  // 3. 자율학습 시간 설정 (선택)
  self_study_hours?: {
    enabled: boolean;
    start_time: string; // HH:mm
    end_time: string; // HH:mm
    allow_on_holiday?: boolean; // 지정휴일에 자율학습 시간 배정 여부
  };

  // 4. 학습 제외일 설정 (선택)
  exclusions?: Exclusion[];

  // 5. 학원 일정 설정 (선택)
  academy_schedules?: AcademySchedule[];

  // 6. 학습 시간 제외 항목 설정 (선택)
  non_study_time_blocks?: NonStudyTimeBlock[];

  // 7. 학습일/복습일 주기 설정
  study_review_cycle: {
    study_days: number; // 학습일 수 (기본값: 6)
    review_days: number; // 복습일 수 (기본값: 1)
  };

  // 8. 교과 제약 조건 (선택)
  subject_constraints?: {
    required_subjects?: string[]; // 필수 교과 목록
    excluded_subjects?: string[]; // 제외 교과 목록
    constraint_handling: "strict" | "warning" | "auto_fix";
  };

  // 9. 추가 기간 재배치 설정 (선택)
  additional_period_reallocation?: {
    period_start: string; // YYYY-MM-DD
    period_end: string; // YYYY-MM-DD
    type: "additional_review"; // 추가 복습
    original_period_start: string; // 원본 플랜 기간 시작일
    original_period_end: string; // 원본 플랜 기간 종료일
    subjects?: string[]; // 재배치할 과목 목록 (없으면 전체)
    review_of_review_factor?: number; // 복습의 복습 보정 계수 (기본값: 0.25)
  };
};
```

### 플랜 데이터 구조

```typescript
type Plan = {
  // 기본 정보
  id: string;
  student_id: string;
  date: string; // YYYY-MM-DD
  date_type: "study" | "review" | "exclusion";
  cycle_day_number: number;

  // 시간 정보
  start_time: string; // HH:mm
  end_time: string; // HH:mm
  duration_minutes: number;
  time_slot_type: "study" | "self_study";

  // 과목 정보
  subject: {
    id: string;
    name: string;
    type: "strategy" | "weakness";
  };

  // 교재 정보
  textbook?: {
    id: string;
    name: string;
    publisher?: string;
    type?: string;
    difficulty_level?: string;
    range: {
      start_page?: number;
      end_page?: number;
      chapters?: number[];
      chapter_names?: string[];
    };
    total_pages?: number;
    total_chapters?: number;
    learning_goal: string;
    recommendation_reason?: string;
  };

  // 강의 정보
  lecture?: {
    id: string;
    name: string;
    instructor?: string;
    type?: string;
    difficulty_level?: string;
    range: {
      start_lecture_number: number;
      end_lecture_number: number;
      lectures?: Array<{
        lecture_number: number;
        title: string;
        duration_minutes: number;
      }>;
    };
    total_lectures: number;
    average_duration_per_lecture?: number;
    total_lecture_duration?: number;
    total_learning_duration?: number;
    learning_goal: string;
    recommendation_reason?: string;
  };

  // 교재/강의 조합 정보
  content_combination?: {
    type: "textbook_only" | "lecture_only" | "textbook_and_lecture";
    learning_order?: "textbook_first" | "lecture_first" | "parallel";
    matching_info?: {
      textbook_range: string;
      matched_lectures: number[];
    };
  };

  // 소요시간 정보
  duration_info: {
    base_duration: number;
    student_level_factor: number;
    subject_factor: number;
    difficulty_factor: number;
    review_factor?: number; // 복습일인 경우
    final_duration: number;
  };

  // 복습일 정보 (복습일인 경우)
  review_info?: {
    previous_study_days_range: string;
    previous_study_duration: number;
    review_factor: number;
    review_duration: number;
  };

  // 타임라인 정보
  timeline: {
    time_slot_type: "study" | "self_study";
    order: number; // 일일 타임라인 내 순서
    // 분할된 플랜 정보 (제외 시간으로 인해 분할된 경우)
    split_info?: {
      original_plan_id: string; // 원본 플랜 ID (분할된 플랜들을 연결)
      split_order: number; // 원본 플랜 내에서의 분할 순서
      total_split_count: number; // 전체 분할 개수
      total_duration: number; // 전체 소요시간 (모든 분할된 시간대의 합)
    };
  };

  // 배정 방식 정보
  allocation_type: {
    type: "all_study_days" | "weekly_days";
    weekly_days?: number; // 전략과목인 경우 주당 배정 일수
  };

  // 추가 기간 재배치 정보 (추가 기간 재배치인 경우)
  reallocation_info?: {
    is_reallocated: boolean; // 재배치된 플랜 여부
    original_plan_id?: string; // 원본 플랜 ID
    original_period_start?: string; // 원본 플랜 기간 시작일
    original_period_end?: string; // 원본 플랜 기간 종료일
    review_of_review_factor?: number; // 복습의 복습 보정 계수
  };

  // 상태 정보
  status: "scheduled" | "in_progress" | "completed" | "paused";
  progress_percentage: number;
  started_at?: string;
  completed_at?: string;
  paused_at?: string;
  resumed_at?: string;

  // 메타 정보
  created_at: string;
  updated_at: string;
};
```

---

## 플랜 작성 예시

### 4주 플랜 작성 예시

#### 시나리오 설정

**기본 정보**
- **플랜 기간**: 2025-01-01 (수) ~ 2025-01-28 (화), 4주 (28일)
- **학습일/복습일 주기**: 6일 학습 + 1일 복습 = 7일 주기
- **학습 시간**: 10:00 ~ 19:00 (9시간)
- **자율 학습 시간**: 19:00 ~ 22:00 (3시간, 활성화)
- **점심식사**: 12:00 ~ 13:00 (제외)
- **학원 일정**: 수요일 14:00 ~ 17:00, 이동시간 60분 (13:00 ~ 18:00 제외)
- **제외일**: 2025-01-15 (수) - 휴가

**학생 정보**
- **학생 수준**: 중위 (보정 계수 1.0)
- **전략과목**: 영어 (주 3일 배정), 국어 (주 3일 배정)
- **취약과목**: 수학 (전체 학습일 배정)

**교재/강의 정보**

**수학 (취약과목)**
- 교재: "수학의 정석 기하와 벡터" (200페이지)
- 표준 소요시간: 페이지당 5분
- 취약과목 보정: ×1.2

**영어 (전략과목)**
- 교재: "영어 문법 완성" (150페이지)
- 강의: "영어 문법 기초 강의" (30강, 강의당 30분)
- 표준 소요시간: 교재 페이지당 4분, 강의 시청 + 복습
- 전략과목 보정: ×1.0

**국어 (전략과목)**
- 교재: "국어 독해 실전" (180페이지)
- 표준 소요시간: 페이지당 4분
- 전략과목 보정: ×1.0

#### 주기별 학습일/복습일 계산

**1주기 (2025-01-01 ~ 2025-01-07)**
- 2025-01-01 (수) - 학습일, 주기 1일차
- 2025-01-02 (목) - 학습일, 주기 2일차
- 2025-01-03 (금) - 학습일, 주기 3일차
- 2025-01-04 (토) - 학습일, 주기 4일차
- 2025-01-05 (일) - 학습일, 주기 5일차
- 2025-01-06 (월) - 학습일, 주기 6일차
- 2025-01-07 (화) - 복습일, 주기 7일차

**총 학습일**: 24일 (제외일 1일 제외, 복습일 3일 제외)  
**총 복습일**: 3일

#### 학습 범위 분할

**수학 (취약과목) - 전체 학습일 배정**
- 전체 범위: 200페이지
- 학습일 수: 24일
- 일일 범위: 200페이지 ÷ 24일 = 약 8.3페이지/일
- 실제 배정: 대부분 일일 8페이지, 일부 일일 9페이지 (총합 200페이지 맞춤)

**영어 (전략과목) - 주 3일 배정**
- 전체 범위: 교재 150페이지 + 강의 30강
- 주당 배정 일수: 3일
- 4주 총 배정 일수: 약 12일 (주당 3일 × 4주)
- 교재 일일 범위: 150페이지 ÷ 12일 = 약 12.5페이지/일
- 강의 일일 범위: 30강 ÷ 12일 = 약 2.5강/일

**국어 (전략과목) - 주 3일 배정**
- 전체 범위: 180페이지
- 주당 배정 일수: 3일
- 4주 총 배정 일수: 약 12일
- 일일 범위: 180페이지 ÷ 12일 = 15페이지/일

#### 소요시간 계산

**수학 (취약과목) - 학습일**
- 일일 범위: 8페이지
- 일일 소요시간: 8페이지 × 5분 × 1.0 (학생 수준) × 1.2 (취약과목) = **48분/일**
- 24일 총 소요시간: 48분 × 24일 = 1,152분 (19.2시간)

**수학 (취약과목) - 복습일**
- 직전 학습일(6일) 범위: 8페이지 × 6일 = 48페이지
- 직전 학습일(6일) 소요시간: 48페이지 × 5분 × 1.0 × 1.2 = 288분
- 복습 보정 계수: 0.4 (40%)
- 복습일 소요시간: 288분 × 0.4 = **115분/복습일**
- 3일 총 복습 소요시간: 115분 × 3일 = 345분 (5.75시간)

**영어 (전략과목) - 학습일**
- 교재 일일 범위: 12페이지
- 교재 일일 소요시간: 12페이지 × 4분 × 1.0 × 1.0 = **48분/일**
- 강의 일일 범위: 2.5강
- 강의 일일 소요시간: 2.5강 × 30분 (강의) + 15분 (복습) = **90분/일**
- 일일 총 소요시간: 48분 + 90분 = **138분/일**
- 12일 총 소요시간: 138분 × 12일 = 1,656분 (27.6시간)

**국어 (전략과목) - 학습일**
- 일일 범위: 15페이지
- 일일 소요시간: 15페이지 × 4분 × 1.0 × 1.0 = **60분/일**
- 12일 총 소요시간: 60분 × 12일 = 720분 (12시간)

#### 타임라인 구성 예시 (2025-01-01, 수요일)

**입력 정보**
- 날짜: 2025-01-01 (수요일, 학습일, 주기 1일차)
- 학습 시간: 10:00 ~ 19:00
- 자율 학습 시간: 19:00 ~ 22:00
- 점심식사: 12:00 ~ 13:00 (제외)
- 학원 일정: 13:00 ~ 18:00 (14:00~17:00 학원 + 이동시간 60분, 제외)

**플랜 소요시간**
- 수학: 48분
- 영어: 138분 (교재 48분 + 강의 90분)
- 국어: 60분
- 총 소요시간: 246분 (4.1시간)

**배정 가능한 시간 계산**
- 학습 시간대: 10:00 ~ 19:00 (9시간 = 540분)
- 제외 시간:
  - 점심식사: 12:00 ~ 13:00 (60분)
  - 학원 일정: 13:00 ~ 18:00 (300분)
- 실제 배정 가능한 시간: 540분 - 60분 - 300분 = **180분**

**타임라인 구성 결과**

**학습 시간대 배정**
- 10:00 ~ 10:48: 수학 (48분) - 취약과목 우선
- 10:48 ~ 11:36: 영어 교재 (48분) - 전략과목
- 11:36 ~ 12:00: 국어 (24분) - 전략과목 (일부)
- 12:00 ~ 13:00: 점심식사 (제외)
- 13:00 ~ 18:00: 학원 일정 (제외)
- 18:00 ~ 18:36: 국어 (36분) - 전략과목 (남은 부분)

**자율 학습 시간대 배정** (배정 가능한 시간 부족으로 사용)
- 19:00 ~ 20:30: 영어 강의 (90분) - 전략과목

---

## 변경 이력

- 2025-01-XX: 통합 문서 생성
- 2025-01-XX: MVP 요구사항 통합
- 2025-01-XX: 플랜 생성 로직 상세 추가
- 2025-01-XX: 추가 기간 학습 범위 재배치 시스템 요구사항 추가 (복습의 복습)

