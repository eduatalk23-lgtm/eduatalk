-- ============================================
-- 서비스 마스터 교재 및 강의 예시 데이터 삽입
-- ============================================
-- 
-- 이 마이그레이션은 master_books와 master_lectures 테이블에
-- 예시 데이터를 삽입합니다.
-- 
-- 실행 방법:
-- npx supabase db push
-- 또는 Supabase 대시보드에서 직접 실행
-- ============================================

-- ============================================
-- 1. master_books 예시 데이터 삽입
-- ============================================

-- 기존 데이터가 있는지 확인하고, 없을 때만 삽입
DO $$
BEGIN
  -- 교재 데이터가 없을 때만 삽입
  IF NOT EXISTS (SELECT 1 FROM master_books LIMIT 1) THEN
    
    -- 국어 교재
    INSERT INTO master_books (
      tenant_id, revision, content_category, semester,
      subject_category, subject, title, publisher, total_pages,
      difficulty_level, notes
    ) VALUES
    -- 국어
    (NULL, '2022개정', '교과서', '고1-1', '국어', '국어', '고등학교 국어 (비상교육)', '비상교육', 320, '중', '2022 개정 교육과정 고등학교 1학년 1학기 국어 교과서'),
    (NULL, '2022개정', '교과서', '고1-1', '국어', '화법과 작문', '고등학교 화법과 작문 (천재교육)', '천재교육', 280, '중', '2022 개정 교육과정 고등학교 1학년 1학기 화법과 작문 교과서'),
    (NULL, '2022개정', '교과서', '고1-2', '국어', '문학', '고등학교 문학 (미래엔)', '미래엔', 350, '중상', '2022 개정 교육과정 고등학교 1학년 2학기 문학 교과서'),
    
    -- 수학
    (NULL, '2022개정', '교과서', '고1-1', '수학', '수학', '고등학교 수학 (비상교육)', '비상교육', 380, '중상', '2022 개정 교육과정 고등학교 1학년 1학기 수학 교과서'),
    (NULL, '2022개정', '교과서', '고1-1', '수학', '수학 I', '고등학교 수학 I (천재교육)', '천재교육', 400, '상', '2022 개정 교육과정 고등학교 1학년 1학기 수학 I 교과서'),
    (NULL, '2022개정', '교과서', '고2-1', '수학', '수학 II', '고등학교 수학 II (비상교육)', '비상교육', 420, '상', '2022 개정 교육과정 고등학교 2학년 1학기 수학 II 교과서'),
    (NULL, '2022개정', '교과서', '고3-1', '수학', '미적분', '고등학교 미적분 (미래엔)', '미래엔', 450, '최상', '2022 개정 교육과정 고등학교 3학년 1학기 미적분 교과서'),
    
    -- 영어
    (NULL, '2022개정', '교과서', '고1-1', '영어', '영어', '고등학교 영어 (비상교육)', '비상교육', 300, '중', '2022 개정 교육과정 고등학교 1학년 1학기 영어 교과서'),
    (NULL, '2022개정', '교과서', '고2-1', '영어', '영어 독해와 작문', '고등학교 영어 독해와 작문 (천재교육)', '천재교육', 320, '중상', '2022 개정 교육과정 고등학교 2학년 1학기 영어 독해와 작문 교과서'),
    
    -- 사회
    (NULL, '2022개정', '교과서', '고1-1', '사회', '한국사', '고등학교 한국사 (비상교육)', '비상교육', 360, '중', '2022 개정 교육과정 고등학교 1학년 1학기 한국사 교과서'),
    (NULL, '2022개정', '교과서', '고1-2', '사회', '통합사회', '고등학교 통합사회 (미래엔)', '미래엔', 380, '중', '2022 개정 교육과정 고등학교 1학년 2학기 통합사회 교과서'),
    
    -- 과학
    (NULL, '2022개정', '교과서', '고1-1', '과학', '통합과학', '고등학교 통합과학 (비상교육)', '비상교육', 400, '중상', '2022 개정 교육과정 고등학교 1학년 1학기 통합과학 교과서'),
    (NULL, '2022개정', '교과서', '고2-1', '과학', '화학 I', '고등학교 화학 I (천재교육)', '천재교육', 350, '상', '2022 개정 교육과정 고등학교 2학년 1학기 화학 I 교과서'),
    (NULL, '2022개정', '교과서', '고2-1', '과학', '물리학 I', '고등학교 물리학 I (미래엔)', '미래엔', 370, '상', '2022 개정 교육과정 고등학교 2학년 1학기 물리학 I 교과서');

    RAISE NOTICE '✅ master_books 예시 데이터 13개 삽입 완료';
  ELSE
    RAISE NOTICE '⚠️ master_books에 기존 데이터가 있어 삽입을 건너뜁니다.';
  END IF;
END $$;

-- ============================================
-- 2. master_lectures 예시 데이터 삽입
-- ============================================

DO $$
BEGIN
  -- 강의 데이터가 없을 때만 삽입
  IF NOT EXISTS (SELECT 1 FROM master_lectures LIMIT 1) THEN
    
    -- 국어 강의
    INSERT INTO master_lectures (
      tenant_id, revision, content_category, semester,
      subject_category, subject, title, platform, total_episodes, total_duration,
      difficulty_level, notes, linked_book_id
    ) VALUES
    -- 국어 강의
    (NULL, '2022개정', '인강', '고1-1', '국어', '국어', '2024 고1 국어 완전정복 (메가스터디)', '메가스터디', 40, 2400, '중', '2022 개정 교육과정 고등학교 1학년 1학기 국어 완전정복 강의', NULL),
    (NULL, '2022개정', '인강', '고1-1', '국어', '화법과 작문', '고1 화법과 작문 기초 완성 (EBSi)', 'EBSi', 30, 1800, '중', '2022 개정 교육과정 고등학교 1학년 1학기 화법과 작문 기초 강의', NULL),
    
    -- 수학 강의
    (NULL, '2022개정', '인강', '고1-1', '수학', '수학', '2024 고1 수학 개념완성 (메가스터디)', '메가스터디', 50, 3000, '중상', '2022 개정 교육과정 고등학교 1학년 1학기 수학 개념완성 강의', NULL),
    (NULL, '2022개정', '인강', '고1-1', '수학', '수학 I', '고1 수학 I 심화 완성 (이투스)', '이투스', 45, 2700, '상', '2022 개정 교육과정 고등학교 1학년 1학기 수학 I 심화 강의', NULL),
    (NULL, '2022개정', '인강', '고3-1', '수학', '미적분', '2024 수능 미적분 마스터 (메가스터디)', '메가스터디', 60, 3600, '최상', '2022 개정 교육과정 고등학교 3학년 수능 대비 미적분 마스터 강의', NULL),
    
    -- 영어 강의
    (NULL, '2022개정', '인강', '고1-1', '영어', '영어', '고1 영어 기초부터 실전까지 (EBSi)', 'EBSi', 35, 2100, '중', '2022 개정 교육과정 고등학교 1학년 1학기 영어 기초 강의', NULL),
    (NULL, '2022개정', '인강', '고2-1', '영어', '영어 독해와 작문', '고2 영어 독해와 작문 실전 완성 (이투스)', '이투스', 40, 2400, '중상', '2022 개정 교육과정 고등학교 2학년 1학기 영어 독해와 작문 강의', NULL),
    
    -- 사회 강의
    (NULL, '2022개정', '인강', '고1-1', '사회', '한국사', '고1 한국사 완전정복 (메가스터디)', '메가스터디', 38, 2280, '중', '2022 개정 교육과정 고등학교 1학년 1학기 한국사 완전정복 강의', NULL),
    
    -- 과학 강의
    (NULL, '2022개정', '인강', '고1-1', '과학', '통합과학', '고1 통합과학 개념완성 (EBSi)', 'EBSi', 42, 2520, '중상', '2022 개정 교육과정 고등학교 1학년 1학기 통합과학 개념완성 강의', NULL),
    (NULL, '2022개정', '인강', '고2-1', '과학', '화학 I', '고2 화학 I 심화 완성 (이투스)', '이투스', 48, 2880, '상', '2022 개정 교육과정 고등학교 2학년 1학기 화학 I 심화 강의', NULL);

    RAISE NOTICE '✅ master_lectures 예시 데이터 10개 삽입 완료';
  ELSE
    RAISE NOTICE '⚠️ master_lectures에 기존 데이터가 있어 삽입을 건너뜁니다.';
  END IF;
END $$;

-- ============================================
-- 완료 메시지
-- ============================================

DO $$
BEGIN
  RAISE NOTICE '🎉 서비스 마스터 콘텐츠 예시 데이터 삽입 완료!';
  RAISE NOTICE '   - 교재: 13개';
  RAISE NOTICE '   - 강의: 10개';
END $$;

