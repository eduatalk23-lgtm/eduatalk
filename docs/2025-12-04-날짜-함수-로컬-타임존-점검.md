# ë‚ ì§œ í•¨ìˆ˜ ë¡œì»¬ íƒ€ì„ì¡´ ì ê²€ ë° ìˆ˜ì •

## ğŸ“‹ ì‘ì—… ê°œìš”

í”Œëœ ìº˜ë¦°ë”ì™€ í•™ìŠµê´€ë¦¬ ë©”ë‰´ì—ì„œ ë‚ ì§œ ê´€ë ¨ í•¨ìˆ˜ë“¤ì´ ë¡œì»¬ íƒ€ì„ì¡´ì„ ì˜¬ë°”ë¥´ê²Œ ê³ ë ¤í•˜ê³  ìˆëŠ”ì§€ ì ê²€í•˜ê³  ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

## ğŸ” ë°œê²¬ëœ ë¬¸ì œì 

### 1. `getTodayISODate()` í•¨ìˆ˜ ë¬¸ì œ

**ìœ„ì¹˜**: `app/(student)/today/_utils/dateDisplay.ts`

**ë¬¸ì œ**:
```typescript
export function getTodayISODate(): string {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  return today.toISOString().slice(0, 10); // âŒ UTCë¡œ ë³€í™˜ë˜ì–´ ë‚ ì§œê°€ ë°”ë€” ìˆ˜ ìˆìŒ
}
```

`toISOString()`ì€ UTCë¡œ ë³€í™˜í•˜ë¯€ë¡œ, í•œêµ­ ì‹œê°„(KST, UTC+9)ì—ì„œ ìì • ì´ì „ì— ì ‘ì†í•˜ë©´ í•˜ë£¨ ì „ ë‚ ì§œê°€ ë°˜í™˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì˜ˆì‹œ**:
- í•œêµ­ ì‹œê°„: 2024-12-04 23:30 (KST)
- UTC ë³€í™˜: 2024-12-04 14:30 (UTC)
- `toISOString().slice(0, 10)`: "2024-12-04" âœ… (ì´ ê²½ìš°ëŠ” ê´œì°®ìŒ)
- í•˜ì§€ë§Œ í•œêµ­ ì‹œê°„: 2024-12-04 00:30 (KST)
- UTC ë³€í™˜: 2024-12-03 15:30 (UTC)
- `toISOString().slice(0, 10)`: "2024-12-03" âŒ (í•˜ë£¨ ì „ ë‚ ì§œ ë°˜í™˜)

### 2. í”Œëœ ìº˜ë¦°ë” í˜ì´ì§€ ë¬¸ì œ

**ìœ„ì¹˜**: `app/(student)/plan/calendar/page.tsx`

**ë¬¸ì œ**:
```typescript
const today = new Date().toISOString().slice(0, 10); // âŒ UTC ë³€í™˜
const minDateStr = typeof minDate === "string" ? minDate : new Date(minDate).toISOString().slice(0, 10); // âŒ
const maxDateStr = typeof maxDate === "string" ? maxDate : new Date(maxDate).toISOString().slice(0, 10); // âŒ
```

### 3. í•™ìŠµê´€ë¦¬(today) í˜ì´ì§€ ë¬¸ì œ

**ìœ„ì¹˜**: `app/(student)/today/page.tsx`

**ë¬¸ì œ**:
```typescript
const today = new Date();
today.setHours(0, 0, 0, 0);
const todayDate = today.toISOString().slice(0, 10); // âŒ UTC ë³€í™˜
```

### 4. ê¸°íƒ€ ì»´í¬ë„ŒíŠ¸ ë¬¸ì œ

**ìœ„ì¹˜ë“¤**:
- `app/(student)/today/_components/TodayPlanList.tsx`
- `app/(student)/today/_components/CurrentLearningSection.tsx`
- `app/(student)/today/actions/todayActions.ts`
- `lib/date/weekRange.ts`

ëª¨ë‘ `toISOString().slice(0, 10)` íŒ¨í„´ì„ ì‚¬ìš©í•˜ê³  ìˆì–´ ë¡œì»¬ íƒ€ì„ì¡´ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## âœ… í•´ê²° ë°©ë²•

### ì˜¬ë°”ë¥¸ íŒ¨í„´

`lib/date/calendarUtils.ts`ì— ì´ë¯¸ ë¡œì»¬ íƒ€ì„ì¡´ì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤:

```typescript
/**
 * ë‚ ì§œë¥¼ YYYY-MM-DD í˜•ì‹ ë¬¸ìì—´ë¡œ ë³€í™˜ (ë¡œì»¬ íƒ€ì„ì¡´ ê¸°ì¤€)
 * toISOString()ì„ ì‚¬ìš©í•˜ë©´ UTCë¡œ ë³€í™˜ë˜ì–´ ë‚ ì§œê°€ í•˜ë£¨ ì „ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆìœ¼ë¯€ë¡œ
 * ë¡œì»¬ íƒ€ì„ì¡´ ê¸°ì¤€ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
 */
export function formatDateString(date: Date): string {
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, "0");
  const day = String(date.getDate()).padStart(2, "0");
  return `${year}-${month}-${day}`;
}
```

ì´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ë¡œì»¬ íƒ€ì„ì¡´ ê¸°ì¤€ìœ¼ë¡œ ë‚ ì§œê°€ ì˜¬ë°”ë¥´ê²Œ ë³€í™˜ë©ë‹ˆë‹¤.

## ğŸ”§ ìˆ˜ì • ì‘ì—…

### 1. `getTodayISODate()` í•¨ìˆ˜ ìˆ˜ì •

```typescript
// ìˆ˜ì • ì „
export function getTodayISODate(): string {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  return today.toISOString().slice(0, 10);
}

// ìˆ˜ì • í›„
import { formatDateString } from "@/lib/date/calendarUtils";

export function getTodayISODate(): string {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  return formatDateString(today);
}
```

### 2. í”Œëœ ìº˜ë¦°ë” í˜ì´ì§€ ìˆ˜ì •

```typescript
// ìˆ˜ì • ì „
const today = new Date().toISOString().slice(0, 10);

// ìˆ˜ì • í›„
import { formatDateString } from "@/lib/date/calendarUtils";
const today = formatDateString(new Date());
```

### 3. í•™ìŠµê´€ë¦¬ í˜ì´ì§€ ìˆ˜ì •

```typescript
// ìˆ˜ì • ì „
const today = new Date();
today.setHours(0, 0, 0, 0);
const todayDate = today.toISOString().slice(0, 10);

// ìˆ˜ì • í›„
import { formatDateString } from "@/lib/date/calendarUtils";
const today = new Date();
today.setHours(0, 0, 0, 0);
const todayDate = formatDateString(today);
```

### 4. ê¸°íƒ€ ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

ëª¨ë“  `toISOString().slice(0, 10)` ì‚¬ìš©ì„ `formatDateString()`ìœ¼ë¡œ êµì²´í•©ë‹ˆë‹¤.

## ğŸ“Š ìˆ˜ì • ëŒ€ìƒ íŒŒì¼ ëª©ë¡

1. âœ… `app/(student)/today/_utils/dateDisplay.ts` - `getTodayISODate()` í•¨ìˆ˜
2. âœ… `app/(student)/plan/calendar/page.tsx` - ì˜¤ëŠ˜ ë‚ ì§œ ê³„ì‚°
3. âœ… `app/(student)/today/page.tsx` - ì˜¤ëŠ˜ ë‚ ì§œ ê³„ì‚°
4. âœ… `app/(student)/today/_components/TodayPlanList.tsx` - ë‚ ì§œ ê³„ì‚°
5. âœ… `app/(student)/today/_components/CurrentLearningSection.tsx` - ë‚ ì§œ ê³„ì‚°
6. âœ… `app/(student)/today/actions/todayActions.ts` - ë‚´ì¼ ë‚ ì§œ ê³„ì‚°
7. âœ… `lib/date/weekRange.ts` - ì£¼ ë²”ìœ„ í¬ë§·íŒ…

## ğŸ¯ ìˆ˜ì • ì™„ë£Œ í›„ ê¸°ëŒ€ íš¨ê³¼

1. **ë¡œì»¬ íƒ€ì„ì¡´ ì •í™•ì„±**: í•œêµ­ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ë‚ ì§œê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë©ë‹ˆë‹¤.
2. **ì¼ê´€ì„±**: ëª¨ë“  ë‚ ì§œ ë³€í™˜ ë¡œì§ì´ ë™ì¼í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ê´€ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.
3. **ìœ ì§€ë³´ìˆ˜ì„±**: ë‚ ì§œ ë³€í™˜ ë¡œì§ì´ í•œ ê³³ì— ì§‘ì¤‘ë˜ì–´ ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•©ë‹ˆë‹¤.

## ğŸ“ ì°¸ê³ ì‚¬í•­

- `lib/date/calendarUtils.ts`ì˜ `formatDateString()` í•¨ìˆ˜ëŠ” ì´ë¯¸ ë¡œì»¬ íƒ€ì„ì¡´ì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- `lib/scheduler/calculateAvailableDates.ts`ì˜ `formatDate()` í•¨ìˆ˜ë„ ë¡œì»¬ íƒ€ì„ì¡´ì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- í–¥í›„ ë‚ ì§œ ë³€í™˜ì´ í•„ìš”í•œ ê²½ìš° í•­ìƒ `formatDateString()` ë˜ëŠ” ìœ ì‚¬í•œ ë¡œì»¬ íƒ€ì„ì¡´ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

