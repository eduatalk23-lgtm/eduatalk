# 슬롯 UI 행 기반 개선 계획

## 작성일: 2024-12-24

## 현재 상태

현재 4열 그리드 레이아웃:
```
┌────────────────────────────────────────────────────────────────────────┐
│ [자동 매칭 배너 - 미연결 슬롯이 있을 때만 표시]                           │
├──────────────┬──────────────┬──────────────┬──────────────┤
│  슬롯 구성    │  슬롯 상세    │  콘텐츠 연결  │    범위      │
│ ┌──────────┐ │              │              │              │
│ │AI 추천   │ │              │              │              │
│ │프리셋    │ │              │              │              │
│ ├──────────┤ │              │              │              │
│ │과목밸런스│ │              │              │              │
│ ├──────────┤ │              │              │              │
│ │ 슬롯 1   │ │  타입 선택   │  내 콘텐츠   │  시작: ___p  │
│ │ 슬롯 2   │ │  교과 선택   │  추천        │  끝: ___p    │
│ │ 슬롯 3   │ │  과목 선택   │  마스터 검색 │              │
│ ├──────────┤ │              │              │              │
│ │[+슬롯추가]│ │              │              │              │
│ └──────────┘ │              │              │              │
└──────────────┴──────────────┴──────────────┴──────────────┘
```

## 문제점

1. **1열(슬롯 구성)에 요소가 너무 많음**
   - AI 추천, 프리셋, 과목 밸런스, 슬롯 목록, 추가 버튼이 모두 1열에 집중
   - 세로로 길어져서 스크롤 필요

2. **슬롯 추가 UX가 직관적이지 않음**
   - 슬롯 추가 시 1열에만 슬롯이 추가됨
   - "4열 그리드 한 행이 추가된다"는 개념이 시각적으로 전달되지 않음

3. **AI 추천/과목 밸런스가 특정 열에 종속됨**
   - 전체 슬롯에 대한 정보인데 1열에만 표시

---

## 개선 방안

### 목표 레이아웃: 행 기반 슬롯 그리드

```
┌────────────────────────────────────────────────────────────────────────┐
│ 상단 액션 바: [AI 추천 ▼] [프리셋 ▼] [자동 매칭]    │ 과목 밸런스 차트 │
├────────────────────────────────────────────────────────────────────────┤
│ 헤더 행                                                                │
│  슬롯         │  슬롯 상세      │  콘텐츠 연결    │    범위           │
├──────────────┼────────────────┼────────────────┼──────────────────┤
│ 슬롯 1       │  교재 / 수학    │  수학의 정석    │  1p → 50p        │
│ [선택됨]      │  취약 배정      │  ✓ 연결됨       │  ✓ 설정됨         │
├──────────────┼────────────────┼────────────────┼──────────────────┤
│ 슬롯 2       │  강의 / 영어    │  -             │  -               │
│              │  전략 주3일     │  연결 필요      │  범위 필요        │
├──────────────┼────────────────┼────────────────┼──────────────────┤
│ 슬롯 3       │  -             │  -             │  -               │
│ (스켈레톤)    │  설정 필요      │  -             │  -               │
├──────────────┴────────────────┴────────────────┴──────────────────┤
│                    [+ 슬롯 추가] (3/9)                              │
└────────────────────────────────────────────────────────────────────────┘
```

### 핵심 변경 사항

#### 1. 상단 액션 바 분리
- AI 추천, 프리셋, 자동 매칭 버튼을 4열 그리드 상단으로 이동
- 과목 밸런스 차트도 상단 우측에 배치

#### 2. 행 기반 슬롯 표시
- 각 슬롯이 4열 그리드의 한 "행"으로 표시
- 슬롯 선택 시 해당 행이 하이라이트
- 각 셀에서 직접 편집 가능 (또는 확장 패널)

#### 3. 하단 슬롯 추가 버튼
- 4열 그리드 하단에 전체 너비로 배치
- 클릭 시 새 행(스켈레톤)이 추가되는 것이 시각적으로 명확

#### 4. 스켈레톤 UI
- 빈 슬롯은 스켈레톤 상태로 표시
- 각 열에 "설정 필요", "연결 필요", "범위 필요" 안내

---

## 스켈레톤 UI 디자인

### 빈 슬롯 행 (미설정 상태)
```
┌──────────────┬────────────────┬────────────────┬──────────────────┐
│ 슬롯 N       │ ░░░░░░░░░░░░░  │ ░░░░░░░░░░░░░  │ ░░░░░░░░░░░░░   │
│              │  타입을 선택   │  콘텐츠 연결   │  범위를 설정     │
│ [삭제]       │  하세요        │  하세요        │  하세요          │
└──────────────┴────────────────┴────────────────┴──────────────────┘
```

### 부분 설정 상태
```
┌──────────────┬────────────────┬────────────────┬──────────────────┐
│ 슬롯 2       │ 📚 교재        │ ░░░░░░░░░░░░░  │ ░░░░░░░░░░░░░   │
│ [선택됨]     │  수학 / 취약   │  콘텐츠 연결   │  범위를 설정     │
│              │  ✓ 설정 완료   │  하세요        │  하세요          │
└──────────────┴────────────────┴────────────────┴──────────────────┘
```

### 완전 설정 상태
```
┌──────────────┬────────────────┬────────────────┬──────────────────┐
│ 슬롯 1       │ 📚 교재        │ 수학의 정석    │  1p → 50p       │
│ ✓            │  수학 / 취약   │  ✓ 연결됨      │  ✓ 설정됨        │
│              │  ✓ 설정 완료   │                │                  │
└──────────────┴────────────────┴────────────────┴──────────────────┘
```

---

## 구현 계획

### Phase 1: 레이아웃 구조 변경

**수정 파일:**
- `Step3SlotModeSelection.tsx`
  - 상단 액션 바 추가 (AI 추천, 프리셋, 과목 밸런스)
  - 4열 그리드를 슬롯별 행으로 변경
  - 하단 슬롯 추가 버튼

### Phase 2: 슬롯 행 컴포넌트

**신규 파일:**
- `SlotRow.tsx`
  - 한 슬롯의 4열 정보를 한 행으로 표시
  - 선택/비선택 상태 스타일
  - 스켈레톤 상태 지원

**기존 파일 역할 변경:**
- `SlotDetailPanel.tsx` → 행 내 2열 셀로 변경
- `ContentLinkingPanel.tsx` → 행 내 3열 셀로 변경
- `RangeSettingPanel.tsx` → 행 내 4열 셀로 변경

### Phase 3: 인터랙션 개선

- 행 클릭 시 확장/축소 (아코디언 스타일) 또는
- 행 클릭 시 우측 상세 패널 표시 (현재 방식 유지 가능)

---

## 대안 검토

### 옵션 A: 행 기반 + 인라인 편집
- 각 셀에서 직접 드롭다운/입력으로 편집
- 장점: 컴팩트, 한눈에 파악 가능
- 단점: 셀 공간 제약, 복잡한 설정 어려움

### 옵션 B: 행 기반 + 아코디언 확장
- 행 클릭 시 해당 행 아래에 상세 편집 영역 확장
- 장점: 충분한 편집 공간
- 단점: 확장 시 다른 행이 밀려남

### 옵션 C: 행 기반 + 요약 표시 (현재 제안)
- 각 셀에 현재 상태 요약만 표시
- 행 선택 시 하단 또는 모달에서 상세 편집
- 장점: 깔끔한 테이블 뷰 유지
- 단점: 편집 시 추가 클릭 필요

---

## 관련 파일

- `app/(student)/plan/new-group/_components/_features/content-selection/slot-mode/Step3SlotModeSelection.tsx`
- `app/(student)/plan/new-group/_components/_features/content-selection/slot-mode/SlotConfigurationPanel.tsx`
- `app/(student)/plan/new-group/_components/_features/content-selection/slot-mode/SlotDetailPanel.tsx`
- `app/(student)/plan/new-group/_components/_features/content-selection/slot-mode/ContentLinkingPanel.tsx`
- `app/(student)/plan/new-group/_components/_features/content-selection/slot-mode/RangeSettingPanel.tsx`
- `app/(student)/plan/new-group/_components/_features/content-selection/slot-mode/SlotItem.tsx`

---

## 다음 단계

1. 사용자 확인: 옵션 A/B/C 중 선호하는 방식 선택
2. 프로토타입 구현
3. 테스트 및 피드백 반영
