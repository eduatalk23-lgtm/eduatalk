# 타입 에러 및 빌드 에러 수정

## 작업 일시
2025-01-15

## 수정 내용

### 1. Button 컴포넌트 Import 에러
**파일**: `app/(admin)/admin/tools/_components/ToolCard.tsx`, `app/(admin)/admin/content-metadata/_components/SubjectsManager.tsx`

**문제**: `Button` 컴포넌트를 named import로 사용했지만, 실제로는 default export만 제공됨

**수정**:
```typescript
// 변경 전
import { Button } from "@/components/atoms/Button";

// 변경 후
import Button from "@/components/atoms/Button";
```

### 2. Input 컴포넌트 Import 에러
**파일**: `app/(admin)/admin/content-metadata/_components/SubjectsManager.tsx`

**문제**: `Input` 컴포넌트를 named import로 사용했지만, 실제로는 default export만 제공됨

**수정**:
```typescript
// 변경 전
import { Input } from "@/components/atoms/Input";

// 변경 후
import Input from "@/components/atoms/Input";
```

### 3. divideDefaultVar Import 누락
**파일**: `app/(admin)/admin/content-metadata/_components/SubjectsManager.tsx`

**문제**: `divideDefaultVar`를 사용했지만 import하지 않음

**수정**: `divideDefaultVar`를 import 목록에 추가

### 4. RecipientType Import 경로 수정
**파일**: 
- `app/(admin)/admin/sms/_components/SingleRecipientSearch.tsx`
- `app/(admin)/admin/sms/_components/SMSRecipientSelector.tsx`

**문제**: `RecipientType`을 `SMSSendForm`에서 import했지만, 실제로는 `SMSFilterPanel`에서 export됨

**수정**:
```typescript
// 변경 전
import type { RecipientType } from "./SMSSendForm";

// 변경 후
import type { RecipientType } from "./SMSFilterPanel";
```

### 5. profiles 변수 미정의
**파일**: `app/(admin)/admin/sms/page.tsx`

**문제**: `profiles` 변수가 정의되지 않았지만 사용됨

**수정**: `phoneDataList.length`로 변경

### 6. studentsError 타입 처리
**파일**: `app/(admin)/admin/sms/page.tsx`

**문제**: `studentsError`가 `unknown` 타입이므로 타입 단언 필요

**수정**: `PostgrestError`로 타입 단언 추가

### 7. SMSSendForm Props 수정
**파일**: `app/(admin)/admin/sms/page.tsx`

**문제**: `SMSSendForm`이 `students` prop을 받지 않음

**수정**: `students` prop 제거

### 8. adminClient null 체크 추가
**파일**:
- `app/(admin)/admin/students/[id]/page.tsx`
- `lib/data/studentProfiles.ts`
- `lib/utils/studentPhoneUtils.ts`

**문제**: `adminClient`가 `null`일 수 있지만 null 체크 없이 사용

**수정**: null 체크 추가 및 에러 처리

### 9. CreateStudentForm React Hook Form 타입 에러
**파일**: 
- `app/(admin)/admin/students/_components/CreateStudentForm.tsx`
- `app/(admin)/admin/students/_hooks/useCreateStudentForm.ts`

**문제**: React Hook Form의 `handleSubmit` 타입이 제대로 추론되지 않음

**수정**: 
- `form.handleSubmit`을 직접 사용
- `zodResolver`에 타입 단언 추가

### 10. showSuccess 인자 개수 수정
**파일**: `app/(admin)/admin/students/_components/CreateStudentModal.tsx`

**문제**: `showSuccess`는 1개의 인자만 받지만 2개를 전달

**수정**: 메시지를 하나로 합침

### 11. DivisionStudentList Set 타입 에러
**파일**: `app/(admin)/admin/students/divisions/_components/DivisionStudentList.tsx`

**문제**: `updateSelectedIds`는 `Set<string>`을 받지만 함수를 전달

**수정**: `setSelectedIds`를 직접 사용

### 12. getStudentSchoolsBatch 타입 에러
**파일**: `app/(admin)/admin/students/page.tsx`

**문제**: `filteredStudents`의 타입이 함수 요구사항과 맞지 않음

**수정**: 데이터 변환 추가

### 13. StudentListRow 타입 불일치
**파일**: `app/(admin)/admin/students/page.tsx`

**문제**: `undefined`를 `null`로 변환 필요

**수정**: `?? null` 연산자 사용

### 14. executeQuery 타입 에러
**파일**: `lib/data/students.ts`

**문제**: Supabase 쿼리 결과 타입이 `executeQuery` 요구사항과 맞지 않음

**수정**: 타입 단언 추가

### 15. getActiveStudentsForSMS 타입 에러
**파일**: `lib/data/students.ts`

**문제**: 쿼리 결과 타입이 반환 타입과 맞지 않음

**수정**: `unknown`을 거쳐 타입 단언

### 16. StudentPhoneData 타입 에러
**파일**: `lib/utils/studentPhoneUtils.ts`

**문제**: `mother_phone_source`와 `father_phone_source`의 타입이 맞지 않음

**수정**: 타입 단언 추가

## 결과

모든 타입 에러와 빌드 에러가 해결되었으며, 빌드가 성공적으로 완료되었습니다.

## 참고사항

- 기능에 문제가 생기지 않도록 주의하여 수정
- 타입 단언(`as`)은 필요한 경우에만 사용
- null 체크는 안전성을 위해 추가


