# CompletionToast useEffect Dependency Array ìµœì í™” ë¦¬ë·°

## ğŸ“‹ ë³€ê²½ ì‚¬í•­

### Dependency Array ìµœì í™”
- **ì œê±°**: `searchParams`
- **ìœ ì§€**: `planId`, `planTitle`, `handled`, `pathname`, `router`, `showSuccess`

## ğŸ” ì½”ë“œ ë¦¬ë·° í¬ì¸íŠ¸

### 1. searchParams ì œê±° í›„ planIdë¥¼ í†µí•œ ë³€ê²½ ìºì¹˜ ê°€ëŠ¥ ì—¬ë¶€

**âœ… ê°€ëŠ¥í•¨**

**ì´ìœ :**
- `planId`ëŠ” `completedPlanId || searchParams.get("completedPlanId")`ë¡œ ê³„ì‚°ë¨
- `planId`ê°€ ë³€ê²½ë˜ë©´ effectê°€ ì¬ì‹¤í–‰ë¨
- `searchParams`ê°€ ë³€ê²½ë˜ì–´ë„ `planId`ê°€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ effectëŠ” ì¬ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
- í•˜ì§€ë§Œ `planId`ê°€ ì‹¤ì œë¡œ ë³€ê²½ë˜ëŠ” ê²½ìš°(ë‹¤ë¥¸ í”Œëœ ì™„ë£Œ)ì—ë§Œ effectê°€ ì¬ì‹¤í–‰ë¨

**ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„:**

1. **ê°™ì€ planIdë¡œ URLë§Œ ë³€ê²½ë˜ëŠ” ê²½ìš°**
   - ì˜ˆ: `/today?completedPlanId=123&date=2024-01-01` â†’ `/today?completedPlanId=123&date=2024-01-02`
   - `planId`ëŠ” ì—¬ì „íˆ `"123"`ì´ë¯€ë¡œ effectëŠ” ì¬ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
   - âœ… **ì˜ë„í•œ ë™ì‘**: ê°™ì€ í”Œëœì— ëŒ€í•´ ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€

2. **ë‹¤ë¥¸ planIdë¡œ ë³€ê²½ë˜ëŠ” ê²½ìš°**
   - ì˜ˆ: `/today?completedPlanId=123` â†’ `/today?completedPlanId=456`
   - `planId`ê°€ `"123"`ì—ì„œ `"456"`ìœ¼ë¡œ ë³€ê²½ë˜ë¯€ë¡œ effectê°€ ì¬ì‹¤í–‰ë¨
   - í•˜ì§€ë§Œ `handled`ê°€ ì—¬ì „íˆ `true`ì´ë¯€ë¡œ early returnë¨
   - âš ï¸ **ì ì¬ì  ì´ìŠˆ**: ë‹¤ë¥¸ í”Œëœ ì™„ë£Œ ì‹œ ì²˜ë¦¬ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ

**í•´ê²° ë°©ì•ˆ:**
- í˜„ì¬ êµ¬í˜„ì€ ì˜ë„ì ìœ¼ë¡œ ê°™ì€ í˜ì´ì§€ì—ì„œ ì—¬ëŸ¬ í”Œëœ ì™„ë£Œë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šë„ë¡ ì„¤ê³„ë¨
- ì¼ë°˜ì ì¸ í”Œë¡œìš°ì—ì„œëŠ” í”Œëœ ì™„ë£Œ í›„ í˜ì´ì§€ê°€ ë¦¬ë‹¤ì´ë ‰íŠ¸ë˜ë¯€ë¡œ ë¬¸ì œ ì—†ìŒ
- ë§Œì•½ ë‹¤ë¥¸ í”Œëœ ì™„ë£Œë„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ë©´ `planId` ë³€ê²½ ì‹œ `handled`ë¥¼ ë¦¬ì…‹í•˜ëŠ” ë¡œì§ ì¶”ê°€ ê°€ëŠ¥

### 2. handled í”Œë˜ê·¸ë¡œ ë™ì¼ planIdì— ëŒ€í•œ 1íšŒ ì‹¤í–‰ ë³´ì¥ ì—¬ë¶€

**âœ… ë³´ì¥ë¨**

**ì´ìœ :**
- `handled`ëŠ” `useState(false)`ë¡œ ì´ˆê¸°í™”ë¨
- effect ë‚´ë¶€ì—ì„œ `if (handled) return;`ìœ¼ë¡œ early return
- `setHandled(true)`ëŠ” effect ë‚´ë¶€ì—ì„œ í•œ ë²ˆë§Œ ì‹¤í–‰ë¨
- `handled`ê°€ `true`ê°€ ë˜ë©´ ê°™ì€ `planId`ì— ëŒ€í•´ì„œëŠ” effectê°€ ì¬ì‹¤í–‰ë˜ì–´ë„ early returnë¨

**ë™ì‘ íë¦„:**

```
1. ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸
   - handled = false
   - planId = "123"

2. useEffect ì‹¤í–‰ (1íšŒ)
   - if (!planId) return; â†’ false
   - if (handled) return; â†’ false
   - setHandled(true); â†’ handled = true
   - URL ì •ë¦¬ ë° í† ìŠ¤íŠ¸ í‘œì‹œ

3. React Strict Modeë¡œ ì¸í•œ ì¬ì‹¤í–‰ (ê°œë°œ ëª¨ë“œ)
   - handled = true
   - if (handled) return; â†’ true, early return
   - âœ… ì‹¤ì œ ì²˜ë¦¬ ë¡œì§ì€ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ

4. planId ë³€ê²½ (ë‹¤ë¥¸ í”Œëœ ì™„ë£Œ)
   - planId = "456"
   - handled = true (ì—¬ì „íˆ)
   - if (handled) return; â†’ true, early return
   - âš ï¸ ìƒˆë¡œìš´ í”Œëœ ì™„ë£ŒëŠ” ì²˜ë¦¬ë˜ì§€ ì•ŠìŒ (ì˜ë„ëœ ë™ì‘ì¼ ìˆ˜ ìˆìŒ)
```

**Strict Mode ëŒ€ì‘:**
- React Strict ModeëŠ” ê°œë°œ ëª¨ë“œì—ì„œ effectë¥¼ ë‘ ë²ˆ ì‹¤í–‰í•¨
- `handled` ê°€ë“œë¡œ ì¸í•´ ì‹¤ì œ ì²˜ë¦¬ ë¡œì§ì€ 1íšŒë§Œ ì‹¤í–‰ë¨
- âœ… **Strict Modeì—ì„œë„ ì•ˆì „í•¨**

## ğŸ“Š ìµœì¢… ê²€ì¦

### ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ ì¶©ì¡± ì—¬ë¶€

1. **/today ì§„ì… ì‹œ**
   - `/today?completedPlanId=123&date=2024-01-01` â†’ CompletionToast 1íšŒ ì‹¤í–‰ â†’ `/today?date=2024-01-01`ë¡œ replace + í† ìŠ¤íŠ¸ 1íšŒ
   - âœ… **ì¶©ì¡±**

2. **/camp/today ì§„ì… ì‹œ**
   - `/camp/today?completedPlanId=123&date=2024-01-01` â†’ CompletionToast 1íšŒ ì‹¤í–‰ â†’ `/camp/today?date=2024-01-01`ë¡œ replace + í† ìŠ¤íŠ¸ 1íšŒ
   - âœ… **ì¶©ì¡±**

3. **Strict Mode ëŒ€ì‘**
   - ê°œë°œ ëª¨ë“œì—ì„œ ì¤‘ë³µ ë Œë”ê°€ ìˆì–´ë„ ì‹¤ì œ ë„¤ë¹„ê²Œì´ì…˜/í† ìŠ¤íŠ¸ëŠ” 1íšŒë§Œ ì‹¤í–‰
   - âœ… **ì¶©ì¡±**

## âœ… ê²°ë¡ 

### í˜„ì¬ êµ¬í˜„ ìƒíƒœ
- âœ… `searchParams`ë¥¼ dependency arrayì—ì„œ ì œê±° ì™„ë£Œ
- âœ… `planId`ë¥¼ í†µí•´ í•„ìš”í•œ ë³€ê²½ì€ ëª¨ë‘ ìºì¹˜ ê°€ëŠ¥
- âœ… `handled` í”Œë˜ê·¸ë¡œ ë™ì¼ `planId`ì— ëŒ€í•œ 1íšŒ ì‹¤í–‰ ë³´ì¥
- âœ… ê¸°ëŠ¥ ë³€í™” ì—†ìŒ

### ê°œì„  ê°€ëŠ¥ ì‚¬í•­ (ì„ íƒì )
- ë‹¤ë¥¸ í”Œëœ ì™„ë£Œë„ ì²˜ë¦¬í•´ì•¼ í•œë‹¤ë©´ `planId` ë³€ê²½ ì‹œ `handled`ë¥¼ ë¦¬ì…‹í•˜ëŠ” ë¡œì§ ì¶”ê°€ ê°€ëŠ¥
- í˜„ì¬ëŠ” ì¼ë°˜ì ì¸ í”Œë¡œìš°ì—ì„œ ë¬¸ì œ ì—†ìœ¼ë¯€ë¡œ ì„ íƒì  ê°œì„  ì‚¬í•­

---

**ìµœì¢… í‰ê°€**: í˜„ì¬ êµ¬í˜„ì€ ìš”êµ¬ì‚¬í•­ì„ ëª¨ë‘ ë§Œì¡±í•˜ë©°, ì•ˆì „í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤. âœ…

