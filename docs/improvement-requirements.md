# 개선 요청사항 정리

## 📋 요청사항 요약

### 1. 총 회차 계산 기능 점검 및 수정
**현재 문제:**
- 회차 정보 저장 시 `total_episodes` 자동 업데이트가 제대로 반영되지 않는 것 같음
- 상세 페이지에서 `total_episodes` 값이 최신 회차 정보를 반영하지 않을 수 있음

**개선 방안:**
- 회차 정보 저장 후 `total_episodes` 자동 업데이트 로직 재확인
- 상세 페이지 조회 시 회차 정보에서 최신 `total_episodes` 계산하여 표시
- 회차 정보 변경 시 실시간으로 `total_episodes` 반영 확인

---

### 2. 연결된 교재 기능 고도화

**현재 상태:**
- 단순 드롭다운으로 기존 교재만 선택 가능
- 교재가 없으면 링크만 제공

**개선 요구사항:**

#### 2.1 교재 등록 기능 통합
- 등록된 교재가 없을 때: 교재 등록 폼을 직접 표시
- 교재 정보를 모두 입력할 수 있는 UI 제공
- 등록 후 바로 연결 가능

#### 2.2 교재 검색 및 연결 기능
- 기존 교재 검색 기능 추가
- 필터링 (과목, 출판사 등)
- 검색 결과에서 선택하여 연결

#### 2.3 탭 구조로 페이지 개선
- **강의 교재 정보 탭** 생성
  - 연결된 교재 표시/수정/삭제
  - 교재 검색 및 연결
  - 교재 등록 (없을 경우)

---

### 3. 페이지 구조 개선 (탭 방식)

#### 3.1 강의 상세 페이지 (`/contents/lectures/[id]`)

**현재 구조:**
```
강의 정보
강의 회차 정보
```

**개선 후 구조:**
```
[강의 정보] [회차 정보] [강의 교재 정보]  ← 탭
─────────────────────────────────────
현재 선택된 탭의 내용 표시
```

**탭 구성:**
1. **강의 정보 탭**
   - 기본 정보 (제목, 플랫폼, 난이도 등)
   - 정보 수정 기능
   - 삭제 버튼

2. **회차 정보 탭**
   - 회차 목록 표시
   - 회차 추가/수정/삭제
   - 총 회차 자동 계산 표시

3. **강의 교재 정보 탭** (신규)
   - 연결된 교재 표시
   - 교재 검색 및 연결
   - 교재 등록 (없을 경우)
   - 연결 해제

#### 3.2 교재 상세 페이지 (`/contents/books/[id]`)

**현재 구조:**
```
교재 정보
교재 목차
```

**개선 후 구조:**
```
[교재 정보] [목차 정보]  ← 탭
─────────────────────────
현재 선택된 탭의 내용 표시
```

**탭 구성:**
1. **교재 정보 탭**
   - 기본 정보 (제목, 출판사, 난이도 등)
   - 정보 수정 기능
   - 삭제 버튼

2. **목차 정보 탭**
   - 목차 목록 표시
   - 목차 추가/수정/삭제

---

## 🎯 구현 우선순위

### Phase 1: 총 회차 계산 기능 수정
1. 회차 정보 저장 후 `total_episodes` 업데이트 로직 점검
2. 상세 페이지 조회 시 회차 정보 기반으로 `total_episodes` 재계산
3. 실시간 반영 확인

### Phase 2: 탭 구조로 페이지 개선
1. 강의 상세 페이지 탭 구조 적용
   - 강의 정보 탭
   - 회차 정보 탭
   - 강의 교재 정보 탭 (신규)
2. 교재 상세 페이지 탭 구조 적용
   - 교재 정보 탭
   - 목차 정보 탭

### Phase 3: 연결된 교재 기능 고도화
1. 강의 교재 정보 탭에 교재 검색 기능 추가
2. 교재 등록 기능 통합 (없을 경우)
3. 교재 정보 전체 입력 UI 제공

---

## 📝 상세 요구사항

### 강의 교재 정보 탭 기능

#### 기능 1: 연결된 교재 표시
- 현재 연결된 교재 정보 표시
- 교재 상세 페이지로 이동하는 링크
- 연결 해제 버튼

#### 기능 2: 교재 검색 및 연결
- 검색 입력 필드
- 필터 옵션 (과목, 출판사, 학년/학기 등)
- 검색 결과 목록 표시
- "연결하기" 버튼

#### 기능 3: 교재 등록 (없을 경우)
- "교재 등록" 버튼/섹션
- 교재 등록 폼 (모든 필드 입력 가능)
- 등록 후 자동 연결 옵션

---

## ✅ 확인 사항

이해한 내용이 맞는지 확인 부탁드립니다:

1. ✅ 총 회차는 회차 정보의 최대 `episode_number`로 자동 계산
2. ✅ 강의 상세 페이지를 탭 구조로 변경 (3개 탭)
3. ✅ 교재 상세 페이지를 탭 구조로 변경 (2개 탭)
4. ✅ 강의 교재 정보 탭에서 교재 검색/등록/연결 기능 제공
5. ✅ 등록된 교재가 없을 때 교재 등록 폼 직접 제공

맞다면 바로 구현을 시작하겠습니다!

