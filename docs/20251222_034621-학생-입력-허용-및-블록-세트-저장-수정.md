# í”Œëœ ìœ„ì €ë“œ ì·¨ì†Œ/ì €ì¥ ë„¤ë¹„ê²Œì´ì…˜ ë° ì½˜í…ì¸  ë²”ìœ„ ì €ì¥ í›„ ìŠ¤í¬ë¡¤ ìˆ˜ì •

## ğŸ” ë¬¸ì œ ìƒí™©

### 1. ì·¨ì†Œ/ì €ì¥ ë²„íŠ¼ ì•¡ì…˜ ì‹œ ìº í”„ ë©”ë‰´ë¡œ ì´ë™í•˜ì§€ ì•ŠëŠ” ë¬¸ì œ

ìº í”„ ëª¨ë“œì—ì„œ í”Œëœ ìœ„ì €ë“œë¥¼ ì‚¬ìš©í•  ë•Œ, ì·¨ì†Œ ë˜ëŠ” ì €ì¥ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ìº í”„ ë©”ë‰´ë¡œ ì´ë™í•˜ì§€ ì•Šê³  í”Œëœ ê´€ë¦¬ ë©”ë‰´(`/plan`)ë¡œ ì´ë™í•˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

**ë¬¸ì œì **:

- `handleCancel` í•¨ìˆ˜ì—ì„œ ê´€ë¦¬ì ëª¨ë“œ(`isAdminMode`, `isAdminContinueMode`)ë§Œ í™•ì¸í•˜ê³  ì¼ë°˜ ìº í”„ ëª¨ë“œ(`isCampMode`)ëŠ” í™•ì¸í•˜ì§€ ì•ŠìŒ
- ìº í”„ ì´ˆëŒ€ ID(`campInvitationId`)ê°€ ìˆì–´ë„ ìº í”„ ì°¸ì—¬ í˜ì´ì§€ë¡œ ì´ë™í•˜ì§€ ì•ŠìŒ

### 2. ì½˜í…ì¸  ë²”ìœ„ ì €ì¥ í›„ ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ìœ¼ë¡œ ì´ë™í•˜ì§€ ì•ŠëŠ” ë¬¸ì œ

ì½˜í…ì¸ ë¥¼ ì„ íƒí•˜ê³  ë²”ìœ„ë¥¼ ì…ë ¥í•œ í›„ ì €ì¥í•˜ë©´, ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ìœ¼ë¡œ ìŠ¤í¬ë¡¤ë˜ì§€ ì•Šì•„ ì‚¬ìš©ìê°€ ì €ì¥ëœ ì½˜í…ì¸ ë¥¼ í™•ì¸í•˜ê¸° ì–´ë ¤ì› ìŠµë‹ˆë‹¤.

**ë¬¸ì œì **:

- ë²”ìœ„ ì €ì¥ í›„ ëª¨ë‹¬ë§Œ ë‹«íˆê³  ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•˜ì§€ ì•ŠìŒ
- ì‚¬ìš©ìê°€ ë²”ìœ„ê°€ ì œëŒ€ë¡œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ì–´ë ¤ì›€

## ğŸ›  ìˆ˜ì • ë‚´ìš©

### 1. PlanGroupWizard.tsx - ì·¨ì†Œ í•¸ë“¤ëŸ¬ ìˆ˜ì •

**íŒŒì¼**: `app/(student)/plan/new-group/_components/PlanGroupWizard.tsx`

**ë³€ê²½ ì‚¬í•­**:

- `handleCancel` í•¨ìˆ˜ì— ìº í”„ ëª¨ë“œ í™•ì¸ ë¡œì§ ì¶”ê°€
- `isCampMode`ì™€ `campInvitationId`ê°€ ìˆìœ¼ë©´ ìº í”„ ì°¸ì—¬ í˜ì´ì§€(`/camp/${campInvitationId}`)ë¡œ ì´ë™

**ë³€ê²½ ì „**:

```typescript
const handleCancel = useCallback(() => {
  // ë³€ê²½ ì‚¬í•­ì´ ìˆìœ¼ë©´ í™•ì¸
  if (isDirty) {
    if (
      !confirm("ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?")
    ) {
      return;
    }
  }

  // ê´€ë¦¬ì ëª¨ë“œì¼ ë•ŒëŠ” ìº í”„ í…œí”Œë¦¿ ì°¸ì—¬ì ëª©ë¡ìœ¼ë¡œ ì´ë™
  if (mode.isAdminMode || mode.isAdminContinueMode) {
    const templateId = initialData?.templateId;
    if (templateId) {
      router.push(`/admin/camp-templates/${templateId}/participants`, {
        scroll: true,
      });
      return;
    }
  }
  // ì¼ë°˜ ëª¨ë“œì¼ ë•ŒëŠ” ê¸°ì¡´ ë¡œì§ ì‚¬ìš©
  router.push(
    isEditMode && draftGroupId ? `/plan/group/${draftGroupId}` : "/plan",
    { scroll: true }
  );
}, [isDirty, mode, initialData, router, isEditMode, draftGroupId]);
```

**ë³€ê²½ í›„**:

```typescript
const handleCancel = useCallback(() => {
  // ë³€ê²½ ì‚¬í•­ì´ ìˆìœ¼ë©´ í™•ì¸
  if (isDirty) {
    if (
      !confirm("ë³€ê²½ì‚¬í•­ì´ ì €ì¥ë˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?")
    ) {
      return;
    }
  }

  // ê´€ë¦¬ì ëª¨ë“œì¼ ë•ŒëŠ” ìº í”„ í…œí”Œë¦¿ ì°¸ì—¬ì ëª©ë¡ìœ¼ë¡œ ì´ë™
  if (mode.isAdminMode || mode.isAdminContinueMode) {
    const templateId = initialData?.templateId;
    if (templateId) {
      router.push(`/admin/camp-templates/${templateId}/participants`, {
        scroll: true,
      });
      return;
    }
  }

  // ìº í”„ ëª¨ë“œì¼ ë•ŒëŠ” ìº í”„ ì°¸ì—¬ í˜ì´ì§€ë¡œ ì´ë™
  if (isCampMode && campInvitationId) {
    router.push(`/camp/${campInvitationId}`, { scroll: true });
    return;
  }

  // ì¼ë°˜ ëª¨ë“œì¼ ë•ŒëŠ” ê¸°ì¡´ ë¡œì§ ì‚¬ìš©
  router.push(
    isEditMode && draftGroupId ? `/plan/group/${draftGroupId}` : "/plan",
    { scroll: true }
  );
}, [
  isDirty,
  mode,
  initialData,
  router,
  isEditMode,
  draftGroupId,
  isCampMode,
  campInvitationId,
]);
```

### 2. StudentContentsPanel.tsx - ë²”ìœ„ ì €ì¥ í›„ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ ì¶”ê°€

**íŒŒì¼**: `app/(student)/plan/new-group/_components/_features/content-selection/components/StudentContentsPanel.tsx`

**ë³€ê²½ ì‚¬í•­**:

1. ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ì— `ref` ì¶”ê°€
2. ë²”ìœ„ ì €ì¥ í›„ ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ìœ¼ë¡œ ìŠ¤í¬ë¡¤í•˜ëŠ” ë¡œì§ ì¶”ê°€

**ì¶”ê°€ëœ ì½”ë“œ**:

```typescript
// ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ ref (ìŠ¤í¬ë¡¤ìš©)
const selectedContentsRef = useRef<HTMLDivElement>(null);
```

**ë²”ìœ„ ì €ì¥ í•¸ë“¤ëŸ¬ ìˆ˜ì •**:

```typescript
// ë²”ìœ„ ì €ì¥
const handleRangeSave = useCallback(
  (range: ContentRange) => {
    // ... ê¸°ì¡´ ë¡œì§ ...

    onUpdate(updated);
    setRangeModalOpen(false);
    setRangeModalContent(null);

    // ë²”ìœ„ ì €ì¥ í›„ ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ìœ¼ë¡œ ìŠ¤í¬ë¡¤
    setTimeout(() => {
      if (selectedContentsRef.current) {
        selectedContentsRef.current.scrollIntoView({
          behavior: "smooth",
          block: "start",
        });
      }
    }, 100);
  },
  [rangeModalContent, selectedContents, metadataCache, contents, onUpdate]
);
```

**JSX ìˆ˜ì •**:

```typescript
{/* ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ */}
{selectedContents.length > 0 ? (
  <div ref={selectedContentsRef} className="space-y-4">
    {/* ... */}
  </div>
) : (
  {/* ... */}
)}
```

## âœ… ìˆ˜ì • ê²°ê³¼

### 1. ì·¨ì†Œ/ì €ì¥ ë„¤ë¹„ê²Œì´ì…˜

- âœ… ìº í”„ ëª¨ë“œì—ì„œ ì·¨ì†Œ ë²„íŠ¼ í´ë¦­ ì‹œ ìº í”„ ì°¸ì—¬ í˜ì´ì§€ë¡œ ì´ë™
- âœ… ê´€ë¦¬ì ëª¨ë“œì—ì„œëŠ” ê¸°ì¡´ ë¡œì§ ìœ ì§€ (ìº í”„ í…œí”Œë¦¿ ì°¸ì—¬ì ëª©ë¡ìœ¼ë¡œ ì´ë™)
- âœ… ì¼ë°˜ ëª¨ë“œì—ì„œëŠ” ê¸°ì¡´ ë¡œì§ ìœ ì§€ (í”Œëœ ê´€ë¦¬ í˜ì´ì§€ë¡œ ì´ë™)

### 2. ì½˜í…ì¸  ë²”ìœ„ ì €ì¥ í›„ ìŠ¤í¬ë¡¤

- âœ… ë²”ìœ„ ì €ì¥ í›„ ìë™ìœ¼ë¡œ ì„ íƒëœ ì½˜í…ì¸  ëª©ë¡ìœ¼ë¡œ ìŠ¤í¬ë¡¤
- âœ… ì‚¬ìš©ìê°€ ì €ì¥ëœ ì½˜í…ì¸ ë¥¼ ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥
- âœ… ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì ìš© (`behavior: "smooth"`)

## ğŸ“ ì°¸ê³  ì‚¬í•­

### ì €ì¥ ë²„íŠ¼ ë™ì‘

í˜„ì¬ ì €ì¥ ë²„íŠ¼(`onSave`)ì€ ì €ì¥ë§Œ ìˆ˜í–‰í•˜ê³  ë„¤ë¹„ê²Œì´ì…˜ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” ì¼ë°˜ì ì¸ UX íŒ¨í„´ì— ë§ëŠ” ë™ì‘ì…ë‹ˆë‹¤. ì €ì¥ í›„ì—ë„ í˜ì´ì§€ë¥¼ ìœ ì§€í•˜ì—¬ ì‚¬ìš©ìê°€ ê³„ì† ì‘ì—…í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

ë§Œì•½ ì €ì¥ í›„ì—ë„ ìº í”„ ë©”ë‰´ë¡œ ì´ë™í•˜ëŠ” ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤ë©´, ë³„ë„ì˜ ìš”êµ¬ì‚¬í•­ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ë‹¤ë¥¸ ì½˜í…ì¸  íŒ¨ë„

í˜„ì¬ëŠ” `StudentContentsPanel`ë§Œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. `MasterContentsPanel`ê³¼ `RecommendedContentsPanel`ì—ë„ ë™ì¼í•œ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆì§€ë§Œ, ì‚¬ìš©ìê°€ ì–¸ê¸‰í•œ ë¬¸ì œëŠ” ì£¼ë¡œ í•™ìƒ ì½˜í…ì¸  íŒ¨ë„ì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

## ğŸ”„ ê´€ë ¨ íŒŒì¼

- `app/(student)/plan/new-group/_components/PlanGroupWizard.tsx`
- `app/(student)/plan/new-group/_components/_features/content-selection/components/StudentContentsPanel.tsx`
