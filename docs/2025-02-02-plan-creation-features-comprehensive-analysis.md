# í•™ìƒ/ê´€ë¦¬ì ì˜ì—­ í”Œëœ ìƒì„± ê¸°ëŠ¥ í†µí•© ë¶„ì„

> ì‘ì„±ì¼: 2025-02-02  
> ìƒíƒœ: ì™„ë£Œ  
> ëª©ì : í•™ìƒê³¼ ê´€ë¦¬ì ì˜ì—­ì˜ í”Œëœ ìƒì„± ê¸°ëŠ¥ ì „ì²´ ë¹„êµ ë° ì •ë¦¬

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [í•™ìƒ ì˜ì—­ í”Œëœ ìƒì„±](#í•™ìƒ-ì˜ì—­-í”Œëœ-ìƒì„±)
3. [ê´€ë¦¬ì ì˜ì—­ í”Œëœ ìƒì„±](#ê´€ë¦¬ì-ì˜ì—­-í”Œëœ-ìƒì„±)
4. [ê¸°ëŠ¥ ë¹„êµí‘œ](#ê¸°ëŠ¥-ë¹„êµí‘œ)
5. [ê³µí†µ ì„œë²„ ì•¡ì…˜](#ê³µí†µ-ì„œë²„-ì•¡ì…˜)
6. [ë°ì´í„° íë¦„ ë¹„êµ](#ë°ì´í„°-íë¦„-ë¹„êµ)
7. [ì°¨ì´ì  ë° íŠ¹ì§•](#ì°¨ì´ì -ë°-íŠ¹ì§•)
8. [ê°œì„  ì œì•ˆ](#ê°œì„ -ì œì•ˆ)

---

## ê°œìš”

### í”Œëœ ìƒì„± ê¸°ëŠ¥ ë¶„ë¥˜

í”Œëœ ìƒì„± ê¸°ëŠ¥ì€ **ì‚¬ìš©ì ì—­í• **ê³¼ **ìƒì„± ë°©ì‹**ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ë¶„ë¥˜ë©ë‹ˆë‹¤:

```
í”Œëœ ìƒì„± ê¸°ëŠ¥
â”œâ”€â”€ í•™ìƒ ì˜ì—­
â”‚   â”œâ”€â”€ ì „ì²´ í”Œëœ ìƒì„± (7ë‹¨ê³„ ìœ„ìë“œ)
â”‚   â”œâ”€â”€ ë¹ ë¥¸ ìƒì„± (3ë‹¨ê³„ ìœ„ìë“œ)
â”‚   â””â”€â”€ ì½˜í…ì¸ ë¡œ í”Œëœ ì¶”ê°€ (í…œí”Œë¦¿ ê¸°ë°˜)
â”‚
â””â”€â”€ ê´€ë¦¬ì ì˜ì—­
    â”œâ”€â”€ í”Œëœ ê·¸ë£¹ ìƒì„± (7ë‹¨ê³„ ìœ„ìë“œ)
    â”œâ”€â”€ AI í”Œëœ ìƒì„± (ê´€ë¦¬ì/ì»¨ì„¤í„´íŠ¸ ì „ìš©)
    â”œâ”€â”€ ì½˜í…ì¸  ì¶”ê°€ (flexible_contents)
    â””â”€â”€ ì¼íšŒì„± í”Œëœ ì¶”ê°€ (ad_hoc_plans)
```

### ì§„ì…ì  ë¹„êµ

| ì˜ì—­ | ì§„ì… ê²½ë¡œ | ì»´í¬ë„ŒíŠ¸ |
|------|----------|---------|
| **í•™ìƒ** | `/plan/create` â†’ ëª¨ë“œ ì„ íƒ | `ModeSelector` |
| **í•™ìƒ** | `/plan/new-group` | `PlanGroupWizard` (7ë‹¨ê³„) |
| **í•™ìƒ** | `/plan/quick-create` | `QuickPlanWizard` (3ë‹¨ê³„) |
| **ê´€ë¦¬ì** | `/admin/students/[id]/plans` | `AdminPlanManagement` |
| **ê´€ë¦¬ì** | â†’ [í”Œëœ ê·¸ë£¹] ë²„íŠ¼ | `AdminPlanCreationWizard7Step` (7ë‹¨ê³„) |
| **ê´€ë¦¬ì** | â†’ [AI ìƒì„±] ë²„íŠ¼ | `AdminAIPlanModal` |
| **ê´€ë¦¬ì** | â†’ [ì½˜í…ì¸  ì¶”ê°€] ë²„íŠ¼ | `AddContentModal` |
| **ê´€ë¦¬ì** | â†’ [ì¼íšŒì„± ì¶”ê°€] ë²„íŠ¼ | `AddAdHocModal` |

---

## í•™ìƒ ì˜ì—­ í”Œëœ ìƒì„±

### 1. ì „ì²´ í”Œëœ ìƒì„± (7ë‹¨ê³„ ìœ„ìë“œ)

**ê²½ë¡œ**: `/plan/new-group`  
**ì»´í¬ë„ŒíŠ¸**: `PlanGroupWizard.tsx`

#### ë‹¨ê³„ë³„ êµ¬ì„±

| ë‹¨ê³„ | ì»´í¬ë„ŒíŠ¸ | ì£¼ìš” ê¸°ëŠ¥ |
|------|---------|---------|
| **Step 1** | `Step1BasicInfo` | í”Œëœ ì´ë¦„, ëª©ì , ê¸°ê°„, ë¸”ë¡ì…‹, í•™ìƒ ìˆ˜ì¤€, ì „ëµ/ì·¨ì•½ê³¼ëª© |
| **Step 2** | `Step2TimeSettings` | í•™ì› ì¼ì •, ì œì™¸ì¼, ì‹œê°„ ì„¤ì • |
| **Step 3** | `Step3SchedulePreview` | ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ë³´ê¸° |
| **Step 4** | `Step4ContentSelection` | ì½˜í…ì¸  ì„ íƒ (ë§ˆìŠ¤í„°/í•™ìƒ ì½˜í…ì¸ ) |
| **Step 5** | (ê±´ë„ˆë›°ê¸°) | ì¶”ì²œ ì½˜í…ì¸  (ì„ íƒì‚¬í•­) |
| **Step 6** | `Step6FinalReview` | ìµœì¢… ê²€í†  |
| **Step 7** | `Step7ScheduleResult` | í”Œëœ ìƒì„± ë° ê²°ê³¼ |

#### ì£¼ìš” íŠ¹ì§•

- **Context ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬**: `PlanWizardContext` ì‚¬ìš©
- **ìë™ ì €ì¥**: ê° ë‹¨ê³„ì—ì„œ ìë™ ì €ì¥ (draft ìƒíƒœ)
- **í…œí”Œë¦¿ ëª¨ë“œ ì§€ì›**: ìº í”„ í…œí”Œë¦¿ ê¸°ë°˜ ìƒì„± ê°€ëŠ¥
- **AI í”Œëœ ìƒì„± ì°¨ë‹¨**: í•™ìƒì€ AI ìƒì„± ê¸°ëŠ¥ ì‚¬ìš© ë¶ˆê°€
- **ìŠ¬ë¡¯ ëª¨ë“œ**: ì½˜í…ì¸  ìŠ¬ë¡¯ ê¸°ë°˜ ì„ íƒ ì§€ì›

#### ë°ì´í„° ì €ì¥

```typescript
// ì„œë²„ ì•¡ì…˜: createPlanGroupAction
// ì €ì¥ ìœ„ì¹˜: plan_groups, plan_contents, plan_exclusions, academy_schedules
// ìƒíƒœ: draft â†’ active (í”Œëœ ìƒì„± í›„)
```

### 2. ë¹ ë¥¸ ìƒì„± (3ë‹¨ê³„ ìœ„ìë“œ)

**ê²½ë¡œ**: `/plan/quick-create`  
**ì»´í¬ë„ŒíŠ¸**: `QuickPlanWizard.tsx`

#### ë‹¨ê³„ë³„ êµ¬ì„±

| ë‹¨ê³„ | ì»´í¬ë„ŒíŠ¸ | ì£¼ìš” ê¸°ëŠ¥ |
|------|---------|---------|
| **Step 1** | `Step1ContentSelection` | ì½˜í…ì¸  ì„ íƒ (êµì¬/ê°•ì˜/ì»¤ìŠ¤í…€) |
| **Step 2** | `Step2Schedule` | ë‚ ì§œ, ìš”ì¼, í•™ìŠµ ìœ í˜• ì„¤ì • |
| **Step 3** | `Step3Confirmation` | í™•ì¸ ë° ìƒì„± |

#### ì£¼ìš” íŠ¹ì§•

- **ê°„ì†Œí™”ëœ UI**: í•„ìˆ˜ ì •ë³´ë§Œ ì…ë ¥
- **ë¹ ë¥¸ ìƒì„±**: 30ì´ˆ ë‚´ í”Œëœ ìƒì„± ê°€ëŠ¥
- **ë‹¨ì¼ ì½˜í…ì¸ **: í•œ ë²ˆì— í•˜ë‚˜ì˜ ì½˜í…ì¸ ë§Œ ì„ íƒ
- **ìë™ ê³„ì‚°**: ì¼ì¼ í•™ìŠµëŸ‰ ìë™ ì¶”ì²œ

#### ë°ì´í„° ì €ì¥

```typescript
// ì„œë²„ ì•¡ì…˜: createQuickPlan
// ì €ì¥ ìœ„ì¹˜: plan_groups (is_single_day: true), student_plan
// ìƒíƒœ: active (ì¦‰ì‹œ í™œì„±í™”)
```

### 3. ì½˜í…ì¸ ë¡œ í”Œëœ ì¶”ê°€

**ê²½ë¡œ**: `/plan` â†’ ê¸°ì¡´ í”Œëœ ê·¸ë£¹ ì„ íƒ  
**ì»´í¬ë„ŒíŠ¸**: `AddContentWizard.tsx`

#### ì£¼ìš” ê¸°ëŠ¥

- ê¸°ì¡´ í”Œëœ ê·¸ë£¹ì— ì½˜í…ì¸  ì¶”ê°€
- í…œí”Œë¦¿ ê¸°ë°˜ ì½˜í…ì¸  ì¶”ê°€
- 4ë‹¨ê³„ ìœ„ìë“œ

---

## ê´€ë¦¬ì ì˜ì—­ í”Œëœ ìƒì„±

### 1. í”Œëœ ê·¸ë£¹ ìƒì„± (7ë‹¨ê³„ ìœ„ìë“œ)

**ê²½ë¡œ**: `/admin/students/[id]/plans` â†’ [í”Œëœ ê·¸ë£¹] ë²„íŠ¼  
**ì»´í¬ë„ŒíŠ¸**: `AdminPlanCreationWizard7Step.tsx`

#### ë‹¨ê³„ë³„ êµ¬ì„±

| ë‹¨ê³„ | ì»´í¬ë„ŒíŠ¸ | ì£¼ìš” ê¸°ëŠ¥ |
|------|---------|---------|
| **Step 1** | `Step1BasicInfo` | í”Œëœ ì´ë¦„, ê¸°ê°„, ëª©ì , ë¸”ë¡ì…‹ |
| **Step 2** | `Step2TimeSettings` | í•™ì› ì¼ì •, ì œì™¸ì¼, ì‹œê°„ ì„¤ì • |
| **Step 3** | `Step3SchedulePreview` | ìŠ¤ì¼€ì¤„ ë¯¸ë¦¬ë³´ê¸° |
| **Step 4** | `Step4ContentSelection` | ì½˜í…ì¸  ì„ íƒ |
| **Step 5** | `Step5AllocationSettings` | ë°°ë¶„ ì„¤ì • (ì „ëµ/ì·¨ì•½ê³¼ëª©) |
| **Step 6** | `Step6FinalReview` | ìµœì¢… ê²€í†  |
| **Step 7** | `Step7GenerateResult` | í”Œëœ ìƒì„± ë° ê²°ê³¼ |

#### ì£¼ìš” íŠ¹ì§•

- **4-Layer Context íŒ¨í„´**: ë°ì´í„°, ë‹¨ê³„, ê²€ì¦, í”„ë¡œë°”ì´ë” ë¶„ë¦¬
- **ìë™ ì €ì¥**: `useAdminAutoSave` í›… ì‚¬ìš©
- **ì—ëŸ¬ ë°”ìš´ë”ë¦¬**: `AdminStepErrorBoundary` ì ìš©
- **í•™ìƒ ID ì§ì ‘ ì§€ì •**: ê´€ë¦¬ì ëª¨ë“œì—ì„œ `studentId` ì˜µì…˜ìœ¼ë¡œ ì§€ì •

#### ë°ì´í„° ì €ì¥

```typescript
// ì„œë²„ ì•¡ì…˜: createPlanGroupAction (options.studentId ì§€ì •)
// ì €ì¥ ìœ„ì¹˜: plan_groups, plan_contents, plan_exclusions, academy_schedules
// ìƒíƒœ: draft â†’ active
```

### 2. AI í”Œëœ ìƒì„±

**ê²½ë¡œ**: `/admin/students/[id]/plans` â†’ [AI ìƒì„±] ë²„íŠ¼  
**ì»´í¬ë„ŒíŠ¸**: `AdminAIPlanModal.tsx`

#### ì£¼ìš” ê¸°ëŠ¥

- **ê´€ë¦¬ì/ì»¨ì„¤í„´íŠ¸ ì „ìš©**: í•™ìƒì€ ì‚¬ìš© ë¶ˆê°€
- **ìŠ¤íŠ¸ë¦¬ë° ìƒì„±**: ì‹¤ì‹œê°„ ìƒì„± ì§„í–‰ ìƒí™© í‘œì‹œ
- **ë¯¸ë¦¬ë³´ê¸°**: ìƒì„± ê²°ê³¼ í™•ì¸ í›„ ì ìš©
- **ë¶€ë¶„ ì¬ìƒì„±**: íŠ¹ì • ì£¼ì°¨ë§Œ ì¬ìƒì„± ê°€ëŠ¥

#### í•„ìˆ˜ ì¡°ê±´

- `activePlanGroupId` í•„ìš” (í™œì„± í”Œëœ ê·¸ë£¹ì´ ìˆì–´ì•¼ í•¨)

### 3. ì½˜í…ì¸  ì¶”ê°€

**ê²½ë¡œ**: `/admin/students/[id]/plans` â†’ [ì½˜í…ì¸  ì¶”ê°€] ë²„íŠ¼  
**ì»´í¬ë„ŒíŠ¸**: `AddContentModal.tsx`

#### ì£¼ìš” ê¸°ëŠ¥

- êµì¬/ê°•ì˜ ì„ íƒ
- í•™ìŠµ ë²”ìœ„ ì„¤ì •
- íŠ¹ì • ë‚ ì§œì— í”Œëœ ì¶”ê°€
- `flexible_contents` ìƒì„±

#### ì œí•œì‚¬í•­

- í”Œëœ ê·¸ë£¹ì„ ì§ì ‘ ìƒì„±í•˜ì§€ ì•ŠìŒ
- `flexible_contents`ë§Œ ìƒì„±í•˜ì—¬ ë‚˜ì¤‘ì— í”Œëœ ê·¸ë£¹ì— ì—°ê²°

### 4. ì¼íšŒì„± í”Œëœ ì¶”ê°€

**ê²½ë¡œ**: `/admin/students/[id]/plans` â†’ [ì¼íšŒì„± ì¶”ê°€] ë²„íŠ¼  
**ì»´í¬ë„ŒíŠ¸**: `AddAdHocModal.tsx`

#### ì£¼ìš” ê¸°ëŠ¥

- ì œëª©, ì„¤ëª… ì…ë ¥
- ë‚ ì§œ ë° ì‹œê°„ ì„¤ì •
- ë°˜ë³µ ê·œì¹™ ì„¤ì • (ì„ íƒ)
- ì½˜í…ì¸  ì—°ê²° (ì„ íƒ)
- `ad_hoc_plans` ìƒì„±

#### í•„ìˆ˜ ì¡°ê±´

- `activePlanGroupId` í•„ìš”

---

## ê¸°ëŠ¥ ë¹„êµí‘œ

### ìœ„ìë“œ ë¹„êµ

| ê¸°ëŠ¥ | í•™ìƒ (7ë‹¨ê³„) | ê´€ë¦¬ì (7ë‹¨ê³„) | í•™ìƒ (ë¹ ë¥¸ ìƒì„±) |
|------|-------------|---------------|----------------|
| **ê²½ë¡œ** | `/plan/new-group` | `/admin/students/[id]/plans` | `/plan/quick-create` |
| **ë‹¨ê³„ ìˆ˜** | 7ë‹¨ê³„ | 7ë‹¨ê³„ | 3ë‹¨ê³„ |
| **ìë™ ì €ì¥** | âœ… | âœ… | âŒ |
| **AI ìƒì„±** | âŒ (ì°¨ë‹¨ë¨) | âœ… (ê´€ë¦¬ì ì „ìš©) | âŒ |
| **í…œí”Œë¦¿ ëª¨ë“œ** | âœ… | âŒ | âŒ |
| **ìŠ¬ë¡¯ ëª¨ë“œ** | âœ… | âœ… | âŒ |
| **í•™ìƒ ID** | ìë™ (í˜„ì¬ ì‚¬ìš©ì) | ì˜µì…˜ìœ¼ë¡œ ì§€ì • | ìë™ (í˜„ì¬ ì‚¬ìš©ì) |
| **Context íŒ¨í„´** | `PlanWizardContext` | 4-Layer Context | `UnifiedWizardProvider` |

### ìƒì„± ë°©ì‹ ë¹„êµ

| ë°©ì‹ | í•™ìƒ ì˜ì—­ | ê´€ë¦¬ì ì˜ì—­ | ì„¤ëª… |
|------|----------|------------|------|
| **ì „ì²´ ìœ„ìë“œ** | âœ… | âœ… | 7ë‹¨ê³„ ìƒì„¸ ì„¤ì • |
| **ë¹ ë¥¸ ìƒì„±** | âœ… | âŒ | ê°„ì†Œí™”ëœ 3ë‹¨ê³„ |
| **ì½˜í…ì¸  ì¶”ê°€** | âœ… (í…œí”Œë¦¿) | âœ… (flexible_contents) | ê¸°ì¡´ í”Œëœì— ì¶”ê°€ |
| **ì¼íšŒì„± í”Œëœ** | âŒ | âœ… | ad_hoc_plans |
| **AI ìƒì„±** | âŒ | âœ… | ê´€ë¦¬ì ì „ìš© |

### ê¶Œí•œ ë¹„êµ

| ê¸°ëŠ¥ | í•™ìƒ | ê´€ë¦¬ì | ì»¨ì„¤í„´íŠ¸ |
|------|------|--------|---------|
| **ìê¸° í”Œëœ ìƒì„±** | âœ… | âŒ | âŒ |
| **ë‹¤ë¥¸ í•™ìƒ í”Œëœ ìƒì„±** | âŒ | âœ… | âœ… |
| **AI í”Œëœ ìƒì„±** | âŒ | âœ… | âœ… |
| **í”Œëœ ìˆ˜ì •** | âœ… (ìê¸° ê²ƒë§Œ) | âœ… (ëª¨ë“  í•™ìƒ) | âœ… (ëª¨ë“  í•™ìƒ) |

---

## ê³µí†µ ì„œë²„ ì•¡ì…˜

### createPlanGroupAction

**ìœ„ì¹˜**: `lib/domains/plan/actions/plan-groups/create.ts`

**ì‚¬ìš©ì²˜**:
- í•™ìƒ: `PlanGroupWizard` (Step 7)
- ê´€ë¦¬ì: `AdminPlanCreationWizard7Step` (Step 7)

**ì°¨ì´ì **:

```typescript
// í•™ìƒ ëª¨ë“œ
const result = await createPlanGroupAction(data);
// studentIdëŠ” ìë™ìœ¼ë¡œ í˜„ì¬ ì‚¬ìš©ì ID ì‚¬ìš©

// ê´€ë¦¬ì ëª¨ë“œ
const result = await createPlanGroupAction(data, {
  skipContentValidation: true,
  studentId: studentId, // ì§ì ‘ ì§€ì •
});
```

### createQuickPlan

**ìœ„ì¹˜**: `lib/domains/plan/actions/contentPlanGroup/quickCreate.ts`

**ì‚¬ìš©ì²˜**:
- í•™ìƒ: `QuickPlanWizard` (Step 3)

**íŠ¹ì§•**:
- ë‹¨ì¼ ë‚ ì§œ í”Œëœ ìƒì„± (`is_single_day: true`)
- ì¦‰ì‹œ í™œì„±í™” (`status: 'active'`)

### ê¸°íƒ€ ì„œë²„ ì•¡ì…˜

| ì•¡ì…˜ | í•™ìƒ | ê´€ë¦¬ì | ì„¤ëª… |
|------|------|--------|------|
| `savePlanGroupDraftAction` | âœ… | âœ… | ì„ì‹œ ì €ì¥ |
| `updatePlanGroupDraftAction` | âœ… | âœ… | draft ì—…ë°ì´íŠ¸ |
| `generatePlansFromGroupAction` | âœ… | âœ… | í”Œëœ ìƒì„± |
| `createStudentAdHocPlan` | âŒ | âœ… | ì¼íšŒì„± í”Œëœ |
| `createFlexibleContent` | âŒ | âœ… | flexible_contents |

---

## ë°ì´í„° íë¦„ ë¹„êµ

### í•™ìƒ ì˜ì—­ (7ë‹¨ê³„ ìœ„ìë“œ)

```
1. PlanGroupWizard ì‹œì‘
   â†“
2. ê° ë‹¨ê³„ì—ì„œ ë°ì´í„° ì…ë ¥
   - PlanWizardContextì— ì €ì¥
   - ìë™ ì €ì¥ (draft)
   â†“
3. Step 7ì—ì„œ ì œì¶œ
   â†“
4. createPlanGroupAction í˜¸ì¶œ
   - requireStudentAuth() â†’ studentId ìë™
   â†“
5. _createPlanGroup ì‹¤í–‰
   - ê²€ì¦
   - ê¸°ì¡´ draft í™•ì¸
   - ê¸°ê°„ ì¤‘ë³µ ê²€ì¦
   â†“
6. createPlanGroupAtomic (RPC)
   - íŠ¸ëœì­ì…˜ ë‚´ ìƒì„±
   â†“
7. generatePlansFromGroupAction
   - student_plan ìƒì„±
   â†“
8. ìƒíƒœ ë³€ê²½: draft â†’ active
```

### ê´€ë¦¬ì ì˜ì—­ (7ë‹¨ê³„ ìœ„ìë“œ)

```
1. AdminPlanCreationWizard7Step ì‹œì‘
   â†“
2. ê° ë‹¨ê³„ì—ì„œ ë°ì´í„° ì…ë ¥
   - 4-Layer Contextì— ì €ì¥
   - ìë™ ì €ì¥ (useAdminAutoSave)
   â†“
3. Step 7ì—ì„œ ì œì¶œ
   â†“
4. createPlanGroupAction í˜¸ì¶œ
   - requireAdminOrConsultant()
   - options.studentId ì§€ì •
   â†“
5. _createPlanGroup ì‹¤í–‰
   - ê²€ì¦ (skipContentValidation: true)
   - ê¸°ì¡´ draft í™•ì¸
   - ê¸°ê°„ ì¤‘ë³µ ê²€ì¦
   â†“
6. createPlanGroupAtomic (RPC)
   - íŠ¸ëœì­ì…˜ ë‚´ ìƒì„±
   â†“
7. ê²°ê³¼ ë°˜í™˜
   - AI ì˜µì…˜ì´ë©´ AdminAIPlanModal ì—´ê¸°
```

### í•™ìƒ ì˜ì—­ (ë¹ ë¥¸ ìƒì„±)

```
1. QuickPlanWizard ì‹œì‘
   â†“
2. Step 1: ì½˜í…ì¸  ì„ íƒ
   â†“
3. Step 2: ìŠ¤ì¼€ì¤„ ì„¤ì •
   â†“
4. Step 3: í™•ì¸ ë° ì œì¶œ
   â†“
5. createQuickPlan í˜¸ì¶œ
   - plan_groups ìƒì„± (is_single_day: true)
   - student_plan ìƒì„±
   â†“
6. ì¦‰ì‹œ í™œì„±í™” (status: 'active')
```

---

## ì°¨ì´ì  ë° íŠ¹ì§•

### 1. ê¶Œí•œ ì²˜ë¦¬

#### í•™ìƒ ì˜ì—­
```typescript
// lib/domains/plan/actions/plan-groups/create.ts
const studentAuth = await requireStudentAuth();
studentId = studentAuth.userId; // ìë™ìœ¼ë¡œ í˜„ì¬ ì‚¬ìš©ì
```

#### ê´€ë¦¬ì ì˜ì—­
```typescript
// lib/domains/plan/actions/plan-groups/create.ts
await requireAdminOrConsultant();
if (options?.studentId) {
  studentId = options.studentId; // ì§ì ‘ ì§€ì •
}
```

### 2. ê²€ì¦ ì²˜ë¦¬

#### í•™ìƒ ì˜ì—­
- ëª¨ë“  ê²€ì¦ ìˆ˜í–‰
- ì½˜í…ì¸  ê²€ì¦ í¬í•¨

#### ê´€ë¦¬ì ì˜ì—­
- `skipContentValidation: true` ì˜µì…˜
- ê´€ë¦¬ìê°€ ì§ì ‘ ê²€ì¦í•˜ë¯€ë¡œ ì¼ë¶€ ê²€ì¦ ê±´ë„ˆë›°ê¸°

### 3. AI í”Œëœ ìƒì„±

#### í•™ìƒ ì˜ì—­
- âŒ **ì°¨ë‹¨ë¨**: `canUseAI` ì¡°ê±´ìœ¼ë¡œ ë Œë”ë§ ì°¨ë‹¨
- Step 3ì—ì„œ AI ë²„íŠ¼ í‘œì‹œ ì•ˆ ë¨

#### ê´€ë¦¬ì ì˜ì—­
- âœ… **ì‚¬ìš© ê°€ëŠ¥**: ê´€ë¦¬ì/ì»¨ì„¤í„´íŠ¸ë§Œ ì ‘ê·¼
- `AdminAIPlanModal` ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©

### 4. ìƒíƒœ ê´€ë¦¬ íŒ¨í„´

#### í•™ìƒ ì˜ì—­
- `PlanWizardContext`: ë‹¨ì¼ Context
- `usePlanWizard` í›… ì‚¬ìš©

#### ê´€ë¦¬ì ì˜ì—­
- **4-Layer Context íŒ¨í„´**:
  - `AdminWizardDataContext`: ë°ì´í„°
  - `AdminWizardStepContext`: ë‹¨ê³„
  - `AdminWizardValidationContext`: ê²€ì¦
  - `AdminWizardProvider`: í†µí•©

### 5. ìë™ ì €ì¥

#### í•™ìƒ ì˜ì—­
- ê° ë‹¨ê³„ì—ì„œ ìë™ ì €ì¥
- `savePlanGroupDraftAction` í˜¸ì¶œ

#### ê´€ë¦¬ì ì˜ì—­
- `useAdminAutoSave` í›… ì‚¬ìš©
- ë””ë°”ìš´ì‹± ì ìš©

### 6. ì—ëŸ¬ ì²˜ë¦¬

#### í•™ìƒ ì˜ì—­
- ì¼ë°˜ì ì¸ ì—ëŸ¬ ì²˜ë¦¬
- Toast ì•Œë¦¼

#### ê´€ë¦¬ì ì˜ì—­
- `AdminStepErrorBoundary` ì ìš©
- ë‹¨ê³„ë³„ ì—ëŸ¬ ë°”ìš´ë”ë¦¬

---

## ê°œì„  ì œì•ˆ

### 1. í†µí•© ê°œì„ 

#### ë¬¸ì œì 
- í•™ìƒê³¼ ê´€ë¦¬ì ìœ„ìë“œê°€ ê±°ì˜ ë™ì¼í•˜ì§€ë§Œ ì½”ë“œ ì¤‘ë³µ
- Context íŒ¨í„´ì´ ë‹¤ë¦„ (í•™ìƒ: ë‹¨ì¼, ê´€ë¦¬ì: 4-Layer)

#### ê°œì„ ì•ˆ
- ê³µí†µ ìœ„ìë“œ ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ
- Context íŒ¨í„´ í†µì¼ (4-Layerë¡œ í†µì¼ ê¶Œì¥)
- ëª¨ë“œë³„ ì˜µì…˜ìœ¼ë¡œ ë¶„ê¸° ì²˜ë¦¬

### 2. ê´€ë¦¬ì ì˜ì—­ ê°œì„ 

#### ë¬¸ì œì 
- ë¹ ë¥¸ ìƒì„± ê¸°ëŠ¥ ì—†ìŒ
- AddContentModalì´ í”Œëœ ê·¸ë£¹ì„ ì§ì ‘ ìƒì„±í•˜ì§€ ì•ŠìŒ

#### ê°œì„ ì•ˆ
- ê´€ë¦¬ììš© ë¹ ë¥¸ ìƒì„± ëª¨ë‹¬ ì¶”ê°€
- AddContentModalì—ì„œ í”Œëœ ê·¸ë£¹ ì§ì ‘ ìƒì„± ì˜µì…˜ ì¶”ê°€

### 3. í•™ìƒ ì˜ì—­ ê°œì„ 

#### ë¬¸ì œì 
- ì¼íšŒì„± í”Œëœ ì¶”ê°€ ê¸°ëŠ¥ ì—†ìŒ
- AI ìƒì„± ê¸°ëŠ¥ ì°¨ë‹¨ (ì˜ë„ëœ ê²ƒì´ì§€ë§Œ UX ê°œì„  ê°€ëŠ¥)

#### ê°œì„ ì•ˆ
- í•™ìƒìš© ì¼íšŒì„± í”Œëœ ì¶”ê°€ ê¸°ëŠ¥ ì¶”ê°€
- AI ìƒì„± ì°¨ë‹¨ ì‹œ ì•ˆë‚´ ë©”ì‹œì§€ ê°œì„ 

### 4. ê³µí†µ ê¸°ëŠ¥ ê°œì„ 

#### ë¬¸ì œì 
- ìë™ ì €ì¥ ë¡œì§ì´ ë‹¤ë¦„
- ì—ëŸ¬ ì²˜ë¦¬ ë°©ì‹ì´ ë‹¤ë¦„

#### ê°œì„ ì•ˆ
- ê³µí†µ ìë™ ì €ì¥ í›… ì¶”ì¶œ
- ê³µí†µ ì—ëŸ¬ ë°”ìš´ë”ë¦¬ ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ

---

## ì°¸ê³  íŒŒì¼

### í•™ìƒ ì˜ì—­
- `app/(student)/plan/new-group/_components/PlanGroupWizard.tsx`
- `app/(student)/plan/quick-create/_components/QuickPlanWizard.tsx`
- `app/(student)/plan/create/_components/ModeSelector.tsx`

### ê´€ë¦¬ì ì˜ì—­
- `app/(admin)/admin/students/[id]/plans/_components/AdminPlanManagement.tsx`
- `app/(admin)/admin/students/[id]/plans/_components/admin-wizard/AdminPlanCreationWizard7Step.tsx`
- `app/(admin)/admin/students/[id]/plans/_components/AddContentModal.tsx`
- `app/(admin)/admin/students/[id]/plans/_components/AddAdHocModal.tsx`

### ì„œë²„ ì•¡ì…˜
- `lib/domains/plan/actions/plan-groups/create.ts`
- `lib/domains/plan/actions/contentPlanGroup/quickCreate.ts`
- `lib/domains/admin-plan/actions/adHocPlan.ts`

### ë¬¸ì„œ
- `docs/admin-plan-assignment-flow.md`
- `docs/2025-02-02-admin-plan-creation-feature-analysis.md`
- `docs/í”Œëœ_ê·¸ë£¹_ìƒì„±_ì €ì¥_ì •ë³´.md`

---

## ê²°ë¡ 

### í˜„ì¬ ìƒíƒœ

1. **í•™ìƒ ì˜ì—­**: 3ê°€ì§€ ìƒì„± ë°©ì‹ ì œê³µ (ì „ì²´, ë¹ ë¥¸, ì½˜í…ì¸  ì¶”ê°€)
2. **ê´€ë¦¬ì ì˜ì—­**: 4ê°€ì§€ ìƒì„± ë°©ì‹ ì œê³µ (ì „ì²´, AI, ì½˜í…ì¸  ì¶”ê°€, ì¼íšŒì„±)
3. **ê³µí†µì **: 7ë‹¨ê³„ ìœ„ìë“œëŠ” ê±°ì˜ ë™ì¼í•œ êµ¬ì¡°
4. **ì°¨ì´ì **: ê¶Œí•œ ì²˜ë¦¬, ê²€ì¦, AI ìƒì„± ì ‘ê·¼ì„±

### ê¶Œì¥ ê°œì„  ì‚¬í•­

1. **ìš°ì„ ìˆœìœ„ HIGH**
   - ê³µí†µ ìœ„ìë“œ ì»´í¬ë„ŒíŠ¸ ì¶”ì¶œ
   - ê´€ë¦¬ììš© ë¹ ë¥¸ ìƒì„± ì¶”ê°€
   - AddContentModal ê°œì„  (í”Œëœ ê·¸ë£¹ ì§ì ‘ ìƒì„±)

2. **ìš°ì„ ìˆœìœ„ MEDIUM**
   - Context íŒ¨í„´ í†µì¼
   - ìë™ ì €ì¥ ë¡œì§ í†µí•©
   - ì—ëŸ¬ ì²˜ë¦¬ í†µí•©

3. **ìš°ì„ ìˆœìœ„ LOW**
   - í•™ìƒìš© ì¼íšŒì„± í”Œëœ ì¶”ê°€
   - AI ìƒì„± ì°¨ë‹¨ UX ê°œì„ 

---

*ìµœì¢… ì—…ë°ì´íŠ¸: 2025-02-02*

