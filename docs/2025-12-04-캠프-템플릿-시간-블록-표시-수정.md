# μΊ ν”„ ν…ν”λ¦Ώ μ‹κ°„ λΈ”λ΅ ν‘μ‹ λ¬Έμ  ν•΄κ²°

## π” λ¬Έμ  μƒν™©

ν•™μƒμ μΊ ν”„ ν…ν”λ¦Ώ μƒμ„Έλ³΄κΈ° νμ΄μ§€(`/camp/[invitationId]/submitted`)μ—μ„ μ‹κ°„ λΈ”λ΅μ΄ ν‘μ‹λμ§€ μ•λ” λ¬Έμ κ°€ λ°μƒν–μµλ‹λ‹¤.

## π” μ›μΈ λ¶„μ„

`getPlanGroupById` ν•¨μμ fallback μΏΌλ¦¬μ—μ„ `scheduler_options` μ»¬λΌμ΄ μ μ™Έλμ–΄ μμ—μµλ‹λ‹¤:

1. λ©”μΈ μΏΌλ¦¬μ—μ„λ” `scheduler_options`λ¥Ό ν¬ν•¨ν•μ—¬ μ΅°ν
2. μ»¬λΌ μ—λ¬(42703) λ°μƒ μ‹ fallback μΏΌλ¦¬λ΅ μ „ν™
3. **fallback μΏΌλ¦¬μ—μ„ `scheduler_options`κ°€ μ μ™Έλ¨**
4. κ²°κ³Όμ μΌλ΅ `scheduler_options`κ°€ `null`λ΅ μ„¤μ •λμ–΄ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό μ°Ύμ„ μ μ—†μ

## β… ν•΄κ²° λ°©λ²•

`getPlanGroupById` ν•¨μμ fallback λ΅μ§μ„ κ°μ„ ν•μ—¬:

1. **λ¨Όμ € `scheduler_options`λ¥Ό ν¬ν•¨ν• fallback μΏΌλ¦¬ μ‹λ„**
   - λ€λ¶€λ¶„μ κ²½μ° `scheduler_options` μ»¬λΌμ΄ μ΅΄μ¬ν•λ―€λ΅ μ •μƒ μ΅°νλ¨

2. **μ—¬μ „ν μ—λ¬κ°€ λ°μƒν•λ©΄ `scheduler_options`λ¥Ό μ μ™Έν• μµμΆ… fallback μΏΌλ¦¬ μ‚¬μ©**
   - μ¤λλ λ°μ΄ν„°λ² μ΄μ¤λ‚ λ§μ΄κ·Έλ μ΄μ… μ „ ν™κ²½μ„ μ„ν• ν•μ„ νΈν™μ„±

## π“‹ λ³€κ²½ μ‚¬ν•­

### `lib/data/planGroups.ts`

**λ³€κ²½ μ „:**
```typescript
// fallback μΏΌλ¦¬μ—μ„ scheduler_options μ μ™Έ
const fallbackSelect = () =>
  supabase
    .from("plan_groups")
    .select(
      "id,tenant_id,student_id,name,plan_purpose,scheduler_type,period_start,..."
      // scheduler_options μ μ™Έ
    )
```

**λ³€κ²½ ν›„:**
```typescript
// λ¨Όμ € scheduler_options ν¬ν•¨ν•μ—¬ μ‹λ„
const fallbackSelectWithScheduler = () =>
  supabase
    .from("plan_groups")
    .select(
      "id,tenant_id,student_id,name,plan_purpose,scheduler_type,scheduler_options,period_start,..."
      // scheduler_options ν¬ν•¨
    )

// μ—¬μ „ν μ—λ¬κ°€ λ°μƒν•λ©΄ scheduler_options μ μ™Έν• μµμΆ… fallback
if (error && error.code === "42703") {
  const fallbackSelectWithoutScheduler = () =>
    // scheduler_options μ μ™Έ
}
```

## π― ν¨κ³Ό

- `getPlanGroupWithDetails`λ¥Ό ν†µν•΄ μ΅°νλ `group` κ°μ²΄μ— `scheduler_options`κ°€ μ •μƒμ μΌλ΅ ν¬ν•¨λ¨
- `submitted/page.tsx`μ—μ„ `scheduler_options.template_block_set_id`λ¥Ό ν†µν•΄ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό μ°Ύμ„ μ μμ
- μ‹κ°„ λΈ”λ΅μ΄ μ •μƒμ μΌλ΅ ν‘μ‹λ¨

## π”— κ΄€λ ¨ νμΌ

- `lib/data/planGroups.ts` - `getPlanGroupById` ν•¨μ μμ •
- `app/(student)/camp/[invitationId]/submitted/page.tsx` - λΈ”λ΅ μ„ΈνΈ μ΅°ν λ΅μ§ (λ³€κ²½ μ—†μ, μ •μƒ μ‘λ™)

## π“ μ°Έκ³ 

μ΄ μμ •μΌλ΅ `submitted/page.tsx`μ μ§μ ‘ μ΅°ν λ΅μ§(177-192λ²μ§Έ μ¤„)μ€ μ—¬μ „ν μ‘λ™ν•μ§€λ§, μ΄μ λ” `getPlanGroupWithDetails`μ—μ„ μ΄λ―Έ `scheduler_options`λ¥Ό ν¬ν•¨ν•μ—¬ μ΅°νν•λ―€λ΅ λ€λ¶€λ¶„μ κ²½μ° μ§μ ‘ μ΅°νκ°€ ν•„μ” μ—†μµλ‹λ‹¤.

