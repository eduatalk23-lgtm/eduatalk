# í•™ìƒ ë° í•™ë¶€ëª¨ ê¸°ê´€ ì •ë³´ ë©”ë‰´ UI ì¶”ê°€

**ì‘ì—…ì¼**: 2025-02-02  
**ì‘ì—…ì**: AI Assistant  
**ëª©ì **: í•™ìƒê³¼ í•™ë¶€ëª¨ í˜ì´ì§€ì—ì„œë„ ë³¸ì¸ ê¸°ê´€ ì •ë³´ë¥¼ ì‚¬ì´ë“œë°”ì— í‘œì‹œí•˜ë„ë¡ í™•ì¥

---

## ê°œì„  ë‚´ìš©

### 1. í•™ìƒ ë° í•™ë¶€ëª¨ë„ ê¸°ê´€ ì •ë³´ í‘œì‹œ

**ëª©ì **: Admin/Consultantë¿ë§Œ ì•„ë‹ˆë¼ Studentì™€ Parent ì‚¬ìš©ìë„ í˜„ì¬ ì†Œì† ê¸°ê´€ì„ ì‚¬ì´ë“œë°”ì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í™•ì¥

**ë³€ê²½ ì‚¬í•­**:
- ê¸°ì¡´: Admin/Consultantë§Œ ê¸°ê´€ ì •ë³´ í‘œì‹œ
- ê°œì„ : Student, Parent, Admin, Consultant ëª¨ë‘ ê¸°ê´€ ì •ë³´ í‘œì‹œ (Superadmin ì œì™¸)

---

## êµ¬í˜„ ì‚¬í•­

### 1. RoleBasedLayout ì»´í¬ë„ŒíŠ¸ ìˆ˜ì •

**íŒŒì¼**: `components/layout/RoleBasedLayout.tsx`

**ë³€ê²½ ì‚¬í•­**:
1. í‘œì‹œ ì¡°ê±´ ìˆ˜ì •
   - ê¸°ì¡´: `role === "admin" || role === "consultant"`ë§Œ í‘œì‹œ
   - ê°œì„ : `role !== "superadmin"` (Superadmin ì œì™¸ ëª¨ë“  ì—­í•  í‘œì‹œ)

2. ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°”ì™€ ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ëª¨ë‘ ë™ì¼í•œ ì¡°ê±´ ì ìš©

**ì½”ë“œ ë³€ê²½**:
```typescript
// ìˆ˜ì • ì „
{tenantInfo && (role === "admin" || role === "consultant") && (
  // ê¸°ê´€ ì •ë³´ í‘œì‹œ
)}

// ìˆ˜ì • í›„
{tenantInfo && role !== "superadmin" && (
  // ê¸°ê´€ ì •ë³´ í‘œì‹œ
)}
```

---

### 2. Student Layout ê°œì„ 

**íŒŒì¼**: `app/(student)/layout.tsx`

**ë³€ê²½ ì‚¬í•­**:
1. ê¸°ê´€ ì •ë³´ ì¡°íšŒ ë¡œì§ ì¶”ê°€
   - `getTenantContext()`ë¡œ í˜„ì¬ í•™ìƒì˜ tenantId ì¡°íšŒ
   - `tenants` í…Œì´ë¸”ì—ì„œ ê¸°ê´€ ì´ë¦„ê³¼ ìœ í˜• ì¡°íšŒ

2. RoleBasedLayoutì— tenantInfo ì „ë‹¬

**êµ¬í˜„ ì½”ë“œ**:
```typescript
// ê¸°ê´€ ì •ë³´ ì¡°íšŒ
let tenantInfo = null;
const tenantContext = await getTenantContext();
if (tenantContext?.tenantId) {
  const supabase = await createSupabaseServerClient();
  const { data: tenant } = await supabase
    .from("tenants")
    .select("name, type")
    .eq("id", tenantContext.tenantId)
    .maybeSingle();

  if (tenant) {
    tenantInfo = {
      name: tenant.name,
      type: tenant.type || undefined,
    };
  }
}
```

---

### 3. Parent Layout ê°œì„ 

**íŒŒì¼**: `app/(parent)/layout.tsx`

**ë³€ê²½ ì‚¬í•­**:
1. ê¸°ê´€ ì •ë³´ ì¡°íšŒ ë¡œì§ ì¶”ê°€
   - `getTenantContext()`ë¡œ í˜„ì¬ í•™ë¶€ëª¨ì˜ tenantId ì¡°íšŒ
   - `tenants` í…Œì´ë¸”ì—ì„œ ê¸°ê´€ ì´ë¦„ê³¼ ìœ í˜• ì¡°íšŒ

2. RoleBasedLayoutì— tenantInfo ì „ë‹¬

**êµ¬í˜„ ì½”ë“œ**: Student Layoutê³¼ ë™ì¼í•œ íŒ¨í„´ ì ìš©

---

## í‘œì‹œ ì¡°ê±´ ì •ë¦¬

### í‘œì‹œë˜ëŠ” ì—­í• 
- âœ… **Student** (í•™ìƒ)
- âœ… **Parent** (í•™ë¶€ëª¨)
- âœ… **Admin** (ê´€ë¦¬ì)
- âœ… **Consultant** (ì»¨ì„¤í„´íŠ¸)

### í‘œì‹œë˜ì§€ ì•ŠëŠ” ì—­í• 
- âŒ **Superadmin** (ìŠˆí¼ ê´€ë¦¬ì) - ëª¨ë“  ê¸°ê´€ì— ì ‘ê·¼ ê°€ëŠ¥í•˜ë¯€ë¡œ íŠ¹ì • ê¸°ê´€ ì •ë³´ ë¶ˆí•„ìš”

---

## ê´€ë ¨ íŒŒì¼

### ìˆ˜ì •ëœ íŒŒì¼

1. **`components/layout/RoleBasedLayout.tsx`**
   - í‘œì‹œ ì¡°ê±´ì„ Superadmin ì œì™¸ ëª¨ë“  ì—­í• ë¡œ ë³€ê²½
   - ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°”ì™€ ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ ëª¨ë‘ ìˆ˜ì •

2. **`app/(student)/layout.tsx`**
   - ê¸°ê´€ ì •ë³´ ì¡°íšŒ ë¡œì§ ì¶”ê°€
   - RoleBasedLayoutì— tenantInfo ì „ë‹¬

3. **`app/(parent)/layout.tsx`**
   - ê¸°ê´€ ì •ë³´ ì¡°íšŒ ë¡œì§ ì¶”ê°€
   - RoleBasedLayoutì— tenantInfo ì „ë‹¬

### ì‚¬ìš©ëœ ìœ í‹¸ë¦¬í‹°

- `lib/tenant/getTenantContext.ts` - í˜„ì¬ ì‚¬ìš©ìì˜ tenantId ì¡°íšŒ
- `lib/supabase/server.ts` - Supabase ì„œë²„ í´ë¼ì´ì–¸íŠ¸

---

## ê²°ê³¼

### ê°œì„  ì „
- âœ… Admin/Consultantë§Œ ê¸°ê´€ ì •ë³´ í‘œì‹œ
- âŒ Student/ParentëŠ” ê¸°ê´€ ì •ë³´ ë¯¸í‘œì‹œ

### ê°œì„  í›„
- âœ… Studentë„ ì‚¬ì´ë“œë°”ì—ì„œ ë³¸ì¸ ê¸°ê´€ í™•ì¸ ê°€ëŠ¥
- âœ… Parentë„ ì‚¬ì´ë“œë°”ì—ì„œ ë³¸ì¸ ê¸°ê´€ í™•ì¸ ê°€ëŠ¥
- âœ… Admin/ConsultantëŠ” ê¸°ì¡´ê³¼ ë™ì¼í•˜ê²Œ í‘œì‹œ
- âœ… Superadminì€ í‘œì‹œí•˜ì§€ ì•ŠìŒ (ëª¨ë“  ê¸°ê´€ ì ‘ê·¼ ê°€ëŠ¥)

---

## UI ê°œì„  ìƒì„¸

### í•™ìƒ ì‚¬ì´ë“œë°” ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â±ï¸ TimeLevelUp í•™ìƒ     â”‚  â† ë¡œê³ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¢ OOí•™ì›               â”‚  â† ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ê´€ ì •ë³´
â”‚    í•™ì›                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ëŒ€ì‹œë³´ë“œ            â”‚  â† ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´
â”‚ ğŸ•ï¸ ìº í”„ ê´€ë¦¬           â”‚
â”‚ ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•™ë¶€ëª¨ ì‚¬ì´ë“œë°” ì˜ˆì‹œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â±ï¸ TimeLevelUp Parent   â”‚  â† ë¡œê³ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¢ OOí•™ì›               â”‚  â† ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ê´€ ì •ë³´
â”‚    í•™ì›                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“Š ëŒ€ì‹œë³´ë“œ            â”‚  â† ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´
â”‚ ğŸ“„ ë¦¬í¬íŠ¸              â”‚
â”‚ ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] Student ì—­í•  ì‚¬ìš©ìì—ì„œ ê¸°ê´€ ì •ë³´ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [x] Parent ì—­í•  ì‚¬ìš©ìì—ì„œ ê¸°ê´€ ì •ë³´ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [x] Admin ì—­í•  ì‚¬ìš©ìì—ì„œ ê¸°ê´€ ì •ë³´ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
- [x] Consultant ì—­í•  ì‚¬ìš©ìì—ì„œ ê¸°ê´€ ì •ë³´ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
- [x] Superadmin ì—­í•  ì‚¬ìš©ìì—ì„œ ê¸°ê´€ ì •ë³´ê°€ í‘œì‹œë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
- [x] ê¸°ê´€ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° í‘œì‹œë˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸
- [x] ë°ìŠ¤í¬í†± ì‚¬ì´ë“œë°”ì— ê¸°ê´€ ì •ë³´ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸
- [x] ëª¨ë°”ì¼ ë„¤ë¹„ê²Œì´ì…˜ì— ê¸°ê´€ ì •ë³´ê°€ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

---

## ê²°ë¡ 

**ëª¨ë“  ì—­í• (Student, Parent, Admin, Consultant)ì˜ ì‚¬ìš©ìê°€ ì‚¬ì´ë“œë°”ì—ì„œ ë³¸ì¸ ê¸°ê´€ ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ UIë¥¼ í™•ì¥í–ˆìŠµë‹ˆë‹¤.**

- âœ… ì‚¬ìš©ì ê²½í—˜ ì¼ê´€ì„±: ëª¨ë“  ì—­í• ì—ì„œ ë™ì¼í•˜ê²Œ ê¸°ê´€ ì •ë³´ í™•ì¸ ê°€ëŠ¥
- âœ… ì—­í• ë³„ ë§ì¶¤: Superadminë§Œ ì œì™¸í•˜ì—¬ ì ì ˆí•œ ì •ë³´ ì œê³µ
- âœ… ë°˜ì‘í˜• ì§€ì›: ë°ìŠ¤í¬í†±ê³¼ ëª¨ë°”ì¼ ëª¨ë‘ ì§€ì›

