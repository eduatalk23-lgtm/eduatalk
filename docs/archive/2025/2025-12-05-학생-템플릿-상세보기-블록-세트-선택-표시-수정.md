# ν•™μƒ ν…ν”λ¦Ώ μƒμ„Έλ³΄κΈ° λΈ”λ΅ μ„ΈνΈ μ„ νƒ ν‘μ‹ μμ •

## π” λ¬Έμ  μƒν™©

ν•™μƒμ ν…ν”λ¦Ώ μƒμ„Έλ³΄κΈ°μ—μ„ μ‹κ°„ λΈ”λ΅ ν•­λ©μ— μΊ ν”„ ν…ν”λ¦Ώ ν•­λ©μ΄ λ‚μ¤κΈ΄ ν•μ§€λ§:
- μ„ νƒμ΄ μ• λλ” μƒνƒ
- μμ •μ΄ κ°€λ¥ν• μƒνƒ

**μ›ν•λ” μƒν™©**: μΊ ν”„ ν…ν”λ¦Ώμ μ‹κ°„ λΈ”λ΅μ΄ ν™μ„±(μ„ νƒ)λ μƒνƒμ— μμ • λ¶κ°€

## π“ μ›μΈ λ¶„μ„

### ν„μ¬ λ¬Έμ μ 

1. **ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈκ°€ blockSets λ©λ΅μ— ν¬ν•¨λμ§€ μ•μ**
   - ν•™μƒμ λΈ”λ΅ μ„ΈνΈλ§ `blockSets`μ— ν¬ν•¨
   - ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈκ°€ λ³„λ„λ΅ μ΅°νλμ§€λ§ `blockSets`μ— μ¶”κ°€λμ§€ μ•μ

2. **wizardDataμ block_set_idκ°€ μ„¤μ •λμ§€ μ•μ**
   - ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDκ°€ `wizardData.block_set_id`μ— μ„¤μ •λμ§€ μ•μ•„ μ„ νƒ μƒνƒλ΅ ν‘μ‹λμ§€ μ•μ

3. **μΊ ν”„ λ¨λ“ μ„¤μ •μ΄ μ¬λ°”λ¥΄μ§€ μ•μ**
   - `isCampMode={false}`λ΅ μ„¤μ •λμ–΄ μΊ ν”„ λ¨λ“ νΉμ • λ΅μ§μ΄ λ™μ‘ν•μ§€ μ•μ

4. **editable μ΅°κ±΄μ΄ λΈ”λ΅ μ„ΈνΈ μ„ νƒμ— μ μ©λμ§€ μ•μ**
   - `editable={false}`μΌ λ•λ„ λΈ”λ΅ μ„ΈνΈ μ„ νƒμ΄ ν™μ„±ν™”λμ–΄ μμ

## π›  ν•΄κ²° λ°©λ²•

### 1. ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό PlanGroupDetailViewμ— μ „λ‹¬

**νμΌ**: `app/(student)/plan/group/[id]/page.tsx`

ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό μ°Ύμ•„μ„ μ €μ¥ν•κ³  μ „λ‹¬:

```typescript
let templateBlockSetId: string | null = null;

// ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ μ΅°ν ν›„
if (templateBlockSet) {
  templateBlockSetId = templateBlockSet.id;
  templateBlockSetName = templateBlockSet.name;
  // ...
}

// PlanGroupDetailViewμ— μ „λ‹¬
<PlanGroupDetailView
  templateBlockSetId={templateBlockSetId}
  // ...
/>
```

### 2. PlanGroupDetailViewμ—μ„ ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈλ¥Ό blockSetsμ— μ¶”κ°€

**νμΌ**: `app/(student)/plan/group/[id]/_components/PlanGroupDetailView.tsx`

ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈλ¥Ό `blockSets` λ©λ΅μ— μ¶”κ°€:

```typescript
const enhancedBlockSets = useMemo(() => {
  if (campTemplateId && templateBlockSetId && templateBlockSetName && templateBlocks.length > 0) {
    // ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈκ°€ μ΄λ―Έ blockSetsμ— μλ”μ§€ ν™•μΈ
    const existingIndex = blockSets.findIndex(bs => bs.id === templateBlockSetId);
    
    if (existingIndex >= 0) {
      // μ΄λ―Έ μμΌλ©΄ μ—…λ°μ΄νΈ
      const updated = [...blockSets];
      updated[existingIndex] = {
        id: templateBlockSetId,
        name: templateBlockSetName,
        blocks: templateBlocks,
      };
      return updated;
    } else {
      // μ—†μΌλ©΄ λ§¨ μ•μ— μ¶”κ°€
      return [
        {
          id: templateBlockSetId,
          name: templateBlockSetName,
          blocks: templateBlocks,
        },
        ...blockSets,
      ];
    }
  }
  return blockSets;
}, [campTemplateId, templateBlockSetId, templateBlockSetName, templateBlocks, blockSets]);
```

### 3. wizardDataμ block_set_idλ¥Ό ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDλ΅ μ„¤μ •

**νμΌ**: `app/(student)/plan/group/[id]/_components/PlanGroupDetailView.tsx`

μΊ ν”„ λ¨λ“μΌ λ• ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό `block_set_id`λ΅ μ„¤μ •:

```typescript
const wizardData = useMemo(() => {
  const baseData = planGroupToWizardData(group, exclusions, academySchedules);
  const { studentContents: studentContentsFormatted, recommendedContents: recommendedContentsFormatted } = 
    contentsToWizardFormat(contentsWithDetails);
  
  // μΊ ν”„ λ¨λ“μΌ λ• ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό block_set_idλ΅ μ„¤μ •
  const blockSetId = campTemplateId && templateBlockSetId 
    ? templateBlockSetId 
    : baseData.block_set_id;
  
  return {
    ...baseData,
    block_set_id: blockSetId,
    student_contents: studentContentsFormatted,
    recommended_contents: recommendedContentsFormatted,
  };
}, [group, exclusions, academySchedules, contentsWithDetails, campTemplateId, templateBlockSetId]);
```

### 4. μΊ ν”„ λ¨λ“ μ„¤μ • λ° μ½κΈ° μ „μ© λ¨λ“

**νμΌ**: `app/(student)/plan/group/[id]/_components/PlanGroupDetailView.tsx`

`Step1BasicInfo`μ— μ¬λ°”λ¥Έ props μ „λ‹¬:

```typescript
<Step1BasicInfo 
  data={wizardData}
  onUpdate={() => {}} // μ½κΈ° μ „μ© - λ³€κ²½ λ¶κ°€
  blockSets={enhancedBlockSets} // ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ ν¬ν•¨
  editable={false} // μ™„μ „ν μ½κΈ° μ „μ©
  isCampMode={!!campTemplateId} // μΊ ν”„ ν…ν”λ¦Ώμ΄ μμΌλ©΄ μΊ ν”„ λ¨λ“
  lockedFields={[]}
/>
```

### 5. Step1BasicInfoμ—μ„ editable μ΅°κ±΄ μ¶”κ°€

**νμΌ**: `app/(student)/plan/new-group/_components/Step1BasicInfo.tsx`

`editable={false}`μΌ λ•λ„ λΈ”λ΅ μ„ΈνΈ μ„ νƒμ΄ λΉ„ν™μ„±ν™”λλ„λ΅ μμ •:

```typescript
// disabled μ΅°κ±΄μ— editable μ²΄ν¬ μ¶”κ°€
disabled={
  !editable || (isCampMode && !canStudentInputBlockSetId)
}

// onChangeμ—μ„λ„ editable μ²΄ν¬ μ¶”κ°€
onChange={(e) => {
  if (!editable || (isCampMode && !canStudentInputBlockSetId))
    return;
  // ...
}}
```

## π“‹ λ³€κ²½ μ‚¬ν•­ μ”μ•½

### `app/(student)/plan/group/[id]/page.tsx`
1. `templateBlockSetId` λ³€μ μ¶”κ°€
2. ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ μ΅°ν ν›„ ID μ €μ¥
3. `PlanGroupDetailView`μ— `templateBlockSetId` μ „λ‹¬

### `app/(student)/plan/group/[id]/_components/PlanGroupDetailView.tsx`
1. `templateBlockSetId` props μ¶”κ°€
2. `enhancedBlockSets` λ©”λ¨μ΄μ μ΄μ…: ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈλ¥Ό `blockSets`μ— μ¶”κ°€
3. `wizardData` λ©”λ¨μ΄μ μ΄μ…: μΊ ν”„ λ¨λ“μΌ λ• ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ IDλ¥Ό `block_set_id`λ΅ μ„¤μ •
4. `Step1BasicInfo`μ— μ¬λ°”λ¥Έ props μ „λ‹¬ (`enhancedBlockSets`, `isCampMode={!!campTemplateId}`)

### `app/(student)/plan/new-group/_components/Step1BasicInfo.tsx`
1. `editable` μ΅°κ±΄μ„ λΈ”λ΅ μ„ΈνΈ μ„ νƒ λΉ„ν™μ„±ν™”μ— μ¶”κ°€
2. `disabled` μ†μ„±μ— `!editable` μ΅°κ±΄ μ¶”κ°€
3. `onChange` ν•Έλ“¤λ¬μ— `!editable` μ΅°κ±΄ μ¶”κ°€
4. μ•λ‚΄ λ©”μ‹μ§€μ— `editable` μƒνƒ λ°μ

## β… κΈ°λ€ ν¨κ³Ό

1. β… **μ„ νƒ μƒνƒ ν‘μ‹**: μΊ ν”„ ν…ν”λ¦Ώμ μ‹κ°„ λΈ”λ΅μ΄ μ„ νƒλ μƒνƒλ΅ ν‘μ‹λ¨
2. β… **μμ • λ¶κ°€**: `editable={false}`μ™€ `isCampMode={true}`λ΅ μμ • λ¶κ°€λ¥
3. β… **μΌκ΄€μ„±**: ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈκ°€ λΈ”λ΅ μ„ΈνΈ λ©λ΅μ λ§¨ μ„μ— ν‘μ‹λ¨
4. β… **μ‚¬μ©μ κ²½ν—**: μΊ ν”„ λ¨λ“μ—μ„ ν…ν”λ¦Ώ λΈ”λ΅μ΄ μλ™μΌλ΅ μ„ νƒλμ–΄ ν‘μ‹λ¨

## π”— κ΄€λ ¨ νμΌ

- `app/(student)/plan/group/[id]/page.tsx` - ν…ν”λ¦Ώ λΈ”λ΅ μ„ΈνΈ ID μ΅°ν λ° μ „λ‹¬
- `app/(student)/plan/group/[id]/_components/PlanGroupDetailView.tsx` - λΈ”λ΅ μ„ΈνΈ λ©λ΅ κµ¬μ„± λ° props μ „λ‹¬
- `app/(student)/plan/new-group/_components/Step1BasicInfo.tsx` - λΈ”λ΅ μ„ΈνΈ μ„ νƒ UI λ° λΉ„ν™μ„±ν™” λ΅μ§

---

**μ‘μ—… μΌμ**: 2025λ…„ 12μ›” 5μΌ

