# ğŸ¨ Wizard Phase 3 ìƒì„¸ ì„¤ê³„

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 29ì¼  
**Phase**: 3.1 - ìƒì„¸ ì„¤ê³„  
**ì†Œìš” ì‹œê°„**: 4ì‹œê°„

---

## ğŸ“‹ ëª©ì°¨

1. [íƒ€ì… ì •ì˜](#íƒ€ì…-ì •ì˜)
2. [ìƒíƒœ ê´€ë¦¬ ì „ëµ](#ìƒíƒœ-ê´€ë¦¬-ì „ëµ)
3. [ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°](#ì»´í¬ë„ŒíŠ¸-êµ¬ì¡°)
4. [ë°ì´í„° íë¦„](#ë°ì´í„°-íë¦„)
5. [API í˜¸ì¶œ í”Œë¡œìš°](#api-í˜¸ì¶œ-í”Œë¡œìš°)
6. [ë‹¤ì´ì–´ê·¸ë¨](#ë‹¤ì´ì–´ê·¸ë¨)

---

## 1. íƒ€ì… ì •ì˜

### âœ… ì™„ë£Œ: `lib/types/content-selection.ts`

**ì£¼ìš” íƒ€ì…**:
- `SelectedContent` - ì„ íƒëœ ì½˜í…ì¸ 
- `RecommendedContent` - ì¶”ì²œ ì½˜í…ì¸ 
- `ContentSelectionState` - ì „ì²´ ìƒíƒœ
- `ContentCardProps` - ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
- `RangeSettingModalProps` - ë²”ìœ„ ì„¤ì • ëª¨ë‹¬

**ì´ 22ê°œ íƒ€ì… ì •ì˜ ì™„ë£Œ**

---

## 2. ìƒíƒœ ê´€ë¦¬ ì „ëµ

### 2.1 ìƒíƒœ ìœ„ì¹˜ ê²°ì •

#### ì „ì—­ ìƒíƒœ (WizardDataì— ì €ì¥)

```typescript
// PlanGroupWizardì—ì„œ ê´€ë¦¬
{
  student_contents: SelectedContent[],
  recommended_contents: SelectedContent[],
  schedule_summary: {...}
}
```

**ì´ìœ **:
- Draft ìë™ ì €ì¥
- ë‹¨ê³„ ê°„ ì´ë™ ì‹œ ìœ ì§€
- ìµœì¢… ì œì¶œ ì‹œ í•„ìš”

#### ë¡œì»¬ ìƒíƒœ (Step3ContentSelectionì—ì„œ ê´€ë¦¬)

```typescript
// ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ ìƒíƒœ
{
  activeTab: "student" | "recommended",
  selectedRecommendedIds: Set<string>,
  recommendationSettings: {...},
  isLoading: boolean,
  error: string | null
}
```

**ì´ìœ **:
- UI ì „ìš© ìƒíƒœ
- ì„ì‹œ ìƒíƒœ
- ë‹¤ë¥¸ ë‹¨ê³„ì™€ ë¬´ê´€

### 2.2 ìƒíƒœ ë™ê¸°í™” ì „ëµ

#### ìƒí–¥ì‹ (Child â†’ Parent)

```typescript
// StudentContentsPanel
const handleUpdate = (contents: SelectedContent[]) => {
  onUpdate({ student_contents: contents });
};

// RecommendedContentsPanel
const handleUpdate = (contents: SelectedContent[]) => {
  onUpdate({ recommended_contents: contents });
};
```

#### í•˜í–¥ì‹ (Parent â†’ Child)

```typescript
// Step3ContentSelection
<StudentContentsPanel
  selectedContents={data.student_contents}
  currentTotal={data.student_contents.length + data.recommended_contents.length}
/>
```

### 2.3 9ê°œ ì œí•œ ë¡œì§

**ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬**:

```typescript
const maxContents = 9;
const currentTotal = studentContents.length + recommendedContents.length;
const canAddMore = currentTotal < maxContents;
const remaining = maxContents - currentTotal;
```

**ì „ë‹¬ ë°©ì‹**:
- ê° íŒ¨ë„ì— `maxContents`, `currentTotal` ì „ë‹¬
- ê° íŒ¨ë„ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì œí•œ ì²´í¬
- ì¼ê´€ëœ ì‚¬ìš©ì ê²½í—˜

---

## 3. ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### 3.1 ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ

```
Step3ContentSelection (ë©”ì¸)
â”œâ”€â”€ ProgressIndicator (ì§„í–‰ë¥ )
â”œâ”€â”€ ContentSelectionTabs (íƒ­ ì „í™˜)
â”œâ”€â”€ StudentContentsPanel (ì¡°ê±´ë¶€ ë Œë”ë§)
â”‚   â”œâ”€â”€ ContentSelector (ì½˜í…ì¸  ì„ íƒ)
â”‚   â”œâ”€â”€ ContentCard[] (ì„ íƒëœ ëª©ë¡)
â”‚   â””â”€â”€ RangeSettingModal (ë²”ìœ„ ì„¤ì •)
â””â”€â”€ RecommendedContentsPanel (ì¡°ê±´ë¶€ ë Œë”ë§)
    â”œâ”€â”€ RecommendationSettings (ì¶”ì²œ ì„¤ì •)
    â”œâ”€â”€ RecommendedContentCard[] (ì¶”ì²œ ëª©ë¡)
    â”œâ”€â”€ ContentCard[] (ì„ íƒëœ ëª©ë¡)
    â””â”€â”€ RangeSettingModal (ë²”ìœ„ ì„¤ì •)

ê³µí†µ ì»´í¬ë„ŒíŠ¸ (_shared/)
â”œâ”€â”€ ContentCard
â”œâ”€â”€ RangeSettingModal
â”œâ”€â”€ ContentRangeInput
â””â”€â”€ ProgressIndicator
```

### 3.2 ì»´í¬ë„ŒíŠ¸ ì±…ì„

#### Step3ContentSelection (ë©”ì¸)

**ì±…ì„**:
- íƒ­ ìƒíƒœ ê´€ë¦¬
- ì „ì²´ ìƒíƒœ í†µí•©
- Draft ìë™ ì €ì¥
- 9ê°œ ì œí•œ ì²´í¬

**Props**:
- WizardData (ì½ê¸°/ì“°ê¸°)
- contents (ì½˜í…ì¸  ëª©ë¡)
- ëª¨ë“œ ì„¤ì • (í¸ì§‘/ì½ê¸°)

#### StudentContentsPanel

**ì±…ì„**:
- í•™ìƒ ì½˜í…ì¸  ì„ íƒ
- ë²”ìœ„ ì„¤ì •
- ë©”íƒ€ë°ì´í„° ì¡°íšŒ

**Props**:
- selectedContents
- maxContents
- currentTotal
- onUpdate

#### RecommendedContentsPanel

**ì±…ì„**:
- ì¶”ì²œ ë°›ê¸° ì„¤ì •
- ì¶”ì²œ ì½˜í…ì¸  í‘œì‹œ
- ì¶”ì²œ ì½˜í…ì¸  ì„ íƒ
- ë²”ìœ„ ì„¤ì •

**Props**:
- recommendedContents
- selectedContents
- settings
- onUpdate
- onRequestRecommendations

---

## 4. ë°ì´í„° íë¦„

### 4.1 ì´ˆê¸° ë¡œë“œ

```mermaid
sequenceDiagram
    participant W as WizardData
    participant S as Step3ContentSelection
    participant SP as StudentContentsPanel
    participant RP as RecommendedContentsPanel
    
    W->>S: data (student_contents, recommended_contents)
    S->>SP: selectedContents
    S->>RP: selectedContents
    SP->>SP: ë Œë”ë§
    RP->>RP: ë Œë”ë§
```

### 4.2 í•™ìƒ ì½˜í…ì¸  ì„ íƒ

```mermaid
sequenceDiagram
    participant U as User
    participant SP as StudentContentsPanel
    participant S as Step3ContentSelection
    participant W as WizardData
    
    U->>SP: ì½˜í…ì¸  ì„ íƒ
    SP->>SP: 9ê°œ ì œí•œ ì²´í¬
    SP->>S: onUpdate(contents)
    S->>W: update student_contents
    W->>S: data ì—…ë°ì´íŠ¸
    S->>SP: selectedContents (ìƒˆ ë°ì´í„°)
    SP->>SP: ë¦¬ë Œë”ë§
```

### 4.3 ì¶”ì²œ ì½˜í…ì¸  ìš”ì²­

```mermaid
sequenceDiagram
    participant U as User
    participant RP as RecommendedContentsPanel
    participant API as API
    participant S as Step3ContentSelection
    
    U->>RP: ê³¼ëª© ì„ íƒ + ì¶”ì²œ ë°›ê¸°
    RP->>API: getRecommendedContents()
    API-->>RP: RecommendedContent[]
    RP->>RP: ëª©ë¡ í‘œì‹œ
    U->>RP: ì¶”ì²œ ì½˜í…ì¸  ì„ íƒ
    RP->>S: onUpdate(contents)
    S->>S: data ì—…ë°ì´íŠ¸
```

### 4.4 ë²”ìœ„ ì„¤ì •

```mermaid
sequenceDiagram
    participant U as User
    participant CC as ContentCard
    participant RSM as RangeSettingModal
    participant API as API
    participant Panel as Panel
    
    U->>CC: ë²”ìœ„ ìˆ˜ì • í´ë¦­
    CC->>RSM: open
    RSM->>API: fetchContentDetails()
    API-->>RSM: details[]
    RSM->>RSM: ë²”ìœ„ ì„ íƒ UI
    U->>RSM: ë²”ìœ„ ì„ íƒ + ì €ì¥
    RSM->>Panel: onSave(range)
    Panel->>Panel: contents ì—…ë°ì´íŠ¸
```

---

## 5. API í˜¸ì¶œ í”Œë¡œìš°

### 5.1 API ëª©ë¡

#### ì½˜í…ì¸  ë©”íƒ€ë°ì´í„°

```typescript
// ì‚¬ìš©ì²˜: ì½˜í…ì¸  ì„ íƒ ì‹œ
fetchContentMetadataAction(contentId: string, type: ContentType)
  â†’ Promise<ContentMetadata>
```

#### ì½˜í…ì¸  ìƒì„¸ ì •ë³´

```typescript
// ì‚¬ìš©ì²˜: ë²”ìœ„ ì„¤ì • ëª¨ë‹¬
fetch(`/api/student-content-details?id=${id}&type=${type}`)
  â†’ Promise<{ details: ContentDetail[] }>
```

#### ì¶”ì²œ ì½˜í…ì¸ 

```typescript
// ì‚¬ìš©ì²˜: ì¶”ì²œ ë°›ê¸°
getRecommendedMasterContentsAction(studentId, subjects, counts)
  â†’ Promise<RecommendedContent[]>
```

### 5.2 API í˜¸ì¶œ íƒ€ì´ë°

| API | í˜¸ì¶œ ì‹œì  | ìºì‹± | ì—ëŸ¬ ì²˜ë¦¬ |
|-----|----------|------|-----------|
| fetchContentMetadata | ì½˜í…ì¸  ì„ íƒ ì‹œ | âœ… | Toast |
| fetchContentDetails | ëª¨ë‹¬ ì—´ë¦´ ë•Œ | âœ… | ëª¨ë‹¬ ë‚´ í‘œì‹œ |
| getRecommendedContents | ì¶”ì²œ ë°›ê¸° ë²„íŠ¼ | âŒ | Toast + ì¬ì‹œë„ |

### 5.3 ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ

#### ì¬ì‹œë„ ê°€ëŠ¥í•œ ì—ëŸ¬

```typescript
try {
  const data = await fetchAPI();
} catch (error) {
  if (isNetworkError(error)) {
    // ì¬ì‹œë„ ë²„íŠ¼ í‘œì‹œ
    setError("ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
  }
}
```

#### ë³µêµ¬ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬

```typescript
catch (error) {
  if (isAuthError(error)) {
    // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    router.push("/login");
  }
}
```

---

## 6. ë‹¤ì´ì–´ê·¸ë¨

### 6.1 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step3ContentSelection                                       â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ProgressIndicator: 8/9ê°œ ì„ íƒ (êµ­/ìˆ˜/ì˜ í•„ìˆ˜)          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ContentSelectionTabs                                    â”‚ â”‚
â”‚ â”‚ [í•™ìƒ ì½˜í…ì¸  (5)] [ì¶”ì²œ ì½˜í…ì¸  (3)]                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ StudentContentsPanel (activeTab === "student")          â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ ContentSelector                                   â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ [êµì¬] [ê°•ì˜] [ì»¤ìŠ¤í…€]                            â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ ContentCard (êµ­ì–´ êµì¬)                           â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ ContentCard (ìˆ˜í•™ êµì¬)                           â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ ...                                               â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ RecommendedContentsPanel (activeTab === "recommended")  â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ RecommendationSettings                            â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ [êµ­ì–´ 2ê°œ] [ìˆ˜í•™ 2ê°œ] [ì˜ì–´ 1ê°œ]                  â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ [ì¶”ì²œ ë°›ê¸° ë²„íŠ¼]                                  â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â”‚                                                         â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚ â”‚ â”‚ RecommendedContentCard (ìš°ì„ ìˆœìœ„ 1)               â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ RecommendedContentCard (ìš°ì„ ìˆœìœ„ 2)               â”‚   â”‚ â”‚
â”‚ â”‚ â”‚ ...                                               â”‚   â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 ìƒíƒœ ê´€ë¦¬ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WizardData (ì „ì—­)                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ student_contents: []                â”‚ â”‚
â”‚ â”‚ recommended_contents: []            â”‚ â”‚
â”‚ â”‚ schedule_summary: {...}             â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ (props)
                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step3ContentSelection (ë¡œì»¬)            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ activeTab: "student"                â”‚ â”‚
â”‚ â”‚ selectedRecommendedIds: Set()       â”‚ â”‚
â”‚ â”‚ recommendationSettings: {...}       â”‚ â”‚
â”‚ â”‚ isLoading: false                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚ (props)                â”‚ (props)
    â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StudentContents  â”‚  â”‚ RecommendedContents  â”‚
â”‚ Panel            â”‚  â”‚ Panel                â”‚
â”‚ (Stateless)      â”‚  â”‚ (Stateless)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ë°ì´í„° íë¦„ë„

```
User Action
    â”‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ContentCard             â”‚
â”‚ - ì„ íƒ/í•´ì œ             â”‚
â”‚ - ë²”ìœ„ ìˆ˜ì •             â”‚
â”‚ - ì‚­ì œ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Panel                   â”‚
â”‚ - 9ê°œ ì œí•œ ì²´í¬         â”‚
â”‚ - í•„ìˆ˜ ê³¼ëª© ì²´í¬        â”‚
â”‚ - ì¤‘ë³µ ì²´í¬             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“ (onUpdate)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step3ContentSelection   â”‚
â”‚ - contents í†µí•©         â”‚
â”‚ - draft ìë™ ì €ì¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“ (onUpdate)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WizardData              â”‚
â”‚ - student_contents      â”‚
â”‚ - recommended_contents  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. êµ¬í˜„ ìˆœì„œ

### Phase 3.2: ê³µí†µ ì»´í¬ë„ŒíŠ¸ (7ì‹œê°„)

1. **ContentCard** (2h)
   - ê¸°ë³¸ ë ˆì´ì•„ì›ƒ
   - ì¶”ì²œ ì •ë³´ í‘œì‹œ
   - ìƒíƒœ ê´€ë¦¬

2. **RangeSettingModal** (3h)
   - ëª¨ë‹¬ êµ¬ì¡°
   - API ì—°ë™
   - ë²”ìœ„ ì„ íƒ ë¡œì§

3. **ContentRangeInput** (2h)
   - ì±…/ê°•ì˜ êµ¬ë¶„
   - ë“œë¡­ë‹¤ìš´ UI
   - ê²€ì¦ ë¡œì§

4. **ProgressIndicator** (1h)
   - ì§„í–‰ë¥  í‘œì‹œ
   - í•„ìˆ˜ ê³¼ëª© ì²´í¬
   - ê²½ê³  ë©”ì‹œì§€

### Phase 3.3: StudentContentsPanel (6ì‹œê°„)

1. **ContentSelector** (2h)
2. **ì½˜í…ì¸  ì„ íƒ ë¡œì§** (2h)
3. **ë²”ìœ„ ì„¤ì • í†µí•©** (1h)
4. **9ê°œ ì œí•œ ì²´í¬** (1h)

### Phase 3.4: RecommendedContentsPanel (8ì‹œê°„)

1. **RecommendationSettings** (2h)
2. **ì¶”ì²œ ë°›ê¸° ë¡œì§** (2h)
3. **ì¶”ì²œ ì½˜í…ì¸  í‘œì‹œ** (2h)
4. **ì„ íƒ ë° ë²”ìœ„ ì„¤ì •** (2h)

### Phase 3.5: ë©”ì¸ í†µí•© (3ì‹œê°„)

1. **Step3ContentSelection** (2h)
2. **íƒ­ ì „í™˜ ë¡œì§** (1h)

### Phase 3.6: Wizard í†µí•© (2ì‹œê°„)

1. **PlanGroupWizard ìˆ˜ì •** (1h)
2. **Props ì „ë‹¬** (1h)

---

## 8. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### 8.1 ë¦¬ë Œë”ë§ ìµœì í™”

```typescript
// React.memo ì‚¬ìš©
export const ContentCard = React.memo(function ContentCard({ ... }) {
  // ...
});

// useMemoë¡œ ê³„ì‚° ìºì‹±
const canAddMore = useMemo(() => {
  return currentTotal < maxContents;
}, [currentTotal, maxContents]);
```

### 8.2 API í˜¸ì¶œ ìµœì í™”

```typescript
// ìºì‹œ í™œìš©
const cachedDetails = useRef<Map<string, ContentDetail[]>>(new Map());

if (cachedDetails.current.has(contentId)) {
  return cachedDetails.current.get(contentId);
}
```

### 8.3 ìƒíƒœ ì—…ë°ì´íŠ¸ ìµœì í™”

```typescript
// Batch ì—…ë°ì´íŠ¸
const handleBulkUpdate = useCallback((updates: SelectedContent[]) => {
  // í•œ ë²ˆì— ì—…ë°ì´íŠ¸
  onUpdate({ student_contents: updates });
}, [onUpdate]);
```

---

## 9. í…ŒìŠ¤íŠ¸ ì „ëµ

### 9.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

- [ ] ContentCard ë Œë”ë§
- [ ] RangeSettingModal ë¡œì§
- [ ] 9ê°œ ì œí•œ ì²´í¬
- [ ] í•„ìˆ˜ ê³¼ëª© ê²€ì¦

### 9.2 í†µí•© í…ŒìŠ¤íŠ¸

- [ ] í•™ìƒ â†’ ì¶”ì²œ íƒ­ ì „í™˜
- [ ] ë²”ìœ„ ì„¤ì • í”Œë¡œìš°
- [ ] Draft ìë™ ì €ì¥
- [ ] Wizard í†µí•©

---

## âœ… Phase 3.1 ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] íƒ€ì… ì •ì˜ (`content-selection.ts`)
- [x] ìƒíƒœ ê´€ë¦¬ ì „ëµ
- [x] ì»´í¬ë„ŒíŠ¸ êµ¬ì¡° ì„¤ê³„
- [x] ë°ì´í„° íë¦„ ì„¤ê³„
- [x] API í˜¸ì¶œ í”Œë¡œìš°
- [x] ë‹¤ì´ì–´ê·¸ë¨ ì‘ì„±
- [ ] ì„¤ê³„ ë¦¬ë·°
- [ ] Phase 3.2 ì‹œì‘ ì¤€ë¹„

---

**ì‘ì„±ì¼**: 2025ë…„ 11ì›” 29ì¼  
**ì†Œìš” ì‹œê°„**: 4ì‹œê°„  
**ìƒíƒœ**: Phase 3.1 ì™„ë£Œ ì¤€ë¹„  
**ë‹¤ìŒ**: Phase 3.2 ê³µí†µ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

