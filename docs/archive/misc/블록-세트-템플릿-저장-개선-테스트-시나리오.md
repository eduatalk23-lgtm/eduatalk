# 블록 및 제외일 설정 개선 테스트 시나리오

## 📋 테스트 개요

Phase 1, 2, 3의 모든 기능이 정상적으로 동작하는지 확인하는 통합 테스트 시나리오입니다.

---

## ✅ Phase 1 테스트

### 1. 시간 관리 데이터 불러오기

#### 테스트 케이스 1-1: 제외일 불러오기
1. **준비**: 시간 관리에 제외일이 등록되어 있어야 함
2. **실행**: 
   - 플랜 그룹 생성 페이지 → Step 2 (블록 및 제외일 설정)
   - "시간 관리에서 불러오기" 버튼 클릭
3. **확인**:
   - ✅ 시간 관리의 제외일이 목록에 추가됨
   - ✅ 출처 표시: "⏰ 시간 관리" 배지 표시
   - ✅ 중복 제외일은 자동으로 제외됨
   - ✅ 토스트 메시지: "시간 관리에서 N개의 제외일을 불러왔습니다."

#### 테스트 케이스 1-2: 학원 일정 불러오기
1. **준비**: 시간 관리에 학원 일정이 등록되어 있어야 함
2. **실행**:
   - 플랜 그룹 생성 페이지 → Step 2
   - "시간 관리에서 불러오기" 버튼 클릭 (학원 일정 섹션)
3. **확인**:
   - ✅ 시간 관리의 학원 일정이 목록에 추가됨
   - ✅ 출처 표시: "⏰ 시간 관리" 배지 표시
   - ✅ 중복 일정은 자동으로 제외됨
   - ✅ 토스트 메시지: "시간 관리에서 N개의 학원 일정을 불러왔습니다."

#### 테스트 케이스 1-3: 새 플랜 그룹 생성 시 불러오기
1. **준비**: 플랜 그룹이 아직 생성되지 않은 상태 (draft 없음)
2. **실행**:
   - 새 플랜 그룹 생성 페이지 → Step 2
   - "시간 관리에서 불러오기" 버튼 클릭
3. **확인**:
   - ✅ groupId가 없어도 정상 동작
   - ✅ 데이터가 정상적으로 불러와짐

### 2. 템플릿 제외일 삭제 제어

#### 테스트 케이스 2-1: 템플릿 제외일 삭제 시도
1. **준비**: 캠프 템플릿에 제외일이 설정되어 있음
2. **실행**:
   - 캠프 참여 페이지 → Step 2
   - 템플릿에서 추가된 제외일의 "삭제" 버튼 클릭
3. **확인**:
   - ✅ 삭제 버튼이 비활성화되어 있음 (회색)
   - ✅ 클릭 시 토스트 메시지: "템플릿에서 지정된 제외일은 삭제할 수 없습니다."
   - ✅ 제외일이 삭제되지 않음

#### 테스트 케이스 2-2: 템플릿 학원 일정 삭제 시도
1. **준비**: 캠프 템플릿에 학원 일정이 설정되어 있음
2. **실행**:
   - 캠프 참여 페이지 → Step 2
   - 템플릿에서 추가된 학원 일정의 "삭제" 버튼 클릭
3. **확인**:
   - ✅ 삭제 버튼이 비활성화되어 있음
   - ✅ 클릭 시 토스트 메시지: "템플릿에서 지정된 학원 일정은 삭제할 수 없습니다."
   - ✅ 학원 일정이 삭제되지 않음

### 3. 학습 시간 제외 항목에서 '점심식사' 제거

#### 테스트 케이스 3-1: 제외 항목 유형 확인
1. **실행**:
   - 플랜 그룹 생성 페이지 → Step 2
   - "학습 시간 제외 항목" 섹션 열기
   - "제외 항목 유형" 드롭다운 확인
2. **확인**:
   - ✅ "점심식사" 옵션이 없음
   - ✅ "아침식사", "저녁식사", "수면", "기타"만 표시됨
   - ✅ 기본값: "아침식사" (07:00 ~ 08:00)

---

## ✅ Phase 2 테스트

### 4. 템플릿 모드 필드 제어

#### 테스트 케이스 4-1: 학생 입력 허용 체크박스 (제외일)
1. **실행**:
   - 캠프 템플릿 편집 페이지 → Step 2
   - "학습 제외일" 섹션의 "학생 입력 허용" 체크박스 확인
2. **확인**:
   - ✅ 체크박스가 표시됨
   - ✅ 기본값: 체크됨 (허용)
   - ✅ 체크 해제 시 학생 입력 폼이 숨겨짐
   - ✅ 체크 시 학생 입력 폼이 표시됨

#### 테스트 케이스 4-2: 학생 입력 허용 체크박스 (학원 일정)
1. **실행**:
   - 캠프 템플릿 편집 페이지 → Step 2
   - "학원 일정" 섹션의 "학생 입력 허용" 체크박스 확인
2. **확인**:
   - ✅ 체크박스가 표시됨
   - ✅ 기본값: 체크됨 (허용)
   - ✅ 체크 해제 시 학생 입력 폼이 숨겨짐
   - ✅ 체크 시 학생 입력 폼이 표시됨

#### 테스트 케이스 4-3: 학습 시간 제외 항목 사용/미사용
1. **실행**:
   - 캠프 템플릿 편집 페이지 → Step 2
   - "학습 시간 제외 항목" 섹션의 "사용" 체크박스 확인
2. **확인**:
   - ✅ 체크박스가 표시됨
   - ✅ 기본값: 체크됨 (사용)
   - ✅ 체크 해제 시 "학습 시간 제외 항목이 비활성화되어 있습니다." 메시지 표시
   - ✅ 체크 시 제외 항목 추가 폼이 표시됨

#### 테스트 케이스 4-4: 캠프 참여 시 학생 입력 제어
1. **준비**: 
   - 캠프 템플릿에서 "학생 입력 허용" 체크 해제
   - 템플릿 저장
2. **실행**:
   - 캠프 참여 페이지 → Step 2
3. **확인**:
   - ✅ 제외일 추가 폼이 표시되지 않음 (템플릿에서 허용하지 않은 경우)
   - ✅ 학원 일정 추가 폼이 표시되지 않음 (템플릿에서 허용하지 않은 경우)
   - ✅ "시간 관리에서 불러오기" 버튼은 여전히 표시됨

---

## ✅ Phase 3 테스트

### 5. 출처 표시 UI

#### 테스트 케이스 5-1: 제외일 출처 표시
1. **준비**: 다양한 출처의 제외일이 있음
   - 템플릿 제외일
   - 시간 관리 제외일
   - 학생 직접 입력 제외일
2. **실행**:
   - 플랜 그룹 생성 페이지 → Step 2
   - 제외일 목록 확인
3. **확인**:
   - ✅ 템플릿 제외일: "🔒 템플릿" 배지 (파란색)
   - ✅ 시간 관리 제외일: "⏰ 시간 관리" 배지 (회색)
   - ✅ 학생 입력 제외일: "👤 직접 입력" 배지 (초록색)
   - ✅ 아이콘과 텍스트가 함께 표시됨

#### 테스트 케이스 5-2: 학원 일정 출처 표시
1. **준비**: 다양한 출처의 학원 일정이 있음
2. **실행**:
   - 플랜 그룹 생성 페이지 → Step 2
   - 학원 일정 목록 확인
3. **확인**:
   - ✅ 템플릿 학원 일정: "🔒 템플릿" 배지
   - ✅ 시간 관리 학원 일정: "⏰ 시간 관리" 배지
   - ✅ 학생 입력 학원 일정: "👤 직접 입력" 배지

### 6. 에러 처리 개선

#### 테스트 케이스 6-1: 유효성 검사 에러
1. **실행**:
   - 플랜 그룹 생성 페이지 → Step 2
   - 제외일 추가 시 날짜를 선택하지 않고 "제외일 추가" 버튼 클릭
2. **확인**:
   - ✅ alert 대신 토스트 메시지 표시
   - ✅ "날짜를 선택해주세요." 메시지 (빨간색)

#### 테스트 케이스 6-2: 중복 제외일 에러
1. **실행**:
   - 플랜 그룹 생성 페이지 → Step 2
   - 이미 등록된 제외일과 동일한 날짜 추가 시도
2. **확인**:
   - ✅ 토스트 메시지: "이미 등록된 제외일이 있습니다: YYYY-MM-DD"
   - ✅ 제외일이 추가되지 않음

#### 테스트 케이스 6-3: 시간 관리 불러오기 실패
1. **준비**: 네트워크 오류 또는 서버 오류 상황 시뮬레이션
2. **실행**:
   - "시간 관리에서 불러오기" 버튼 클릭
3. **확인**:
   - ✅ 토스트 메시지로 에러 표시
   - ✅ alert 대신 사용자 친화적인 메시지

---

## 🔄 통합 테스트 시나리오

### 시나리오 1: 캠프 템플릿 생성 → 학생 참여 → 플랜 생성

1. **관리자: 캠프 템플릿 생성**
   - 캠프 템플릿 생성 페이지 접속
   - Step 2에서 제외일 추가 (템플릿 제외일)
   - Step 2에서 학원 일정 추가 (템플릿 학원 일정)
   - "학생 입력 허용" 체크박스 설정
   - "학습 시간 제외 항목 사용" 체크박스 설정
   - 템플릿 저장

2. **관리자: 학생 초대**
   - 템플릿 상세 페이지에서 학생 초대
   - 초대 발송

3. **학생: 캠프 참여**
   - 캠프 참여 페이지 접속
   - Step 2 확인:
     - ✅ 템플릿 제외일이 표시됨 (삭제 불가)
     - ✅ 템플릿 학원 일정이 표시됨 (삭제 불가)
     - ✅ "시간 관리에서 불러오기" 버튼 클릭 → 시간 관리 데이터 추가
     - ✅ 학생이 직접 제외일 추가 가능 (템플릿에서 허용한 경우)
     - ✅ 학생이 직접 학원 일정 추가 가능 (템플릿에서 허용한 경우)
   - 플랜 생성 완료

4. **확인**
   - ✅ 생성된 플랜 그룹의 제외일 목록 확인
   - ✅ 템플릿 제외일, 시간 관리 제외일, 학생 입력 제외일이 모두 포함됨
   - ✅ 출처가 정확히 표시됨

### 시나리오 2: 일반 플랜 그룹 생성 (시간 관리 데이터 활용)

1. **학생: 시간 관리 설정**
   - 시간 관리 페이지에서 제외일 등록
   - 시간 관리 페이지에서 학원 일정 등록

2. **학생: 플랜 그룹 생성**
   - 새 플랜 그룹 생성 페이지 접속
   - Step 1 완료
   - Step 2에서:
     - ✅ "시간 관리에서 불러오기" 버튼 클릭 (제외일)
     - ✅ "시간 관리에서 불러오기" 버튼 클릭 (학원 일정)
     - ✅ 추가 제외일/학원 일정 입력
   - 플랜 생성 완료

3. **확인**
   - ✅ 시간 관리 데이터가 정상적으로 불러와짐
   - ✅ 출처가 정확히 표시됨
   - ✅ 중복 데이터가 자동으로 제외됨

---

## 🐛 버그 체크리스트

- [ ] 템플릿 제외일 삭제 시도 시 에러 발생하지 않음
- [ ] 시간 관리 불러오기 시 중복 데이터 처리 정상 동작
- [ ] 출처 표시가 모든 경우에 정확히 표시됨
- [ ] 토스트 메시지가 모든 에러 상황에서 표시됨
- [ ] 템플릿 모드 체크박스 상태가 저장/불러오기 시 유지됨
- [ ] 새 플랜 그룹 생성 시 groupId 없이도 시간 관리 불러오기 동작

---

## 📊 성능 테스트

- [ ] 대량의 제외일(100개 이상) 처리 시 성능 확인
- [ ] 대량의 학원 일정(50개 이상) 처리 시 성능 확인
- [ ] 시간 관리 불러오기 응답 시간 확인 (< 2초)

---

**테스트 완료일**: 2025-01-XX  
**테스트 담당자**: [담당자명]  
**테스트 결과**: [성공/실패]










