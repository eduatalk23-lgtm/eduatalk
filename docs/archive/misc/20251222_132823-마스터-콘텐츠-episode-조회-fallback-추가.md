# ë§ˆìŠ¤í„° ì½˜í…ì¸  Episode ì¡°íšŒ Fallback ì¶”ê°€

## ğŸ“‹ ì‘ì—… ê°œìš”

ë§ˆìŠ¤í„° ì½˜í…ì¸ ì—ì„œ ê°€ì ¸ì˜¨ ê°•ì˜ì˜ íšŒì°¨ ì •ë³´ë¥¼ ì¡°íšŒí•  ë•Œ, `student_lecture_episodes` í…Œì´ë¸”ì—ì„œë§Œ ì¡°íšŒí•˜ì—¬ ë°ì´í„°ë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

## ğŸ” ë¬¸ì œ ìƒí™©

`getStudentLectureEpisodesBatch` í•¨ìˆ˜ê°€ `student_lecture_episodes` í…Œì´ë¸”ì—ì„œë§Œ ì¡°íšŒí•˜ì—¬, ë§ˆìŠ¤í„° ì½˜í…ì¸ ì—ì„œ ê°€ì ¸ì˜¨ ê°•ì˜ì˜ ê²½ìš° íšŒì°¨ ì •ë³´ë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

### ì—ëŸ¬ ë¡œê·¸ ì˜ˆì‹œ

```
[getStudentLectureEpisodesBatch] íšŒì°¨ê°€ ì—†ëŠ” ê°•ì˜: {
  count: 1,
  lectureIds: [ '048f5e20-be95-4868-adcb-5a486685845a' ],
  reason: 'student_lecture_episodes í…Œì´ë¸”ì— í•´ë‹¹ ê°•ì˜ì˜ íšŒì°¨ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.'
}
```

## âœ… í•´ê²° ë°©ë²•

`getStudentLectureEpisodesBatch` í•¨ìˆ˜ì— ë§ˆìŠ¤í„° ì½˜í…ì¸  fallback ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤:

1. **1ì°¨ ì¡°íšŒ**: `student_lecture_episodes` í…Œì´ë¸”ì—ì„œ ì¡°íšŒ
2. **Fallback ì¡°íšŒ**: ì¡°íšŒ ê²°ê³¼ê°€ ì—†ëŠ” ê°•ì˜ë“¤ì— ëŒ€í•´:
   - `lectures` í…Œì´ë¸”ì—ì„œ `master_lecture_id` ì¡°íšŒ
   - `master_lecture_id`ê°€ ìˆëŠ” ê²½ìš°, `lecture_episodes` í…Œì´ë¸”ì—ì„œ ë§ˆìŠ¤í„° ê°•ì˜ì˜ episodes ì¡°íšŒ
   - ë§ˆìŠ¤í„° ê°•ì˜ì˜ episodesë¥¼ í•™ìƒ ê°•ì˜ IDë¡œ ë§¤í•‘í•˜ì—¬ ê²°ê³¼ì— ì¶”ê°€

## ğŸ“ ìˆ˜ì • ë‚´ìš©

### íŒŒì¼: `lib/data/contentMasters.ts`

#### `getStudentLectureEpisodesBatch` í•¨ìˆ˜ ìˆ˜ì •

**ë³€ê²½ ì „**:
- `student_lecture_episodes` í…Œì´ë¸”ì—ì„œë§Œ ì¡°íšŒ
- ì¡°íšŒ ê²°ê³¼ê°€ ì—†ìœ¼ë©´ ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”

**ë³€ê²½ í›„**:
- `student_lecture_episodes` í…Œì´ë¸”ì—ì„œ 1ì°¨ ì¡°íšŒ
- ì¡°íšŒ ê²°ê³¼ê°€ ì—†ëŠ” ê°•ì˜ë“¤ì— ëŒ€í•´:
  - `lectures` í…Œì´ë¸”ì—ì„œ `master_lecture_id` í™•ì¸
  - `master_lecture_id`ê°€ ìˆìœ¼ë©´ `lecture_episodes` í…Œì´ë¸”ì—ì„œ ë§ˆìŠ¤í„° ê°•ì˜ episodes ì¡°íšŒ
  - ë§ˆìŠ¤í„° ê°•ì˜ episodesë¥¼ í•™ìƒ ê°•ì˜ IDë¡œ ë§¤í•‘í•˜ì—¬ ê²°ê³¼ì— ì¶”ê°€

## ğŸ”„ ë™ì‘ íë¦„

```
1. student_lecture_episodesì—ì„œ ì¡°íšŒ
   â†“
2. ì¡°íšŒ ê²°ê³¼ê°€ ì—†ëŠ” ê°•ì˜ ID ëª©ë¡ ì¶”ì¶œ
   â†“
3. lectures í…Œì´ë¸”ì—ì„œ master_lecture_id ì¡°íšŒ
   â†“
4. master_lecture_idê°€ ìˆëŠ” ê²½ìš°
   â†“
5. lecture_episodesì—ì„œ ë§ˆìŠ¤í„° ê°•ì˜ episodes ì¡°íšŒ
   â†“
6. ë§ˆìŠ¤í„° ê°•ì˜ ID â†’ í•™ìƒ ê°•ì˜ ID ë§¤í•‘
   â†“
7. ê²°ê³¼ì— ì¶”ê°€
```

## ğŸ“Š ì„±ëŠ¥ ë¡œê¹… ê°œì„ 

ê°œë°œ í™˜ê²½ì—ì„œ ë‹¤ìŒ ì •ë³´ë¥¼ ì¶”ê°€ë¡œ ë¡œê¹…í•©ë‹ˆë‹¤:

- `fallbackUsed`: ë§ˆìŠ¤í„° ì½˜í…ì¸  fallbackì´ ì‚¬ìš©ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€
- ì—ëŸ¬ ë©”ì‹œì§€ ê°œì„ : "student_lecture_episodes ë° lecture_episodes í…Œì´ë¸” ëª¨ë‘ì— í•´ë‹¹ ê°•ì˜ì˜ íšŒì°¨ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤."

## ğŸ¯ ê¸°ëŒ€ íš¨ê³¼

1. **ë°ì´í„° ì¡°íšŒ ì„±ê³µë¥  í–¥ìƒ**: ë§ˆìŠ¤í„° ì½˜í…ì¸ ì—ì„œ ê°€ì ¸ì˜¨ ê°•ì˜ì˜ íšŒì°¨ ì •ë³´ë¥¼ ì •ìƒì ìœ¼ë¡œ ì¡°íšŒ ê°€ëŠ¥
2. **ì‚¬ìš©ì ê²½í—˜ ê°œì„ **: íšŒì°¨ ì •ë³´ê°€ ì—†ëŠ” ê°•ì˜ë¡œ ì¸í•œ ì˜¤ë¥˜ ê°ì†Œ
3. **ì¼ê´€ì„± ìœ ì§€**: ê¸°ì¡´ `app/(student)/actions/plan-groups/queries.ts`ì˜ ë¡œì§ê³¼ ì¼ê´€ì„± ìœ ì§€

## ğŸ”— ê´€ë ¨ ì½”ë“œ

- `lib/data/contentMasters.ts`: `getStudentLectureEpisodesBatch` í•¨ìˆ˜
- `app/(student)/actions/plan-groups/queries.ts`: ìœ ì‚¬í•œ fallback ë¡œì§ ì°¸ê³ 
- `lib/data/contentMasters.ts`: `getMasterLectureEpisodesBatch` í•¨ìˆ˜ (ë§ˆìŠ¤í„° ì „ìš© ì¡°íšŒ)

## ğŸ“… ì‘ì—… ì¼ì‹œ

2025-12-22 13:28:23




