# LLM 플랜 생성 테스트 결과

> 테스트 일시: 2026-01-02
> 테스트 방법: Claude Code CLI Mock 테스트

---

## 1. 테스트 시나리오

### 입력 데이터

```
학생: 김테스트 (11학년, 테스트고등학교)
목표: 서울대학교 컴퓨터공학과

콘텐츠:
├── 수학의 정석 (책, 350페이지) ⚠️ 취약 과목
└── 영어 독해 (강의, 30강)

설정:
├── 기간: 2025-01-06 ~ 2025-01-08 (3일)
├── 일일 학습: 120분
├── 제외 요일: 일요일
├── 취약 과목 우선: ✓
├── 복습 포함: ✓
└── 복습 비율: 20%
```

---

## 2. 생성된 플랜 (시각화)

### 주간 캘린더 뷰

```
┌─────────────────────────────────────────────────────────────────┐
│                    2025년 1월 1주차                              │
├─────────────────────────────────────────────────────────────────┤
│   월 (1/6)         화 (1/7)         수 (1/8)                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│   ┌─────────┐     ┌─────────┐     ┌─────────┐                  │
│   │ 09:00   │     │ 09:00   │     │ 09:00   │                  │
│   │ 수학    │     │ 수학    │     │ 수학    │                  │
│   │ p.1-20  │     │ p.21-40 │     │ p.1-20  │                  │
│   │ ⭐ HIGH │     │ ⭐ HIGH │     │ 🔄 복습 │                  │
│   └─────────┘     └─────────┘     └─────────┘                  │
│                                                                  │
│   ┌─────────┐     ┌─────────┐     ┌─────────┐                  │
│   │ 10:00   │     │ 10:00   │     │ 10:00   │                  │
│   │ 영어    │     │ 영어    │     │ 영어    │                  │
│   │ 1-2강   │     │ 3-4강   │     │ 5-6강   │                  │
│   │ 📘 MED  │     │ 📘 MED  │     │ 📘 MED  │                  │
│   └─────────┘     └─────────┘     └─────────┘                  │
│                                                                  │
│   총 120분         총 120분         총 120분                    │
└─────────────────────────────────────────────────────────────────┘
```

### 일별 상세 플랜

| 날짜 | 시간 | 과목 | 콘텐츠 | 범위 | 분류 |
|------|------|------|--------|------|------|
| 1/6 (월) | 09:00-10:00 | 수학 | 수학의 정석 | p.1-20 | 신규 |
| 1/6 (월) | 10:00-11:00 | 영어 | 영어 독해 | 1-2강 | 신규 |
| 1/7 (화) | 09:00-10:00 | 수학 | 수학의 정석 | p.21-40 | 신규 |
| 1/7 (화) | 10:00-11:00 | 영어 | 영어 독해 | 3-4강 | 신규 |
| 1/8 (수) | 09:00-10:00 | 수학 | 수학의 정석 | p.1-20 | 🔄 복습 |
| 1/8 (수) | 10:00-11:00 | 영어 | 영어 독해 | 5-6강 | 신규 |

---

## 3. 품질 메트릭 분석

### 전체 통계

```
총 플랜 수: 6개
총 학습 시간: 360분 (6시간)
주간 매트릭스: 1주

파싱 신뢰도: 100%
스킵된 플랜: 0개
```

### 품질 지표

```
┌────────────────────────────────────────────────────────────┐
│                    품질 메트릭 대시보드                      │
├────────────────────────────────────────────────────────────┤
│                                                             │
│  취약 과목 오전 배치율                                       │
│  ████████████████████░░░░░░░░░░░░░░░░░░░░  50.0%           │
│  목표: 50% 이상 ✅ 달성                                      │
│                                                             │
│  복습 비율                                                   │
│  ███████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░  16.7%           │
│  목표: 20% (1개/6개 = 16.7%) ⚠️ 약간 미달                   │
│                                                             │
│  과목 균형                                                   │
│  수학: ██████████████████████  50% (180분)                 │
│  영어: ██████████████████████  50% (180분)                 │
│  ✅ 균형 달성                                                │
│                                                             │
└────────────────────────────────────────────────────────────┘
```

### 과목별 학습 시간 분포

```
수학  ████████████████████  180분 (50%)
영어  ████████████████████  180분 (50%)
      ─────────────────────────────────
      0    60   120   180   240   300분
```

---

## 4. 콘텐츠 진도 추적

### 수학의 정석 (350페이지)

```
진도: 40/350 페이지 (11.4%)

[████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░] 11.4%

학습 이력:
├── 1/6: p.1-20 (신규)
├── 1/7: p.21-40 (신규)
└── 1/8: p.1-20 (복습)
```

### 영어 독해 (30강)

```
진도: 6/30 강 (20.0%)

[████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░] 20.0%

학습 이력:
├── 1/6: 1-2강
├── 1/7: 3-4강
└── 1/8: 5-6강
```

---

## 5. AI 추천 사항

### 💡 학습 팁

| # | 추천 내용 |
|---|----------|
| 1 | 수학은 오전에 집중력이 높을 때 학습하세요 |
| 2 | 영어 독해는 소리 내어 읽으면 효과적입니다 |

### ⚠️ 주의사항

| # | 경고 내용 |
|---|----------|
| 1 | 수학 진도가 빠르니 이해 안 되면 반복하세요 |

### 🎯 집중 영역

- 수학 기초 개념
- 영어 독해력

---

## 6. contentId 검증 테스트

### 테스트 케이스: 유효하지 않은 contentId 처리

```
입력된 contentId:
├── content-1  ✅ 유효
├── INVALID-ID ❌ 유효하지 않음
└── content-2  ✅ 유효

결과:
├── 파싱 성공: true
├── 유효한 플랜: 2개
└── 스킵된 플랜: 1개
    └── 이유: "유효하지 않은 contentId: INVALID-ID"
```

---

## 7. DB 저장 형식 변환

### 변환 예시 (첫 번째 플랜)

| LLM 응답 필드 | DB 필드 | 값 |
|--------------|---------|-----|
| date | plan_date | 2025-01-06 |
| startTime | start_time | 09:00 |
| endTime | end_time | 10:00 |
| contentId | content_id | content-1 |
| contentTitle | title | 수학의 정석 |
| subject | subject | 수학 |
| rangeDisplay | range_display | p.1-20 |
| isReview | is_review | false |
| priority | priority | high |
| - | status | pending |
| - | ai_generated | true |

---

## 8. 테스트 실행 방법

```bash
# Mock 응답 파싱 테스트 (API 불필요)
npx tsx scripts/test-llm-mock.ts

# contentId 검증 테스트 (API 불필요)
npx tsx scripts/test-llm-validation.ts

# 실제 Claude API 테스트 (크레딧 필요)
npx tsx scripts/test-llm-plan.ts [fast|standard|advanced]
```

---

## 9. 결론

### ✅ 검증 완료 항목

- [x] 프롬프트 빌드 (시스템 + 사용자)
- [x] JSON 응답 파싱
- [x] 주간/일별 플랜 구조화
- [x] 복습 플랜 표시
- [x] 품질 메트릭 계산
- [x] contentId 유효성 검증
- [x] 스킵된 플랜 추적
- [x] DB 저장 형식 변환
- [x] AI 추천 사항 추출

### 🔧 개선 권장 사항

1. 복습 비율이 목표(20%)보다 약간 낮음 (16.7%) - 프롬프트 강화 고려
2. 장기 플랜(30일 이상) 테스트 필요
3. 다양한 콘텐츠 타입 조합 테스트 권장

---

*이 문서는 Claude Code CLI를 활용한 Mock 테스트 결과입니다.*
