# SMS 전송 페이지 UI 개선 및 코드 최적화

## 작업 개요

SMS 전송 페이지(`/admin/sms/send`)의 중복 코드 제거, 웹 환경 최적화 레이아웃 적용, 전송 대상자 옵션 중복 정리를 수행했습니다.

## 작업 일시

2025년 1월 15일

## 주요 변경 사항

### 1. 버그 수정

**파일**: `app/(admin)/admin/sms/_components/SMSSendForm.tsx`

- **391줄**: 정의되지 않은 `setSelectedStudentIds` 변수 사용 제거
- 단일 발송 모드 전환 시 `setSelectedRecipients(new Map())` 사용으로 변경

### 2. 전송 대상자 옵션 중복 제거

**파일**: `app/(admin)/admin/sms/_components/SMSSendForm.tsx`

- **434-472줄**: "전송 대상자 선택" 섹션을 단일 발송 모드에서만 표시하도록 수정
- 일괄 발송 모드에서는 `SMSFilterPanel`의 전송 대상자 필터(체크박스, 다중 선택)만 사용
- 조건부 렌더링: `{sendMode === "single" && (...)}`

**변경 전**:
- 일괄 발송 모드에서도 하단에 전송 대상자 선택 라디오 버튼이 표시되어 혼란 발생

**변경 후**:
- 일괄 발송 모드: `SMSFilterPanel`의 전송 대상자 필터만 사용 (다중 선택 가능)
- 단일 발송 모드: 하단의 전송 대상자 선택 라디오 버튼 사용 (단일 선택)

### 3. 웹 환경 최적화 레이아웃

#### 3.1 일괄 발송 모드 레이아웃 개선

**파일**: `app/(admin)/admin/sms/_components/SMSSendForm.tsx`

- 필터 패널과 조회 결과를 2컬럼 그리드로 배치
- 모바일: 세로 배치 (`flex flex-col`)
- 데스크톱 (lg 이상): 좌우 배치 (`lg:grid lg:grid-cols-2`)

**레이아웃 구조**:
```
┌─────────────────────────────────────┐
│  필터 패널    │  조회 결과         │
│              │  선택된 연락처      │
│              │  (또는 안내 메시지) │
└─────────────────────────────────────┘
```

#### 3.2 템플릿 및 메시지 입력 섹션 최적화

**파일**: `app/(admin)/admin/sms/_components/SMSSendForm.tsx`

- 템플릿 선택과 메시지 입력을 2컬럼 그리드로 배치
- 모바일: 세로 배치
- 데스크톱 (lg 이상): 좌우 배치

**레이아웃 구조**:
```
┌─────────────────────────────────────┐
│  템플릿 선택  │  메시지 내용       │
└─────────────────────────────────────┘
```

### 4. UX 개선

#### 4.1 조회 결과 없을 때 안내 메시지 추가

**파일**: `app/(admin)/admin/sms/_components/SMSSendForm.tsx`

- 조회 결과가 없고 로딩 중이 아닐 때 안내 메시지 표시
- "필터를 설정하고 조회 버튼을 클릭하여 발송 대상을 검색하세요."

### 5. 코드 정리

**파일**: `app/(admin)/admin/sms/_components/SMSSendForm.tsx`

- 불필요한 빈 줄 제거
- 코드 포맷팅 개선

## 기술적 세부 사항

### 반응형 디자인

- **모바일 우선 접근**: 기본적으로 세로 배치
- **데스크톱 최적화**: `lg:` 브레이크포인트(1024px) 이상에서 2컬럼 그리드 적용
- **Tailwind CSS Grid 사용**: `lg:grid lg:grid-cols-2` 클래스 활용

### 타입 안전성

- `RecipientType` 타입 일관성 유지
- `SMSFilter` 타입 검증 강화
- TypeScript 타입 오류 없음

## 예상 효과

### UX 개선

1. **공간 활용 효율성 향상**
   - 웹 환경에서 필터와 조회 결과를 동시에 확인 가능
   - 템플릿 선택과 메시지 입력을 한 화면에서 확인 가능

2. **사용자 혼란 제거**
   - 전송 대상자 선택 중복 제거로 명확한 인터페이스 제공
   - 일괄 발송 모드와 단일 발송 모드의 차이 명확화

3. **직관적인 인터페이스**
   - 조회 결과가 없을 때 명확한 안내 메시지 제공

### 코드 품질 향상

1. **버그 수정**
   - 정의되지 않은 변수 사용 제거
   - 타입 안전성 개선

2. **중복 코드 제거**
   - 전송 대상자 선택 로직 단순화
   - 유지보수성 향상

3. **코드 정리**
   - 불필요한 코드 제거
   - 일관된 포맷팅

## 테스트 권장 사항

1. **일괄 발송 모드**
   - 필터 패널과 조회 결과가 좌우로 배치되는지 확인 (데스크톱)
   - 조회 결과가 없을 때 안내 메시지가 표시되는지 확인
   - 전송 대상자 필터가 정상 작동하는지 확인

2. **단일 발송 모드**
   - 하단의 전송 대상자 선택 라디오 버튼이 표시되는지 확인
   - 일괄 발송 모드로 전환 시 전송 대상자 선택 섹션이 숨겨지는지 확인

3. **반응형 디자인**
   - 모바일에서 세로 배치가 유지되는지 확인
   - 데스크톱에서 2컬럼 그리드가 적용되는지 확인

4. **템플릿 및 메시지 입력**
   - 템플릿 선택과 메시지 입력이 좌우로 배치되는지 확인 (데스크톱)
   - 모바일에서 세로 배치가 유지되는지 확인

## 관련 파일

- `app/(admin)/admin/sms/_components/SMSSendForm.tsx` - 메인 컴포넌트
- `app/(admin)/admin/sms/_components/SMSFilterPanel.tsx` - 필터 패널 컴포넌트

## 참고 사항

- 웹 검색 결과(2025 모범 사례)를 반영한 Fluid Grid 시스템 적용
- CSS Grid와 Flexbox 조합으로 반응형 디자인 구현
- 모바일 우선 접근 방식 채택


