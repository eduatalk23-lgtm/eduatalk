# 플랜 그룹 생성 자동 저장 기능 제거

**작업일**: 2025-01-30  
**작업 내용**: 학생 페이지에서 플랜 그룹 생성 시 자동 저장 기능 제거

## 📋 작업 개요

플랜 그룹 생성 위저드에서 자동 저장 기능을 완전히 제거하여, 사용자가 수동으로 "저장" 버튼을 클릭할 때만 저장되도록 변경했습니다.

## 🔧 변경 사항

### 제거된 기능

1. **자동 저장 상태 관리**
   - `autoSaveStatus`: 자동 저장 상태 (idle, saving, saved, error)
   - `lastSavedAt`: 마지막 저장 시간
   - `autoSaveTimeoutRef`: 자동 저장 타이머 참조
   - `autoSaveSnapshotRef`: 자동 저장 스냅샷 참조
   - `isInitialMountRef`: 초기 마운트 여부
   - `shouldTrackAutoSave`: 자동 저장 추적 여부 플래그

2. **자동 저장 로직**
   - `buildAutoSaveSnapshot()`: 자동 저장용 스냅샷 생성 함수
   - 자동 저장 `useEffect`: 데이터 변경 감지 및 2초 후 자동 저장

3. **UI 표시**
   - 자동 저장 상태 텍스트 ("저장 중...", "저장됨 (시간)", "저장 실패")
   - `getAutoSaveStatusText()` 함수

4. **불필요한 import**
   - `useRef`
   - `useEffect`
   - `debounce` (사용되지 않음)

### 변경된 파일

- `app/(student)/plan/new-group/_components/PlanGroupWizard.tsx`

### 변경 세부 사항

1. **State 변수 제거** (479-486줄)
   ```typescript
   // 제거됨
   const [autoSaveStatus, setAutoSaveStatus] = useState<"idle" | "saving" | "saved" | "error">("idle");
   const [lastSavedAt, setLastSavedAt] = useState<Date | null>(null);
   const autoSaveTimeoutRef = useRef<NodeJS.Timeout | null>(null);
   const autoSaveSnapshotRef = useRef<string>("");
   const isInitialMountRef = useRef(true);
   const shouldTrackAutoSave = isCampMode && !isTemplateMode && !isAdminMode && !isAdminContinueMode;
   ```

2. **자동 저장 함수 제거** (615-647줄)
   ```typescript
   // 제거됨
   const buildAutoSaveSnapshot = useCallback(() => {
     // ... 스냅샷 생성 로직
   }, [/* ... */]);
   ```

3. **자동 저장 useEffect 제거** (821-883줄)
   ```typescript
   // 제거됨
   useEffect(() => {
     // ... 자동 저장 로직 (2초 지연 후 저장)
   }, [/* ... */]);
   ```

4. **handleSaveDraft 함수 간소화**
   - `silent` 파라미터는 유지 (다른 곳에서 사용 가능)
   - `nextSnapshot` 파라미터 제거
   - 자동 저장 관련 로직 제거:
     - `shouldTrackAutoSave` 체크 제거
     - `setAutoSaveStatus()` 호출 제거
     - `setLastSavedAt()` 호출 제거
     - 스냅샷 관련 로직 제거

5. **UI에서 자동 저장 상태 표시 제거** (1250-1256줄)
   ```typescript
   // 제거됨
   {!isTemplateMode && autoSaveStatus !== "idle" && (
     <div className="text-sm">
       <span className={/* ... */}>
         {getAutoSaveStatusText()}
       </span>
     </div>
   )}
   ```

6. **자동 저장 상태 텍스트 함수 제거** (1208-1219줄)
   ```typescript
   // 제거됨
   const getAutoSaveStatusText = () => {
     // ... 상태별 텍스트 반환
   };
   ```

## ✅ 남아있는 기능

### 수동 저장 기능

- **저장 버튼**: 사용자가 명시적으로 "저장" 버튼을 클릭할 때만 저장
- **handleSaveDraft 함수**: 수동 저장 시 호출되는 함수는 유지
  - 템플릿 모드 지원
  - 일반 모드 지원
  - 캠프 모드 지원
  - 에러 처리 및 토스트 알림

### 저장 동작

1. 사용자가 "저장" 버튼 클릭
2. `handleSaveDraft(false)` 호출 (silent=false로 토스트 알림 표시)
3. 데이터 검증 및 저장 실행
4. 성공 시 토스트 알림 표시

## 🎯 영향 범위

### 영향받지 않는 기능

- 수동 저장 기능 (정상 작동)
- 플랜 그룹 생성 기능
- 플랜 그룹 수정 기능
- 템플릿 모드
- 캠프 모드
- 관리자 모드

### 변경 사항 요약

- **이전**: 데이터 변경 시 2초 후 자동 저장, 저장 상태 표시
- **이후**: 수동 저장만 가능, 저장 상태 표시 없음

## 📝 참고 사항

1. **수동 저장만 가능**: 이제 사용자가 명시적으로 "저장" 버튼을 클릭해야 저장됩니다.
2. **자동 저장 기능 완전 제거**: 자동 저장 관련 모든 코드가 제거되어 코드가 간소화되었습니다.
3. **기존 저장 버튼 유지**: 상단 액션 바의 "저장" 버튼은 그대로 유지됩니다.
4. **Step4에서의 저장 호출**: Step4 컴포넌트에서 `onSaveDraft` prop을 통해 저장 함수를 전달받아 사용할 수 있습니다.

## 🔍 테스트 권장 사항

1. 수동 저장 기능 정상 작동 확인
2. 저장 버튼 클릭 시 토스트 알림 표시 확인
3. 저장 실패 시 에러 메시지 표시 확인
4. 각 모드(일반, 템플릿, 캠프)에서 저장 기능 정상 작동 확인

