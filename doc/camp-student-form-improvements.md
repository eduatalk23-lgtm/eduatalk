# μΊ ν”„ ν•™μƒ νΌ κ°μ„  μ‘μ—…

## π“‹ λ¬Έμ μ  μ •λ¦¬

### 1. ν•™μƒμ€ μΊ ν”„ μ°Έμ—¬μ‹ 1~4λ‹¨κ³„κΉμ§€ μ‘μ„± μ§„ν–‰
- **ν„μ¬ μƒνƒ**: ν…ν”λ¦Ώ λ¨λ“λ” 1~3λ‹¨κ³„λ§ ν‘μ‹, μΊ ν”„ λ¨λ“λ” 1~7λ‹¨κ³„ λ¨λ‘ ν‘μ‹
- **μ”κµ¬μ‚¬ν•­**: μΊ ν”„ λ¨λ“μ—μ„λ„ 1~4λ‹¨κ³„λ§ ν‘μ‹λμ–΄μ•Ό ν•¨
- **μν–¥**: Step 5, 6, 7μ€ μ¨κ²¨μ•Ό ν•¨

### 2. ν•™μƒμ΄ μ‘μ„±ν•΄μ•Ό ν•λ” ν•­λ© (μΊ ν”„ ν…ν”λ¦Ώμ—μ„ ν•™μƒ μ…λ ¥ ν—μ© ν•­λ©λ§ λ³΄μ—¬μ•Ό ν•¨)
- **ν„μ¬ μƒνƒ**: μΌλ¶€ ν•„λ“λ§ ν•™μƒ μ…λ ¥ ν—μ© μ²΄ν¬ κµ¬ν„λ¨
- **μ”κµ¬μ‚¬ν•­**: `allow_student_*` ν•„λ“κ°€ `false`μΈ ν•­λ©μ€ μ¨κΈ°κ±°λ‚ μ½κΈ° μ „μ©μΌλ΅ ν‘μ‹
- **μν–¥**: λ¨λ“  Stepμ—μ„ ν•™μƒ μ…λ ¥ ν—μ© μ—¬λ¶€ ν™•μΈ ν•„μ”

### 3. μΊ ν”„ ν…ν”λ¦Ώμ—μ„ 1λ‹¨κ³„μ "μ¶”κ°€ κΈ°κ°„ ν•™μµ λ²”μ„ μ¬λ°°μΉ" ν•­λ©μ— λ€ν• ν•™μƒ μ…λ ¥ ν—μ© κΈ°λ¥μ΄ μ—†μ
- **ν„μ¬ μƒνƒ**: `allow_student_additional_period_reallocation` ν•„λ“κ°€ μ—†μ
- **μ”κµ¬μ‚¬ν•­**: ν…ν”λ¦Ώμ—μ„ μ΄ ν•­λ©μ ν•™μƒ μ…λ ¥ ν—μ© μ—¬λ¶€λ¥Ό μ„¤μ •ν•  μ μμ–΄μ•Ό ν•¨
- **μν–¥**: Step1BasicInfo.tsx, PlanGroupWizard.tsx, ν…ν”λ¦Ώ μ €μ¥/λ΅λ“ λ΅μ§

### 4. ν•™μƒμ΄ μΊ ν”„ μ΄λ€ λ°›μ•„μ„ νΌμ„ μ—΄λ©΄ λΈ”λ΅ μ„ΈνΈ μ •λ³΄κ°€ ν‘μ‹λμ§€ μ•μ
- **ν„μ¬ μƒνƒ**: `blockSets`λ” μ „λ‹¬λμ§€λ§, μΊ ν”„ λ¨λ“μ—μ„ ν‘μ‹ μ΅°κ±΄ ν™•μΈ ν•„μ”
- **μ”κµ¬μ‚¬ν•­**: ν•™μƒ μ…λ ¥ ν—μ© μ—¬λ¶€μ™€ κ΄€κ³„μ—†μ΄ λΈ”λ΅ μ„ΈνΈ μ •λ³΄λ” μ½κΈ° μ „μ©μΌλ΅ ν‘μ‹λμ–΄μ•Ό ν•¨
- **μν–¥**: Step1BasicInfo.tsxμ λΈ”λ΅ μ„ΈνΈ ν‘μ‹ λ΅μ§

### 5. μ§„ν–‰λ¥  % ν‘μ‹ λ°” μ‚­μ  (μ΄μ : λ¶ν•„μ”ν• μ •λ³΄)
- **ν„μ¬ μƒνƒ**: ν…ν”λ¦Ώ λ¨λ“μ—μ„λ§ μ¨κΉ€ μ²λ¦¬ (`!isTemplateMode`)
- **μ”κµ¬μ‚¬ν•­**: μΊ ν”„ λ¨λ“μ—μ„λ„ μ¨κΉ€ μ²λ¦¬ ν•„μ”
- **μν–¥**: PlanGroupWizard.tsxμ μ§„ν–‰λ¥  λ°” ν‘μ‹ μ΅°κ±΄

### 6. λΈ”λ΅ μ„ΈνΈμ— λ€ν•΄μ„ ν•™μƒ μ…λ ¥ ν—μ© κΈ°λ¥μ΄ μ‘λ™ν•μ§€ μ•μ
- **ν„μ¬ μƒνƒ**: `canStudentInputBlockSetId`λ” μμ§€λ§, λΈ”λ΅ μ„ΈνΈ ν‘μ‹ λ¶€λ¶„μ—μ„ μ΅°κ±΄ ν™•μΈ ν•„μ”
- **μ”κµ¬μ‚¬ν•­**: ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ κ²½μ° λΈ”λ΅ μ„ΈνΈ μ„ νƒ/μƒμ„±/μμ • λ¶κ°€, μ½κΈ° μ „μ©μΌλ΅λ§ ν‘μ‹
- **μν–¥**: Step1BasicInfo.tsxμ λΈ”λ΅ μ„ΈνΈ κ΄€λ ¨ UI

## π― κ³ λ ¤μ‚¬ν•­

### λ°μ΄ν„° κµ¬μ΅°
- `templateLockedFields.step1.allow_student_*` ν•„λ“λ“¤μ΄ μ΄λ―Έ μ •μλμ–΄ μμ
- `additional_period_reallocation`μ— λ€ν• `allow_student_*` ν•„λ“ μ¶”κ°€ ν•„μ”
- ν…ν”λ¦Ώ μ €μ¥/λ΅λ“ μ‹ μ΄ ν•„λ“λ“¤μ΄ μ¬λ°”λ¥΄κ² μ²λ¦¬λλ”μ§€ ν™•μΈ ν•„μ”

### UI/UX
- ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ ν•„λ“λ”:
  - **μµμ… 1**: μ™„μ „ν μ¨κΉ€ (κ¶μ¥)
  - **μµμ… 2**: μ½κΈ° μ „μ©μΌλ΅ ν‘μ‹ (κ°’μ΄ μλ” κ²½μ°)
- λΈ”λ΅ μ„ΈνΈλ” ν•­μƒ μ½κΈ° μ „μ©μΌλ΅ ν‘μ‹ (μ„ νƒλ λΈ”λ΅ μ„ΈνΈ μ •λ³΄λ§)
- μ§„ν–‰λ¥  λ°”λ” μΊ ν”„ λ¨λ“μ—μ„ μ™„μ „ν μ κ±°

### λ‹¨κ³„ μ ν•
- μΊ ν”„ λ¨λ“: Step 1, 2, 3, 4λ§ ν‘μ‹
- ν…ν”λ¦Ώ λ¨λ“: Step 1, 2, 3λ§ ν‘μ‹ (κΈ°μ΅΄ μ μ§€)
- μΌλ° λ¨λ“: Step 1~7 λ¨λ‘ ν‘μ‹ (κΈ°μ΅΄ μ μ§€)

## β… κ°μ„  μ²΄ν¬λ¦¬μ¤νΈ

### Phase 1: μ§„ν–‰λ¥  λ°” μ κ±°
- [x] PlanGroupWizard.tsxμ—μ„ μΊ ν”„ λ¨λ“μΌ λ• μ§„ν–‰λ¥  λ°” μ¨κΉ€ μ²λ¦¬

### Phase 2: λ‹¨κ³„ μ ν•
- [ ] μΊ ν”„ λ¨λ“μ—μ„ Step 5, 6, 7 μ¨κΉ€ μ²λ¦¬
- [ ] μΊ ν”„ λ¨λ“μ—μ„ Step 4κΉμ§€λ§ ν‘μ‹λλ„λ΅ μμ •

### Phase 3: μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ ν•™μƒ μ…λ ¥ ν—μ©
- [ ] `WizardData` νƒ€μ…μ— `allow_student_additional_period_reallocation` ν•„λ“ μ¶”κ°€
- [ ] Step1BasicInfo.tsxμ—μ„ μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ μ„Ήμ…μ— ν•™μƒ μ…λ ¥ ν—μ© μ²΄ν¬ μ¶”κ°€
- [ ] ν…ν”λ¦Ώ νΈμ§‘ νΌμ—μ„ μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ ν•™μƒ μ…λ ¥ ν—μ© ν† κΈ€ μ¶”κ°€

### Phase 4: λΈ”λ΅ μ„ΈνΈ ν‘μ‹ κ°μ„ 
- [ ] μΊ ν”„ λ¨λ“μ—μ„ λΈ”λ΅ μ„ΈνΈ μ •λ³΄ ν•­μƒ ν‘μ‹ (μ½κΈ° μ „μ©)
- [ ] ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ κ²½μ° λΈ”λ΅ μ„ΈνΈ μ„ νƒ/μƒμ„±/μμ • λ¶κ°€ μ²λ¦¬
- [ ] μ„ νƒλ λΈ”λ΅ μ„ΈνΈ μ •λ³΄λ” ν•­μƒ ν‘μ‹

### Phase 5: ν•™μƒ μ…λ ¥ ν—μ© ν•„λ“ μ¨κΉ€ μ²λ¦¬
- [x] Step 1: ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ ν•„λ“ μ¨κΉ€ λλ” μ½κΈ° μ „μ© μ²λ¦¬ (μ™„λ£)
  - name, plan_purpose, scheduler_type, period, block_set_id, student_level, study_review_cycle, additional_period_reallocation λ¨λ‘ μ μ©λ¨
- [x] Step 2: ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ ν•„λ“ μ¨κΉ€ λλ” μ½κΈ° μ „μ© μ²λ¦¬ (μ™„λ£)
  - exclusions, academy_schedules, time_settings, non_study_time_blocks λ¨λ‘ μ μ©λ¨
- [x] Step 3: μ½ν…μΈ  μ„ νƒμ€ ν•™μƒμ΄ ν•­μƒ μ…λ ¥ν•΄μ•Ό ν•λ―€λ΅ λ³„λ„ μ²΄ν¬ λ¶ν•„μ” (ν™•μΈ μ™„λ£)
- [x] Step 4: Step 3μ™€ λ™μΌ (ν™•μΈ μ™„λ£)

### Phase 6: μ μ‚¬ κΈ°λ¥ μ¬μ κ²€
- [ ] λ¨λ“  Stepμ—μ„ ν•™μƒ μ…λ ¥ ν—μ© λ΅μ§ μΌκ΄€μ„± ν™•μΈ
- [ ] ν…ν”λ¦Ώ μ €μ¥/λ΅λ“ μ‹ ν•™μƒ μ…λ ¥ ν—μ© ν•„λ“ μ¬λ°”λ¥΄κ² μ²λ¦¬λλ”μ§€ ν™•μΈ
- [ ] μΊ ν”„ μ΄λ€ νμ΄μ§€μ—μ„ initialData μ¬λ°”λ¥΄κ² μ „λ‹¬λλ”μ§€ ν™•μΈ

## π”§ κµ¬ν„ μ„Έλ¶€μ‚¬ν•­

### 1. μ§„ν–‰λ¥  λ°” μ κ±°
```typescript
// PlanGroupWizard.tsx
{!isTemplateMode && !isCampMode && (
  <div className="rounded-lg border border-gray-200 bg-white px-4 py-3 shadow-sm">
    {/* μ§„ν–‰λ¥  λ°” */}
  </div>
)}
```

### 2. λ‹¨κ³„ μ ν•
```typescript
// PlanGroupWizard.tsx
const getVisibleSteps = () => {
  if (isTemplateMode) return [1, 2, 3];
  if (isCampMode) return [1, 2, 3, 4];
  return [1, 2, 3, 4, 5, 6, 7];
};
```

### 3. μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ ν•™μƒ μ…λ ¥ ν—μ©
```typescript
// WizardData νƒ€μ…
templateLockedFields?: {
  step1?: {
    // ... κΈ°μ΅΄ ν•„λ“λ“¤
    allow_student_additional_period_reallocation?: boolean;
  };
};

// Step1BasicInfo.tsx
const canStudentInputAdditionalPeriodReallocation = isCampMode
  ? (lockedFields.allow_student_additional_period_reallocation !== false)
  : true;
```

### 4. λΈ”λ΅ μ„ΈνΈ ν‘μ‹ κ°μ„ 
```typescript
// Step1BasicInfo.tsx
// ν•­μƒ μ„ νƒλ λΈ”λ΅ μ„ΈνΈ μ •λ³΄ ν‘μ‹ (μ½κΈ° μ „μ©)
{data.block_set_id && (
  <div className="mb-4 rounded-lg border border-gray-200 bg-gray-50 p-4">
    {/* λΈ”λ΅ μ„ΈνΈ μ •λ³΄ ν‘μ‹ */}
  </div>
)}

// ν•™μƒ μ…λ ¥ ν—μ©μ΄ trueμΈ κ²½μ°μ—λ§ μ„ νƒ/μƒμ„±/μμ • UI ν‘μ‹
{(!isCampMode || canStudentInputBlockSetId) && (
  {/* λΈ”λ΅ μ„ΈνΈ μ„ νƒ/μƒμ„±/μμ • UI */}
)}
```

## π“ ν…μ¤νΈ μ‹λ‚λ¦¬μ¤

### μ‹λ‚λ¦¬μ¤ 1: μ§„ν–‰λ¥  λ°” μ κ±°
1. μΊ ν”„ μ΄λ€ νμ΄μ§€ μ ‘μ†
2. μ§„ν–‰λ¥  λ°”κ°€ ν‘μ‹λμ§€ μ•λ”μ§€ ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 2: λ‹¨κ³„ μ ν•
1. μΊ ν”„ μ΄λ€ νμ΄μ§€ μ ‘μ†
2. Step 1, 2, 3, 4λ§ ν‘μ‹λλ”μ§€ ν™•μΈ
3. Step 5, 6, 7μ΄ μ¨κ²¨μ Έ μλ”μ§€ ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 3: μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ ν•™μƒ μ…λ ¥ ν—μ©
1. ν…ν”λ¦Ώ νΈμ§‘ νμ΄μ§€μ—μ„ μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ ν•™μƒ μ…λ ¥ ν—μ© ν† κΈ€ ν™•μΈ
2. ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ κ²½μ° μΊ ν”„ νΌμ—μ„ μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ μ„Ήμ… μ¨κΉ€ λλ” μ½κΈ° μ „μ© ν™•μΈ
3. ν•™μƒ μ…λ ¥ ν—μ©μ΄ `true`μΈ κ²½μ° μΊ ν”„ νΌμ—μ„ μ¶”κ°€ κΈ°κ°„ μ¬λ°°μΉ μ„Ήμ… νΈμ§‘ κ°€λ¥ ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 4: λΈ”λ΅ μ„ΈνΈ ν‘μ‹
1. μΊ ν”„ νΌμ—μ„ λΈ”λ΅ μ„ΈνΈ μ •λ³΄κ°€ ν•­μƒ ν‘μ‹λλ”μ§€ ν™•μΈ
2. ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ κ²½μ° λΈ”λ΅ μ„ΈνΈ μ„ νƒ/μƒμ„±/μμ • UI μ¨κΉ€ ν™•μΈ
3. ν•™μƒ μ…λ ¥ ν—μ©μ΄ `true`μΈ κ²½μ° λΈ”λ΅ μ„ΈνΈ μ„ νƒ/μƒμ„±/μμ • UI ν‘μ‹ ν™•μΈ

### μ‹λ‚λ¦¬μ¤ 5: ν•™μƒ μ…λ ¥ ν—μ© ν•„λ“ μ¨κΉ€
1. ν…ν”λ¦Ώμ—μ„ κ° ν•„λ“μ ν•™μƒ μ…λ ¥ ν—μ©μ„ `false`λ΅ μ„¤μ •
2. μΊ ν”„ νΌμ—μ„ ν•΄λ‹Ή ν•„λ“κ°€ μ¨κ²¨μ§€κ±°λ‚ μ½κΈ° μ „μ©μΌλ΅ ν‘μ‹λλ”μ§€ ν™•μΈ
3. ν…ν”λ¦Ώμ—μ„ κ° ν•„λ“μ ν•™μƒ μ…λ ¥ ν—μ©μ„ `true`λ΅ μ„¤μ •
4. μΊ ν”„ νΌμ—μ„ ν•΄λ‹Ή ν•„λ“κ°€ νΈμ§‘ κ°€λ¥ν•μ§€ ν™•μΈ

## π¨ μ£Όμμ‚¬ν•­

1. **κΈ°μ΅΄ λ°μ΄ν„° νΈν™μ„±**: κΈ°μ΅΄ ν…ν”λ¦Ώμ— `allow_student_additional_period_reallocation` ν•„λ“κ°€ μ—†μ„ μ μμΌλ―€λ΅, κΈ°λ³Έκ°’μ„ `true`λ΅ μ²λ¦¬
2. **ν…ν”λ¦Ώ μμ • μν–¥**: ν…ν”λ¦Ώμ„ μμ •ν•λ©΄ μ΄λ―Έ λ°μ†΅λ μ΄λ€μ— μν–¥μ΄ κ°€μ§€ μ•λ„λ΅ μ£Όμ
3. **λΈ”λ΅ μ„ΈνΈ ν•„μμ„±**: λΈ”λ΅ μ„ΈνΈλ” ν•„μ ν•­λ©μ΄λ―€λ΅, ν•™μƒ μ…λ ¥ ν—μ©μ΄ `false`μΈ κ²½μ° ν…ν”λ¦Ώμ— λΈ”λ΅ μ„ΈνΈκ°€ μ„¤μ •λμ–΄ μμ–΄μ•Ό ν•¨

